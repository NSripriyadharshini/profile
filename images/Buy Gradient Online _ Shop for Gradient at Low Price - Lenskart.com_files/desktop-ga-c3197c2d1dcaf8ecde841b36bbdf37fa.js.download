var dtm=dtm||{};var dtm=(function(){var ga={};var ga2={};var prodAdded="",prodAddedPackType="",prodAddedPackName="",prodAddedCoating="",successLogin="guest";return{LenskartRewamp:{allPage:function(pageType){ga.pageType=pageType;ga.deviceType="desktop";},header:{load:{},click:{headerClick:function(pagename,value){ga.linkPageName=ga.pageName;ga.linkName="web|header|"+value;ga.event="generic-int-link";dataLayer.push(ga);},topNavClickValue:function(type,section,subSection,link){ga.linkPageName=ga.pageName;ga.linkName="web|topnav|"+(type?type+"|":"")+(section?section+"|":"")+(subSection?subSection+"|":"")+(link?link:"");ga.loginStatus=ga.loginStatus;ga.event="generic-int-link";dataLayer.push(ga);},topNavClick:function(type,section,subSection,link,cta){ga.linkPageName=ga.pageName;ga.linkName="web|topnav|"+(type?type+"|":"")+(section?section+"|":"")+(subSection?subSection+"|":"")+(link?link:"");ga.loginStatus=ga.loginStatus;ga.event="generic-int-link";ga.ctaName=cta||"";dataLayer.push(ga);},},},cms:{load:{cmsOnLoad:function(path,url){ga.pageUrl=url||'';ga.pageName=path;ga.subSection1=path;ga.subSection2=path;ga.channel="";ga.hierarchy1="";if(["eyeglasses.html","sunglasses.html","premium-eyeglasses","premium-sunglasses","cms-contacts","cms-eris"].includes(path)){ga.category=path;ga.channel="web|listing page";}
ga.event="vp-generic";dataLayer.push(ga);},},},Home:{load:{homepageLoad:function(){ga.pageName="web|home|homepage";ga.channel="web|home";ga.subSection1="web|home|homepage";ga.hierarchy1="home";ga.event="homepage";dataLayer.push(ga);},getSessionID:function(){if(document.cookie.search("omniSession")!=-1){ga.sessionID=getCookie("omniSession");}else{ga.sessionID=Math.random().toString(34).substring(2);var date=new Date();date.setTime(date.getTime()+60*24*60*60*1e3);var expires="; expires="+date.toGMTString();document.cookie="omniSession="+ga.sessionID+expires;}},},click:{viewrange:function(cat,name){ga.linkPageName="web|home|homepage";ga.linkName="web|home|view-range|"+cat+"|"+name;ga.clickEvent="event41";ga.event="generic-int-link";dataLayer.push(ga);},hometags:function(cat,name){if(!cat&&!name){ga.pageName="web|home|homepage";ga.channel="web|home";ga.hierarchy1="home";}else{ga.linkPageName="web|home|homepage";ga.linkName="web|home|"+cat+"|"+name;ga.clickEvent="event41";}
ga.event="generic-int-link";dataLayer.push(ga);}},},collection:{click:{bannerclickga:function(pageName,componentType,horizontalPos,event,verticalPos){if(event){var getClosetElement=event.target.closest(".section-component");verticalPos=getClosetElement.getAttribute("attribute-index");}
ga.icid=pageName+":-row-"+verticalPos+"_column-"+horizontalPos+":"+componentType;ga.event="generic-int-link";dataLayer.push(ga);delete ga.icid;},},},category:{load:{},click:{}},Listing:{load:{listing:function(pcategory,psubcategory,filter,sort,status,cxid,obj){ga.pageName="web|"+pcategory+"|listing page";ga.channel="web|listing page";ga.subSection1="web|listing page|"+pcategory;ga.subSection2="web|listing page|"+pcategory+"|"+psubcategory;ga.filterType=filter;ga.sorttype=sort;ga.age="";ga.offers="";ga.face="";ga.latest="";ga.work="";ga.other="";ga.accessories="";ga.loginStatus=ga.loginStatus;ga.category=pcategory;ga.customerID=cxid;ga.subcategory=psubcategory;for(var objKey in obj){ga[objKey]=obj[objKey].toString().toLowerCase();}
ga.event="product-listing";dataLayer.push(ga);},headerShortlist:function(productId){ga.pageName=ga.channel+"|shortlisted products";ga.channel=ga.channel;ga.subSection1=ga.channel+"|shortlisted products";ga.subSection2=ga.channel+"|shortlisted products";ga.productID=productId;ga.event="vp-generic";dataLayer.push(ga);delete ga.productID;},ecommTop15Products:function(loginStatus,topPids){var ga={};ga.event="productImpression";ga.userType=loginStatus;ga.ecommerce={currencyCode:"INR",impressions:topPids};dataLayer.push(ga);},qView:function(pcategory,psubcategory,cxid,pid,fsize,ftype,fshape,brand,gender,pricerange,cOptions,soption,status){ga.pageName="web|"+pcategory+"|listing page|quick view";ga.channel="web|listing page";ga.subSection1="web|listing page|"+pcategory+"|"+psubcategory;ga.subSection2="web|listing page|"+pcategory+"|"+psubcategory+"|quick view";ga.age="";ga.offers="";ga.face="";ga.latest="";ga.work="";ga.other="";ga.accessories="";ga.loginStatus=ga.loginStatus;ga.customerID=cxid;ga.category=pcategory;ga.subcategory=psubcategory;ga.productID=pid;ga.framesize=fsize;ga.frametype=ftype;ga.frameshape=fshape;ga.brand=brand;ga.gender=gender;ga.pricerange=pricerange;ga.colorOptions=cOptions;ga.similarOptions=soption;ga.event="product-listing";dataLayer.push(ga);},verticalFilter:function(val){ga.filterOrientation=val;},},click:{clearList:function(status,pid){ga.linkPageName=ga.pageName;ga.linkName="web|shortlisted products|clear list";ga.loginStatus=ga.loginStatus;ga.category=ga.category;ga.productID=pid;ga.event="product-shortlist";dataLayer.push(ga);},resetFilters:function(){ga.linkPageName=ga.pageName;ga.linkName="web|listing page|reset filters";ga.loginStatus=ga.loginStatus;ga.event="product-listing";dataLayer.push(ga);},removeProdcutShortlist:function(status,pid){ga.linkPageName=ga.pageName;ga.category=ga.category;ga.linkName="web|shortlisted products|remove product";ga.loginStatus=ga.loginStatus;ga.productID=pid;ga.event="product-shortlist";dataLayer.push(ga);},shortlist:function(pid){ga.linkPageName="web|"+ga.category+"|"+ga.pageType;ga.linkName="web|"+ga.category+"|shortlist product";ga.productID=pid;ga.category=ga.category;ga.event="product-shortlist";dataLayer.push(ga);delete ga.linkPageName;delete ga.linkName;delete ga.productID;},ecommProductClicked:function(productData,position,loginStatus,categoryId){if(productData){let prodType="";const sku=productData.sku||"";if(sku.indexOf("eye:")>-1)prodType="Eyeglasses";else if(sku.indexOf("sun:")>-1)prodType="Sunglasses";else if(sku.indexOf("contact:")>-1)prodType="Contact Lens";else if(sku.indexOf("watch:")>-1)prodType="Accessories";else prodType="Others";const productClicked=[{id:productData.id,price:productData.prices[1].price,brand:productData.brand_name,category:prodType,dimension21:categoryId,position:position+1}];const dtmListingProdClickedData={event:"productClick",userType:loginStatus,ecommerce:{click:{actionField:{list:""},products:productClicked}}};dataLayer.push(dtmListingProdClickedData);}},},filter:{appliedFilter:function(filterName,totalFilter){const ga=filterName;ga.event="filterApplied";ga.filterCount=totalFilter;dataLayer.push(ga);}},sort:{applySortingOnProduct:function(sortLabel){const ga={};ga.event="sortApplied";ga.sortSelected=sortLabel;dataLayer.push(ga);}},},Pdp:{load:{pdpPage:function(pcategory,cxid,psubcategory,productId,fsize,ftype,fshape,brand,gender,marketPrice,lenskartPrice,loginStatus){ga.event="product-description";ga.pageName="web|"+pcategory+"|pdp page";ga.channel="web|pdp page";ga.subSection1="web|pdp page|"+pcategory;ga.subSection2="web|pdp page|"+psubcategory;ga.loginStatus=loginStatus;delete ga.linkPageName;ga.customerID=cxid;ga.category=pcategory;ga.subcategory=psubcategory;ga.productID=productId;ga.framesize=fsize;ga.frametype=ftype;ga.frameshape=fshape;ga.brand=brand;ga.gender=gender;ga.price=lenskartPrice;ga.merch="";dataLayer.push(ga);},ecommproductDetailView:function(productData,lenskartPrice,loginStatus,eventName){let prodVariant;let prodGender;if(productData.type==="Contact Lens"){prodVariant=productData.specifications[1].items.find((item)=>item.name==="Product Type");}else{const prodSpecs=productData.specifications[0].items;prodVariant=prodSpecs.find((item)=>item.name==="Collection");prodGender=prodSpecs.find((item)=>item.name==="Gender");}
prodVariant=prodVariant?prodVariant.value:"";prodGender=prodGender?prodGender.value:"Unisex";let prodAvailablePowerType="";if(productData.prescriptionType.length>1){if(productData.type==="Eyeglasses"){prodAvailablePowerType=productData.prescriptionType.map((item)=>item.id).join(",");}else{prodAvailablePowerType="";}}
var prodDetail=[{name:productData.fullName,id:productData.id,price:lenskartPrice,brand:productData.brandName,category:productData.type,variant:prodVariant,dimension21:productData.id,dimension22:prodAvailablePowerType,},];if(window.sessionStorage.isReOrderProduct==="ON")prodDetail=Object.assign({},...prodDetail,{dimension43:"re order"});var ecommDataLayerData={event:eventName,userType:loginStatus,ecommerce:{detail:{actionField:{list:prodGender},products:prodDetail}}};dataLayer.push(ecommDataLayerData);},addCoatingModal:function(){var ga1={};ga1.event="vp-generic";ga1.pageName="web|order checkout|add coating";ga1.channel="web|order checkout";ga1.subSection1="web|order checkout|add coating";ga1.subSection2="web|order checkout|add coating";ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;dataLayer.push(ga1);},prescriptionInfoModal:function(){var ga1={};ga1.event="vp-generic";ga1.pageName="web|order checkout|power description";ga1.channel="web|order checkout";ga1.subSection1="web|order checkout|power description";ga1.subSection2="web|order checkout|power description";ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;dataLayer.push(ga1);},howDoILook:function(){var ga1={};ga1.pageName="web|"+ga.category+"|share your looks";ga1.channel="web|pdp page";ga1.subSection1="web|"+ga.category+"|share your looks";ga1.subSection2="web|"+ga.category+"|share your looks";ga1.category=ga.category;ga1.event="vp-generic";dataLayer.push(ga1);},tryOnSwitchOnLoad:function(){var ga1={};ga1.pageName="web|"+ga.category+"|pdp page";ga1.channel="web|pdp page";ga1.subSection1="web|"+ga.category+"|pdp page-try on";ga1.subSection2="web|"+ga.category+"|pdp page";ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.event="vp-generic";dataLayer.push(ga1);},nearByStoreLoad:function(refSuffix){var ga1={};var pageNameRef=refSuffix?`web|book appointment at store|${refSuffix}`:ga.pageName;ga1.pageName=pageNameRef;ga1.channel="web|book appointment at store";ga1.subSection1=pageNameRef;ga1.subSection2=pageNameRef;ga1.category=ga.category;ga1.productID=ga.productID;ga1.event="vp-generic";dataLayer.push(ga1);},},click:{hecFrame:function(hecFrameValue){var ga1={};ga1.linkName="web|pdp page|"+hecFrameValue;ga1.linkPageName="web|eyeglasses|"+ga.category;ga1.event="generic-int-link";dataLayer.push(ga1);},addToCart:function(productData){var ga1={};var prodAvailablePowerType="";ga1.linkName="web|order checkout|cart addition";ga1.linkPageName="web|"+productData.type+"|pdp page";ga1.event="cart-add";var final={...ga,...ga1};dataLayer.push(final);let prodVariant;if(productData.type==="Contact Lens"){prodVariant=productData.specifications[1].items.find((item)=>item.name==="Product Type");}else{const prodSpecs=productData.specifications&&productData.specifications[0].items;prodVariant=prodSpecs&&prodSpecs.find((item)=>item.name==="Collection");}
prodVariant=prodVariant?prodVariant.value:"";prodAvailablePowerType="";if(productData.prescriptionType&&productData.prescriptionType.length>1){if(productData.type==="Eyeglasses"){prodAvailablePowerType=productData.prescriptionType.map((item)=>item.id).join(",");}else{prodAvailablePowerType="";}}
prodAdded={name:productData.fullName,id:productData.id,price:productData.prices[1].price,brand:productData.brandName,category:productData.type,variant:prodVariant,quantity:1,dimension21:"",dimension22:prodAvailablePowerType,};},addToCartLensPackage:function(packageName,powerType){var ga1={};ga1.linkName="web|order checkout|"+packageName+"|cart addition";ga1.linkPageName="web|"+ga.category+"|select lenses for "+powerType;ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.event="generic-link";dataLayer.push(ga1);prodAddedPackType=powerType;prodAddedPackName=packageName;},lensPackageClose:function(powerType){var ga1={};ga1.linkName="web|order checkout|select lenses for "+powerType+"|close";ga1.linkPageName="web|"+ga.category+"|select lenses for "+powerType;ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.event="generic-link";dataLayer.push(ga1);},addSkipCoating:function(action){var ga1={};ga1.linkName="web|order checkout|"+action;ga1.linkPageName="web|order checkout|add coating";ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.event="generic-link";dataLayer.push(ga1);prodAddedCoating=action;},prescriptionInfoModal:function(action){var ga1={};ga1.linkName="web|order checkout|power description|"+action;ga1.linkPageName="web|order checkout|add coating";ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.event="generic-link";dataLayer.push(ga1);},checkAvailability:function(pincodeValue,servicable){var ga1={};ga1.linkName="web|pdp page|check availability";ga1.linkPageName=ga.category;ga1.customerID=ga.customerID;ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.framesize=ga.framesize;ga1.frametype=ga.frametype;ga1.frameshape=ga.frameshape;ga1.brand=ga.brand;ga1.gender=ga.gender;ga1.price=ga.price;ga1.pincode=pincodeValue+" - "+servicable;ga1.event="generic-int-link";dataLayer.push(ga1);},selectLenses:function(powerType){var ga1={};ga1.event="product-description";ga1.pageName="web|"+ga.category+"|select lenses for "+powerType;delete ga.linkName;delete ga.linkPageName;ga1.channel="web|pdp page";ga1.subSection1="web|pdp page|"+ga.category;ga1.subSection2="web|pdp page|"+ga.category+"|select lenses for "+powerType;ga1.loginStatus=ga.loginStatus;ga1.customerID=ga.customerID;ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.framesize=ga.framesize;ga1.frametype=ga.frametype;ga1.frameshape=ga.frameshape;ga1.brand=ga.brand;ga1.gender=ga.gender;ga1.price=ga.price;dataLayer.push(ga1);},removeSelectLenses:function(powerType){var ga1={};ga1.linkName=ga.pageName+"-close";ga1.linkPageName=ga.pageName;ga1.channel="web|pdp page";ga1.subSection1="web|pdp page|"+ga.category;ga1.subSection2="web|pdp page|"+ga.category+"|select lenses for "+powerType;ga1.loginStatus=ga.loginStatus;ga1.customerID=ga.customerID;ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.framesize=ga.framesize;ga1.frametype=ga.frametype;ga1.frameshape=ga.frameshape;ga1.brand=ga.brand;ga1.gender=ga.gender;ga1.price=ga.price;ga1.event="generic-int-link";dataLayer.push(ga1);},writeReview:function(){var ga1={};ga1.pageName="web|"+ga.category+"|write a review";ga1.channel="web|pdp page";ga1.subSection1="web|pdp page|"+ga.category;ga1.subSection2="web|pdp page|"+ga.subcategory+"write review";ga1.loginStatus=ga.loginStatus;ga1.customerID=ga.customerID;ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.framesize=ga.framesize;ga1.frametype=ga.frametype;ga1.frameshape=ga.frameshape;ga1.brand=ga.brand;ga1.gender=ga.gender;ga1.price=ga.price;ga1.event="product-description";dataLayer.push(ga1);},writeReviewSubmit:function(rating){var ga1={};ga1.pageName="web|"+ga.category+"|review submitted";ga1.channel="web|pdp page";ga1.subSection1="web|pdp page|"+ga.category;ga1.subSection2="web|pdp page|"+ga.subcategory+"|review submitted";ga1.rating=rating;ga1.loginStatus=ga.loginStatus;ga1.customerID=ga.customerID;ga1.category=ga.category;ga1.subcategory=ga.subcategory;ga1.productID=ga.productID;ga1.framesize=ga.framesize;ga1.frametype=ga.frametype;ga1.frameshape=ga.frameshape;ga1.brand=ga.brand;ga1.gender=ga.gender;ga1.price=ga.price;ga1.event="product-description";dataLayer.push(ga1);},howDoILook:function(){var ga1={};ga1.linkPageName="web|"+ga.category+"|pdp page";ga1.linkName="web|"+ga.category+"|how do I look";ga1.category=ga.category;ga1.event="generic-int-link";dataLayer.push(ga1);},howDoILookShare:function(share){var ga1={};ga1.linkPageName="web|"+ga.category+"|share your looks";ga1.linkName="web|share your looks"+share;ga1.category=ga.category;ga1.event="generic-int-link";dataLayer.push(ga1);},nearByStore:function(refSuffix,ctaName,pincode){var ga1={};var pageNameRef=refSuffix?`web|book appointment at store|${refSuffix}`:ga.pageName;ga1.linkPageName=pageNameRef;ga1.linkName=`${pageNameRef}|${ctaName}`;ga1.event="generic-int-link";if(pincode)ga1.pincode=pincode;dataLayer.push(ga1);},nearByStoreDirections:function(){var ga1={};ga1.linkPageName="web|book appointment at store|booking confirmed";ga1.linkName="web|book appointment at store|booking confirmed|directions";ga1.event="generic-int-link";dataLayer.push(ga1);},newGa:function(eventName,dataObj){var ga1={...dataObj};ga1.event=eventName;dataLayer.push(ga1);},},},slideCart:{load:{},click:{cartSummary:function(cxid,productId,cartLenskartPrice,quanTityValue,productBrandValue,productTypeValue,productOptionValue,productPackageNameValue,productCoatingValue,addOn,status,frameTypeValue,subCategoryStr,productFrameSizeValue,productNameValue){ga2.pageName="web|cart summary page";ga2.channel="web|cart summary page";ga2.subSection1="web|cart summary page";ga2.loginStatus=ga.loginStatus;ga2.customerID=cxid;ga2.productID=productId;ga2.price=cartLenskartPrice;ga2.qty=quanTityValue;ga2.cat=productTypeValue;ga2.framesize=productFrameSizeValue;ga2.frametype=frameTypeValue;ga2.frameshape=ga.frameshape;ga2.brand=productBrandValue;ga2.gender=ga.gender;ga2.lensPackage=productOptionValue;ga2.subcategory=subCategoryStr;ga2.event="addtocart";dataLayer.push(ga2);window.dtm.LenskartRewamp.slideCart.click.ecommAddtoCart();},ecommAddtoCart:function(){var ga={};ga.event="addToCart";ga.userType=ga2.loginStatus;prodAddedCoating=prodAddedCoating.indexOf("coating applied")>=0?"Yes":"No";if(prodAdded.category==="Eyeglasses"||prodAdded.category==="eyeglasses"){}else{prodAddedPackType="";prodAddedPackName="";prodAddedCoating="";}
var prodDetail={...prodAdded,dimension23:prodAddedPackType,dimension24:prodAddedPackName,dimension25:prodAddedCoating};if(window.sessionStorage.isReOrderProduct==="ON")prodDetail={...prodAdded,dimension43:"re order"};ga.ecommerce={currencyCode:"INR",add:{products:[prodDetail]}};dataLayer.push(ga);},bogoOffer:function(pageNameValue){var ga3={};ga3.linkName="web|cart summary|add second pair";ga3.linkPageName=ga.pageName;ga3.customerID=ga.customerID;ga3.loginStatus=ga.loginStatus;ga3.event="generic-int-link";dataLayer.push(ga3);},removeItemProduct:function(data,pageName){var ga4={};ga4.event="generic-int-link";ga4.linkName="product remove";ga4.linkPageName="web|page"+pageName;ga4.productID=data.productId;dataLayer.push(ga4);window.dtm.LenskartRewamp.slideCart.click.ecommRemoveItemProduct(data);},ecommRemoveItemProduct:function(data){var ga5={};var coating="No";ga5.event="removeFromCart";ga5.userType=ga.loginStatus;var type=data.options[0]&&data.options[0].type?data.options[0].type:"";var name=data.options[0]&&data.options[0].name?data.options[0].name:"";if(data.options.length>=2)coating=data.options[1].type==="COATING"?"Yes":"No";var product=[{name:data.name,id:data.productId,price:data.price.value,brand:data.brandName,category:data.productType,variant:"",quantity:data.quantity,dimension21:"",dimension22:data.productType==="Eyeglasses"?"single_vision,bifocal,zero_power,frame_only":"",dimension23:type,dimension24:name,dimension25:coating,},];if(window.sessionStorage.isReOrderProduct==="ON")product=Object.assign({},...product,{dimension43:"re order"});ga5.ecommerce={remove:{products:product}};dataLayer.push(ga5);},incrementItemProduct:function(data){var incrementedProduct=dataLayer.filter((item)=>item.event==="cart-add").find((item)=>item.productID==data.productId);var ecommIncrementedProduct=dataLayer.filter((item)=>item.event==="addToCart").find((item)=>item.ecommerce.add.products[0].id==data.productId);if(incrementedProduct)dataLayer.push(incrementedProduct);if(ecommIncrementedProduct)dataLayer.push(ecommIncrementedProduct);},},},checkout:{load:{stepOne:function(cxid,cartProductIdsValue,lenskartPriceValue,quanTityIdValue,cartProductBrandValue,brandNameValue,genderValue,framesize,frameshape,lenstypeValue,discountValueApply,status,frameTypeValue){ga.pageName="web|order checkout|enter personal details";ga.channel="web|checkout step1";ga.subSection1="web|order checkout|enter personal details";ga.subSection2="web|order checkout|enter personal details";ga.loginStatus="guest";ga.customerID=cxid;ga.productID=cartProductIdsValue;ga.price=lenskartPriceValue;ga.qty=quanTityIdValue;ga.category=cartProductBrandValue;ga.framesize=framesize;ga.frametype=frameTypeValue;ga.frameshape=frameshape;ga.brand=brandNameValue;ga.gender=genderValue;ga.discountPrice=discountValueApply;ga.lensPackage=lenstypeValue;ga.actiontype="view";window.ga.site="webDesktop";ga.event="checkout";dataLayer.push(ga);},ecommCheckout:function(data,usertype,step){var ga1={};var coating="No";ga1.event=`checkout step ${step}`;ga1.userType=usertype;var prodincart=data&&data.map((item)=>{var packType="";var packName="";if(item.options&&item.options[0]&&item.options[0].type&&item.options[0].name){packType=item.options[0].type;packName=item.options[0].name;}
if(item.options.length>=2)coating=item.options[1].type==="COATING"?"Yes":"No";var prod={name:item.name,id:item.productId,price:item.price.value,brand:item.brandName,category:item.brandName==="LK Gold"?"Gold Membership":item.productType,variant:"",quantity:item.quantity,dimension21:"",dimension22:item.productType==="Eyeglasses"?"single_vision,bifocal,zero_power,frame_only":"",dimension23:packType,dimension24:packName,dimension25:coating,};if(window.sessionStorage.isReOrderProduct==="ON")prod={...prod,dimension43:"re order"};return prod;});ga1.ecommerce={checkout:{actionField:{step:step},products:prodincart}};dataLayer.push(ga1);},stepTwo:function(cxid,cartProductIdsValue,lenskartPriceValue,quanTityIdValue,cartProductBrandValue,brandNameValue,genderValue,framesize,frameshape,lenstypeValue,discountValueApply,status,frameTypeValue){ga.pageName="web|order checkout|enter shipping details";ga.channel="web|checkout step2";ga.subSection1="web|order checkout|enter shipping details";ga.subSection2="web|order checkout|enter shipping details - "+ga.loginStatus;ga.loginStatus=ga.loginStatus;ga.customerID=cxid;ga.productID=cartProductIdsValue;ga.price=lenskartPriceValue;ga.qty=quanTityIdValue;ga.category=cartProductBrandValue;ga.framesize=framesize;ga.frametype=frameTypeValue;ga.frameshape=frameshape;ga.brand=brandNameValue;ga.gender=genderValue;ga.discountPrice=discountValueApply;ga.lensPackage=lenstypeValue;ga.subcategory="not available";ga.actiontype="view";window.ga.site="webDesktop";ga.event="checkout";dataLayer.push(ga);sessionStorage.removeItem("eCommSuccessEventFired");sessionStorage.removeItem("eCommSuccessEventFiredV2");sessionStorage.removeItem("successEventFired");},placeOrderBtnClickSuccess:function(method){ga.linkPageName="web|order checkout|enter payment details";ga.linkName="web|order checkout|place order";ga.paymentMethod=method;ga.event="checkout";dataLayer.push(ga);},enterPaymentDetails:function(deliveryOption,method){ga.pageName="web|order checkout|enter payment details";ga.channel="web|checkout step3";ga.subSection1="web|order checkout|enter payment details";ga.subSection2="web|order checkout|enter payment details";ga.prescriptionMethod=method;ga.shippingSpeed=deliveryOption.toLowerCase();ga.event="checkout";dataLayer.push(ga);},ecommCheckoutStep3:function(data,usertype,step){var ga1={};var coating="No";ga1.event=`checkout step ${step}`;ga1.userType=usertype;var prodincart=data&&data.items.map((item)=>{var packType="";var packName="";if(item.options&&item.options[0]&&item.options[0].type&&item.options[0].name){packType=item.options[0].type;packName=item.options[0].name;}
if(item.options.length>=2)coating=item.options[1].type==="COATING"?"Yes":"No";var prod={name:item.name,id:item.productId,price:item.price.value,brand:item.brandName,category:item.productType,variant:"",quantity:item.quantity,dimension21:"",dimension22:item.productType==="Eyeglasses"?"single_vision,bifocal,zero_power,frame_only":"",dimension23:packType,dimension24:packName,dimension25:coating,};if(window.sessionStorage.isReOrderProduct==="ON")prod={...prod,dimension43:"re order"};return prod;});ga1.ecommerce={checkout:{actionField:{step:step},products:prodincart}};dataLayer.push(ga1);},loginPopupAccountNotFound:function(loginStatus){ga.pageName="web | order checkout | incorrect account";ga.channel="web | order checkout";ga.subSection1="web | order checkout | incorrect account";ga.subSection2="web | order checkout | incorrect account";ga.loginStatus=loginStatus;ga.event="vp-generic";dataLayer.push(ga);},loginPopupEnterPassword:function(loginStatus,data){ga.linkName="web|order checkout|login-"+loginStatus;ga.linkPageName="web|order checkout|enter personal details";ga.email=data.email;ga.mobileNumber=data.mobileNumber!==undefined&&data.mobileNumber!==null&&typeof window!=='undefined'&&typeof window.btoa!=='undefined'?window.btoa(data.mobileNumber):'';ga.loginStatus=loginStatus;ga.pageVersion="6Feb18";if(data.validBlock==="email"){ga.email=data.username;}else if(data.validBlock==="mobile"){ga.mobileNumber=data.username!==undefined&&data.username!==null&&typeof window!=='undefined'&&typeof window.btoa!=='undefined'?window.btoa(data.username):'';}
ga.event="generic-int-link";dataLayer.push(ga);},loginPopupEnterOtp:function(loginStatus,data){ga.linkName="web|order checkout|login-"+loginStatus;ga.linkPageName="web|order checkout|enter personal details";ga.email=data.email;ga.mobileNumber=data.phone!==undefined&&data.phone!==null&&typeof window!=='undefined'&&typeof window.btoa!=='undefined'?window.btoa(data.phone):'';ga.loginStatus=loginStatus;ga.pageVersion="6Feb18";if(data.validBlock==="email"){ga.email=data.username;}else if(data.validBlock==="mobile"){ga.mobileNumber=data.username!==undefined&&data.username!==null&&typeof window!=='undefined'&&typeof window.btoa!=='undefined'?window.btoa(data.username):'';}
ga.event="generic-int-link";dataLayer.push(ga);},checkoutProceedEmailNextStep:function(){if(ga.email){ga.pageName="web | order checkout | enter password";ga.subSection1="web | order checkout | enter password";ga.subSection2="web | order checkout | enter password";}
ga.pageName="web | order checkout | enter otp";ga.channel="web | order checkout";ga.subSection1="web | order checkout | enter otp";ga.subSection2="web | order checkout | enter otp";ga.event="vp-generic";dataLayer.push(ga);},loginPopupResendOtp:function(){ga.linkName="web|order checkout|resend otp";ga.linkPageName="web|order checkout|enter personal details";ga.pageVersion="6Feb18";ga.event="generic-int-link";dataLayer.push(ga);},loginForgotPassword:function(page){if(page==="account"){ga.linkName="web|account|forgot password";ga.linkPageName="web|account|login popup";}else{ga.linkName="web|order checkout|forgot password";ga.linkPageName="web|order checkout|enter personal details";}
ga.event="generic-int-link";dataLayer.push(ga);},editEmailPhoneCheckout:function(val){if(val==="email"){ga.linkName="web|order checkout|edit email";}else if(val==="mobile"){ga.linkName="web|order checkout|edit number";}
ga.linkPageName="web|order checkout|enter personal details";ga.event="generic-int-link";dataLayer.push(ga);},loginUser:function(){ga.linkName="web|order checkout|login-I have an account";ga.linkPageName="web|order checkout|enter details";ga.event="generic-int-link";dataLayer.push(ga);}},click:{checkoutBogoOffer:function(bogoOfferName){ga.linkName="web|enter personal details|add second pair";ga.linkPageName=bogoOfferName;ga.customerID=ga.customerID;ga.loginStatus=ga.loginStatus;ga.event="generic-int-link";dataLayer.push(ga);},removeProduct:function(prodcutId,currentPageName){ga.linkName="web|order checkout|product remove";ga.linkPageName=ga.pageName;ga.productID=prodcutId;ga.event="generic-int-link";dataLayer.push(ga);},guestStepTwo:function(login){ga.linkName="web|order checkout|sign in with facebook";ga.linkPageName="web|order checkout|enter personal details";ga.loginStatus=ga.loginStatus;ga.loginType=login;ga.event="generic-int-link";dataLayer.push(ga);},chooseShippingSpeed:function(pincode,savedAddress){ga.pageName="web|order checkout|choose shipping speed";ga.channel="web|checkout step2";ga.subSection1="web|order checkout|choose shipping speed";ga.subSection2="web|order checkout|choose shipping speed";ga.savedAddress=savedAddress;ga.pincode=pincode;ga.event="checkout";dataLayer.push(ga);},editShippingDetails:function(currentPageName){ga.linkName="web|order checkout|edit shipping details";ga.linkPageName="web|order checkout|"+currentPageName;ga.customerID=ga.customerID;ga.loginStatus=ga.loginStatus;ga.event="generic-int-link";dataLayer.push(ga);},editShippingSepped:function(currentPageName){ga.linkName="web|order checkout|edit shipping speed";ga.linkPageName=currentPageName+"edit shipping speed";ga.customerID=ga.customerID;ga.loginStatus=ga.loginStatus;ga.event="generic-int-link";dataLayer.push(ga);},selectPresscriptionMethod:function(){ga.pageName="web|order checkout|select prescription method";ga.channel="web|checkout step2";ga.subSection1="web|order checkout|select prescription method";ga.subSection2="web|order checkout|select prescription method";ga.event="checkout";dataLayer.push(ga);},giftVoucher:function(voucher,currentPageName){ga.linkName="web|enter payment details|gift voucher applied";ga.linkPageName=ga.pageName;ga.customerID=ga.customerID;ga.giftVoucher=voucher;ga.loginStatus=ga.loginStatus;ga.event="generic-int-link";dataLayer.push(ga);},},},retryPayment:{load:{retryPaymentOnLoad:function(data){ga.pageName="web|order checkout|retry payment";ga.channel="web|checkout step 3";ga.subSection1="web|order checkout|retry Payment Details";ga.subSection2="web|order checkout|retry Payment Details";ga.brand=data.brand;ga.category=data.category;ga.discountPrice=data.discountPrice;ga.frameshape=data.frameshape;ga.framesize=data.framesize;ga.frametype=data.frametype;ga.gender=data.gender;ga.pageType="retry payment";ga.price=data.price;ga.productID=data.productID;ga.purchaseID=data.orderId;ga.quantity=data.qty;ga.event="checkout";dataLayer.push(ga);},},},success:{load:{checkoutConfirm:function(data,name){if(!(sessionStorage.getItem("successEventFired")===name)){var ga={};ga.pageName="web|order checkout|order confirmation";ga.channel="web|order checkout";ga.subSection1="web|order checkout|order confirmation";ga.subSection2="web|order checkout|"+name;ga.category=data.category;ga.subcategory=data.subcategory;ga.productID=data.productID;ga.quantity=data.quantity;ga.purchaseID=data.orderId;ga.discountedAmount=data.discountedAmount;ga.discountedPercentage=data.discountedPercentage;ga.orderValue=data.orderValue;ga.shippingAmount=data.shippingAmount;ga.taxableAmount=data.taxableAmount;ga.paymentGateway=data.paymentGateway;ga.paymentMethod=data.paymentMethod;ga.paymentSubMethod=data.paymentSubMethod;ga.loginStatus=data.loginStatus;successLogin=data.loginStatus;ga.customerID=data.customerID;ga.crossSellProduct=data.crossSellProduct;ga.price=data.price;ga.qty=data.qty;ga.City=data.city;ga.pinCode=data.pinCode;ga.framesize=data.framesize;ga.frametype=data.frametype;ga.frameshape=data.frameshape;ga.brand=data.brand;ga.gender=data.gender;ga.pricerange=data.pricerange;ga.lenskartPrice=data.lenskartPrice;ga.discountPrice=data.discountPrice;ga.lensPackage=data.addon;ga.event="OrderSuccess";sessionStorage.setItem("successEventFired",name);dataLayer.push(ga);}},ecommOrderSuccess:function(orderDetails,pageType){if(!sessionStorage.getItem("eCommSuccessEventFired")){var ga1={};var coating="";var prodincart=orderDetails&&orderDetails.items.map((item)=>{var packType="";var packName="";if(item.options&&item.options[0]&&item.options[0].type&&item.options[0].name){packType=item.options[0].type;packName=item.options[0].name;}
if(item.options.length>=2)coating=item.options[1].type==="COATING"?"Yes":"No";var prod={name:item.name,id:item.productId,price:item.price.value,brand:item.brandName,category:item.productType,variant:"",quantity:item.quantity,dimension21:"",dimension22:item.productType==="Eyeglasses"?"single_vision,bifocal,zero_power,frame_only":"",dimension23:packType,dimension24:packName,dimension25:coating,};if(window.sessionStorage.isReOrderProduct==="ON")prod={...prod,dimension43:"re order"};return prod;});if(orderDetails.gokwikOrderDetails&&Object.keys(orderDetails.gokwikOrderDetails).length>0){ga1.gokwikOrderType=orderDetails.gokwikOrderDetails.orderType==='cod'?'cod':'non-gk';}else if(orderDetails&&orderDetails.lkCountry==='IN'){ga1.gokwikOrderType='non-gk';}
if(orderDetails.gokwikRtoDetails&&Object.keys(orderDetails.gokwikRtoDetails).length>0){ga1.riskFlag=orderDetails.gokwikRtoDetails.riskFlag;}
ga1.event="purchaseSuccess";ga1.userType=orderDetails.guest?"guest":"loggedIn";ga1.PaymentMode=orderDetails.payments.paymentList[0].method;ga1.voucherApplied=orderDetails.amount.discounts.length>0&&orderDetails.amount.discounts[0].type==="gv"?"Yes":"No";ga1.coatingApplied=coating;ga1.powerTypePrescriptionStatus="";var storeCredit=0;var couponCategory=[];var mallId=0;var mallLeadSource='';if(orderDetails.amount.discounts&&orderDetails.amount.discounts.length>0){couponCategory=orderDetails.amount.discounts.map(discount=>discount.type);couponCategory=couponCategory.join(',');var sc=orderDetails.amount.discounts.find(discount=>discount.type==="sc");if(sc!==null&&sc!==undefined){storeCredit=sc.amount;}}
if(orderDetails.metadata.mall!==null&&orderDetails.metadata.mall!==undefined){var mall=orderDetails.metadata.mall.split('|');mallId=mall[0];mallLeadSource=mall[1];}
var orderid=orderDetails.transactionId.length>0?orderDetails.transactionId:orderDetails.id;var couponApplied=orderDetails.amount.discounts.length>0&&orderDetails.amount.discounts[0].type==="gv"?orderDetails.amount.discounts[0].code:"";var action_field={id:orderid,affiliation:"",revenue:orderDetails.amount.total+storeCredit,tax:orderDetails.amount.totalTax,shipping:orderDetails.amount.shipping,coupon:couponApplied};if(window.sessionStorage.isReOrderProduct==="ON")action_field={...action_field,dimension43:"re order"};ga1.ecommerce={purchase:{actionField:action_field,products:prodincart}};ga1.mall_id=mallId;ga1.mall_lead_source=mallLeadSource;ga1.coupon_category=couponCategory;sessionStorage.setItem("eCommSuccessEventFired","Yes");dataLayer.push(ga1);}},ecommOrderSuccessV2:function(orderDetails){if(!sessionStorage.getItem("eCommSuccessEventFiredV2")){var ga7={};var coating="";var prodincart=orderDetails&&orderDetails.items.map((item)=>{var packType="";var packName="";if(item.options&&item.options[0]&&item.options[0].type&&item.options[0].name){packType=item.options[0].type;packName=item.options[0].name;}
if(item.options.length>=2)coating=item.options[1].type==="COATING"?"Yes":"No";var prod={name:item.name,id:item.productId,price:item.price.value,brand:item.brandName,category:item.productType,variant:"",quantity:item.quantity,dimension21:"",dimension22:item.productType==="Eyeglasses"?"single_vision,bifocal,zero_power,frame_only":"",dimension23:packType,dimension24:packName,dimension25:coating,};if(window.sessionStorage.isReOrderProduct==="ON")prod={...prod,dimension43:"re order"};return prod;});ga7.event="purchaseSuccessV2";ga7.userType=orderDetails.guest?"guest":"loggedIn";ga7.PaymentMode=orderDetails.payments.paymentList[0].method;ga7.voucherApplied=orderDetails.amount.discounts.length>0&&orderDetails.amount.discounts[0].type==="gv"?"Yes":"No";ga7.coatingApplied=coating;ga7.powerTypePrescriptionStatus="";var storeCredit=0;var couponCategory=[];var mallId=0;var mallLeadSource='';if(orderDetails.amount.discounts&&orderDetails.amount.discounts.length>0){couponCategory=orderDetails.amount.discounts.map(discount=>discount.type);couponCategory=couponCategory.join(',');var sc=orderDetails.amount.discounts.find(discount=>discount.type==="sc");if(sc!==null&&sc!==undefined){storeCredit=sc.amount;}}
if(orderDetails.metadata.mall!==null&&orderDetails.metadata.mall!==undefined){var mall=orderDetails.metadata.mall.split('|');mallId=mall[0];mallLeadSource=mall[1];}
var orderid=orderDetails.transactionId.length>0?orderDetails.transactionId:orderDetails.id;var couponApplied=orderDetails.amount.discounts.length>0&&orderDetails.amount.discounts[0].type==="gv"?orderDetails.amount.discounts[0].code:"";var action_field={id:orderid,affiliation:"",revenue:orderDetails.amount.total+storeCredit,tax:orderDetails.amount.totalTax,shipping:orderDetails.amount.shipping,coupon:couponApplied};if(window.sessionStorage.isReOrderProduct==="ON")action_field={...action_field,dimension43:"re order"};ga7.ecommerce={purchase:{actionField:action_field,products:prodincart}};ga7.mall_id=mallId;ga7.mall_lead_source=mallLeadSource;ga7.coupon_category=couponCategory;sessionStorage.setItem("eCommSuccessEventFiredV2","Yes");dataLayer.push(ga7);}},orderFailed:function(data){var ga={};ga.pageName="web|order checkout|order failure ";ga.channel="web|order checkout";ga.subSection1="web|order checkout|order failure";ga.category=data.category;ga.productID=data.productID;ga.quantity=data.quantity;ga.purchaseID="";ga.potentialRevenueLoss=data.orderValue;ga.paymentGateway=data.paymentGateway;ga.paymentMethod=data.paymentMethod;ga.paymentSubMethod=data.paymentSubMethod;ga.loginStatus=data.loginStatus;ga.customerID=data.customerID;ga.price=data.price;ga.qty=data.qty;ga.City=data.city;ga.pinCode=data.pinCode;ga.framesize=data.framesize;ga.frametype=data.frametype;ga.frameshape=data.frameshape;ga.brand=data.brand;ga.gender=data.gender;ga.pricerange=data.pricerange;ga.lenskartPrice=data.lenskartPrice;ga.discountPrice=data.discountPrice;ga.lensPackage=data.lensPackage;ga.event="checkout";dataLayer.push(ga);},prescriptionSaved:function(productID,purchaseID,category,quantity,lkPrice,discPrice,lensPackage){var ga={};ga.pageName="web|order checkout|prescription successfully saved ";ga.channel="web|order checkout";ga.subSection1="web|order checkout|prescription successfully saved ";ga.subSection2="web|order checkout|prescription successfully saved ";ga.category=category;ga.productID=productID;ga.quantity=quantity;ga.purchaseID=purchaseID;ga.lenskartPrice=lkPrice;ga.discountPrice=discPrice;ga.lensPackage=lensPackage;ga.event="OrderSuccess";dataLayer.push(ga);},prescriptionSuccess:function(name){var ga={};ga.pageName="web|order checkout|"+name+" prescription success";ga.channel="web|order checkout";ga.subSection1="web|order checkout|"+name+" prescription success";ga.subSection2="web|order checkout|"+name+" prescription success";ga.event="OrderSuccess";dataLayer.push(ga);},},click:{updatePrescription:function(name,method){var ga={};ga.pageName="web|order checkout|"+name+" prescription";ga.channel="web|order checkout";ga.prescriptionMethod=method;ga.subSection1="web|order checkout|"+name+" prescription";ga.subSection2="web|order checkout|"+name+" prescription";ga.event="OrderSuccess";dataLayer.push(ga);},},},footer:{load:{},click:{followus:function(pagename,splatform,status){ga.linkPageName=pagename=="cat"?"category":"Product";ga.linkName="web|footer|follow-"+splatform;ga.loginStatus=ga.loginStatus;clickEvent="event41";ga.event="generic-ext-link";dataLayer.push(ga);},footerList:function(pagename,splatform,status){ga.linkPageName=pagename=="cat"?"category":"Product";ga.linkName="web|footer|"+splatform.key;ga.loginStatus=ga.loginStatus;clickEvent="event41";ga.event="generic-ext-link";dataLayer.push(ga);},eyeSunContact:function(pagename,status,category,subcategory){ga.linkPageName=ga.pageName;ga.linkName="web|footer|"+category+"|"+subcategory.key;clickEvent="event41";ga.event="generic-ext-link";dataLayer.push(ga);},},},loginPopup:{load:{loginPopupSignUp:function(){delete ga.linkName;delete ga.linkPageName;ga.pageName="web|account|login popup";ga.channel="web|account";ga.subSection1="web|account|login popup - signup";ga.subSection2="web|account|login popup";ga.loginStatus="guest";ga.pageVersion="6Feb18";ga.event="vp-generic";dataLayer.push(ga);},loginPopupSignIn:function(){delete ga.linkName;delete ga.linkPageName;ga.pageName="web|account|login popup";ga.channel="web|account";ga.subSection1="web|account|login popup - signin";ga.subSection2="web|account|login popup";ga.loginStatus="guest";ga.pageVersion="6Feb18";ga.event="vp-generic";dataLayer.push(ga);},loginPopupAccountNotFound:function(){ga.pageName="web|account|incorrect account";ga.channel="web|account";ga.subSection1="web|account|incorrect account";ga.subSection2="web|account|incorrect account";ga.event="vp-generic";dataLayer.push(ga);},loginPopupEnterPassword:function(email){delete ga.linkName;delete ga.linkPageName;ga.pageName="web|account|login popup|enter password";ga.channel="web|account";ga.subSection1="web|account|login popup";ga.subSection2="web|account|login popup|enter password";ga.email=email;delete ga.mobileNumber;ga.event="vp-generic";dataLayer.push(ga);},loginPopupEnterOtp:function(phone){delete ga.linkName;delete ga.linkPageName;ga.pageName="web|account|login popup|enter otp";ga.channel="web|account";ga.subSection1="web|account|login popup";ga.subSection2="web|account|login popup|enter otp";ga.mobileNumber=phone!==undefined&&phone!==null&&typeof window!=='undefined'&&typeof window.btoa!=='undefined'?window.btoa(phone):'';delete ga.email;ga.event="vp-generic";dataLayer.push(ga);},loginPopupEditEmailNumber:function(data){if(data==="email"){ga.linkName="web|account|sigin popup-edit email";}else if(data==="phone"){ga.linkName="web|account|sigin popup-edit number";}
ga.linkPageName="web | account | login popup";ga.event="generic-int-link";dataLayer.push(ga);},loginPopupResendOtp:function(phone){ga.linkName="web|account|login popup|resend otp";ga.linkPageName="web|account| signin popup| login popup";ga.mobileNumber=phone!==undefined&&phone!==null&&typeof window!=='undefined'&&typeof window.btoa!=='undefined'?window.btoa(phone):'';delete ga.pageName;delete ga.channel;delete ga.subSection1;delete ga.subSection2;ga.event="generic-int-link";dataLayer.push(ga);},loginPopupSignUpConfirm:function(){delete ga.linkName;delete ga.linkPageName;ga.pageName="web|my account|customer signup popup|register success";ga.channel="web|my account";ga.subSection1="web|my account|customer signup popup|register success";ga.loginStatus="registered";ga.event="vp-generic";ga.ctaName="registration successful";dataLayer.push(ga);},socialLogin:function(type,statusMessage){ga.linkName="web|account|"+statusMessage;ga.linkPageName="web|account|login popup";delete ga.pageName;delete ga.channel;delete ga.subSection1;delete ga.subSection2;delete ga.mobileNumber;delete ga.email;ga.event="generic-int-link";dataLayer.push(ga);},},click:{},},loginSuccess:{success:function(){ga.ctaName='login Successful';dataLayer.push(ga);}},searchpage:{click:{searchSuggestion:function(value,count){ga.pageName="web|internal search|search results page";ga.channel="web|internal search";ga.subSection1=ga.subSection1;ga.subSection2=ga.subSection2;ga.searchResultCount=count;ga.searchKeyword=value;ga.searchSuggestionKeyword=value;ga.productFindingMethod="internal search";ga.event="search_click";ga.searchTerm=value;dataLayer.push(ga);},},},ditto:{load:{compareLooks:{triggerDTM:function(){ga.pageName="web|ditto|try in 3d";ga.channel="web|ditto";ga.subSection1="web|ditto|try in 3d";ga.subSection2="web|ditto|try in 3d|"+sessionStorage.getItem("previousChannel");ga.event="vp-generic";dataLayer.push(ga);},},},click:{listing:{triggerDTM:function(category){ga.linkPageName="web|"+category+"|listing page";ga.linkName="web|"+category+"|listing page|3d try on";ga.category=category;ga.event="generic-int-link";dataLayer.push(ga);},},pdp:{triggerDTM:function(category,subCategory,productId,linkNameSuffix){ga.linkPageName="web|"+category+"|pdp page";ga.linkName="web|"+category+"|pdp page|"+linkNameSuffix;ga.category=category;ga.subcategory=category+"|"+subCategory;ga.productID=productId;ga.event="generic-int-link";dataLayer.push(ga);},},startDitto:{triggerDTM:function(startTime){ga.pageName="web|ditto|start recording";ga.channel="web|ditto";ga.subSection1="web|ditto|start recording";ga.subSection2="web|ditto|start recording|"+sessionStorage.getItem("previousChannel");ga.starttime=startTime;ga.event="vp-generic";ga.ctaName="ditto initiate";dataLayer.push(ga);},},},dittoSuccess:function(endTime,endLocalTimeString){ga.pageName="web|ditto|successfully created";ga.channel="web|ditto";ga.subSection1="web|ditto|successfully created";ga.subSection2="web|ditto|successfully created|"+sessionStorage.getItem("previousChannel");ga.endtime=endLocalTimeString;ga.difftime=Math.abs(endTime-ga.starttime)/1e3;ga.threedRenderStatus="success";ga.event="vp-generic";ga.ctaName="ditto finished";dataLayer.push(ga);},},reviews:{load:{customerReviews:function(){ga.pageName="web|review and rating|customer reviews";ga.channel="web|review and rating";ga.subSection1="web|review and rating|customer reviews";ga.subSection2="web|review and rating|customer reviews";ga.event="vp-generic";dataLayer.push(ga);},},},instaGallery:{load:{instagram:function(){ga.pageName="web|explore|instagram";ga.channel="web|explore";ga.subSection1="web|explore|instagram";ga.subSection2="web|explore|instagram";ga.event="vp-generic";dataLayer.push(ga);},},click:{exploreGallery:function(page,pageType,headerText){ga.linkpageName="web|"+page+"|"+pageType;ga.linkName="web|"+page+"|"+headerText+"|explore more";ga.event="generic-int-link";dataLayer.push(ga);},},},myaccount:{recent:function(obj){ga.linkPageName="web|my account|account dashboard|recent orders";ga.linkName="my account|account dashboard|recent orders|".obj.context.innerText;},OnClick:function(obj){ga.linkPageName=obj.linkPageName;ga.linkName=obj.linkName;ga.orderStatus=obj.orderStatus;ga.orderValue=obj.orderValue;ga.orderID=obj.orderID;ga.clickEvent=obj.clickEvent;ga.giftVoucherCode=obj.giftVoucherCode;if(obj.satellite!==undefined){ga.event=obj.satellite;dataLayer.push(ga);}},OnLoad:function(obj){ga.pageName="web|my account|"+obj.pagename;ga.channel="web|my account";if(obj.hierarchy1)ga.hierarchy1="my account|"+obj.hierarchy;ga.subSection1="web|my account|"+obj.subSection1;ga.applicationName=obj.applicationName;ga.formName=obj.formName;ga.pageEvent=obj.pageEvent;ga.errorCode=obj.errorCode;ga.loginStatus="registered";if(obj.satellite!==undefined){ga.event=obj.satellite;dataLayer.push(ga);}},ecommproductBuyAgain:function(productData,lenskartPrice,loginStatus,eventName){let prodVariant;let prodGender;if(productData.classification==="contact_lens"){prodVariant=productData.productType;}else{prodVariant=productData.collection||productData.productType;prodGender=productData.gender;}
prodVariant=prodVariant?prodVariant:"";prodGender=prodGender?prodGender:"Unisex";let prodType="";const sku=productData.sku||"";if(sku.indexOf("eye:")>-1)prodType="Eyeglasses";else if(sku.indexOf("sun:")>-1)prodType="Sunglasses";else if(sku.indexOf("contact:")>-1)prodType="Contact Lens";else if(sku.indexOf("watch:")>-1)prodType="Accessories";else prodType="Others";var prodDetail=[{name:productData.name,id:productData.id,price:lenskartPrice,brand:productData.brandName,category:prodType,variant:prodVariant,dimension21:null,dimension43:"re order"}];var ecommDataLayerData={event:eventName,userType:loginStatus,ecommerce:{detail:{actionField:prodGender,products:prodDetail}}};dataLayer.push(ecommDataLayerData);},postDispatchCancelClick:function(obj){dataLayer.push(Object.assign(obj,{event:"cta_click"}));},reOrderAndDetailClick:function(dtmObj){dataLayer.push({event:"cta_click",ctaname:dtmObj.ctaname,channel:dtmObj.channel});},myOrderStatusEventsClick:function(listing,ctaName){let pname=listing?'order listing':'order details';let ctaname=`${pname}|${ctaName}`;dataLayer.push({'event':'cta_click',ctaname,pname});}},},};})();function getCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
function fetchSessionId(){if(document.cookie.search("omniSession")!=-1){ga.sessionID=getCookie("omniSession");}else{ga.sessionID=Math.random().toString(34).substring(2);var date=new Date();date.setTime(date.getTime()+60*24*60*60*1e3);var expires="; expires="+date.toGMTString();document.cookie="omniSession="+ga.sessionID+expires;}}