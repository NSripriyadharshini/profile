((self||this)["webpackJsonp@sprinklr/chat-web-client"]=(self||this)["webpackJsonp@sprinklr/chat-web-client"]||[]).push([[66],{1006:function(e,t,n){"use strict";var a=n(315),c=n(470),r=n.n(c),o=n(11),i=n.n(o),s=n(36),u=n.n(s),l=n(96),d=n.n(l),b=n(439),O=n.n(b),j=n(684),p=n.n(j),f=n(787),h=n.n(f),g=n(765),m=n.n(g),v=n(345),y=n.n(v),C=n(343),I=n(1263),E=n(374);t.a=(e,t={getValue:y.a,defaultValue:!0,logOnFailure:!1,logOnSuccess:!1,subscribe:y.a})=>{const n=Object(a.useRef)(!1);n.current=i()(e);const{getValue:c,defaultValue:o,logOnFailure:s,logOnSuccess:l,subscribe:b}=t,[j,f]=Object(a.useState)(0),g=Object(a.useRef)([void 0]),v=Object(a.useRef)(null);Object(a.useEffect)(()=>()=>{v.current&&d()(v.current,e=>e&&e.clear())},[]),v.current=Object(a.useMemo)(()=>u()(e)?null:(v.current&&d()(v.current,e=>e&&e.clear()),g.current=n.current?p()(h()(e),m()(void 0)):[],d()(O()(e),(e,t)=>{if(u()(e))return null;const n=e=>{g.current[t]=C.a.getField(e),f(e=>e+1)};return I.a.createFilterAction(e,{subscribe:(e,t)=>b(e,r()(n,e),t),getFilterBuilder:I.a.createFilterAction})})),[e,c,b,f]);const T=Object(a.useMemo)(()=>v.current?d()(v.current,(e,t)=>e?(Object(E.a)(`--- Filter ${t} match start ---`,Date.now()),e.matches(c(),{logOnFailure:s,logOnSuccess:l})):o):[o],[e,c,o,j]);return Object(a.useMemo)(()=>n.current?d()(T,(e,t)=>({hasPassed:e,changeSource:g.current[t]})):{hasPassed:T[0],changeSource:g.current[0]},[T,g.current])}},1009:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(315),c=n.n(a),r=n(388),o=n.n(r),i=n(392),s=n.n(i),u=n(787),l=n.n(u),d=n(552),b=n(316);const O=c.a.createContext({}),j=Object(a.memo)(e=>{const{getValue:t,subscribe:n}=Object(d.a)(),c=t(),[r,i]=Object(a.useState)(()=>({pagesMetaData:{[c]:[{startTime:Date.now(),endTime:void 0}]},currentPageUrl:c}));return Object(a.useEffect)(()=>{const e=n("page-context-subscriber",({currentUrl:e,previousUrl:t})=>{i(n=>(({prevPageContextValue:e,previousUrl:t,currentUrl:n})=>{const a=Date.now(),c=e.pagesMetaData,r=s()(o()(c[t]),{endTime:{$set:a}});return s()(e,{pagesMetaData:{[t]:{$splice:[[l()(c[t])-1,1,r]]},[n]:{$set:[...c[n]||[],{startTime:a,endTime:void 0}]}},currentPageUrl:{$set:n}})})({prevPageContextValue:n,previousUrl:t,currentUrl:e}))});return()=>{e()}},[]),Object(b.jsx)(O.Provider,{value:r},e.children)});t.b=O},1010:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(315);t.useFirstMountState=function(){var e=a.useRef(!0);return e.current?(e.current=!1,!0):e.current}},1011:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(323);var a=n(315),c=n.n(a),r=n(345),o=n.n(r),i=n(316);const s=c.a.createContext({notification:void 0,setNotification:o.a}),u=e=>{const[t,n]=Object(a.useState)(void 0),c=Object(a.useMemo)(()=>({notification:t,setNotification:n}),[t,n]);return Object(i.jsx)(s.Provider,{value:c},e.children)};t.b=s},1016:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(9);function c(){return Object(a.w)()}},1017:function(e,t,n){var a={"./classic/pages":[1755,12,77],"./modern/pages":[1756,1,12,78]};function c(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],c=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(c)}))}c.keys=function(){return Object.keys(a)},c.id=1017,e.exports=c},1018:function(e,t,n){"use strict";var a=n(1019),c=n.n(a),r={},o=0,i=function(e,t){var n=""+t.end+t.strict+t.sensitive,a=r[n]||(r[n]={});if(a[e])return a[e];var i=[],s={re:c()(e,i,t),keys:i};return o<1e4&&(a[e]=s,o++),s};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"===typeof t&&(t={path:t});var a=t,c=a.path,r=a.exact,o=void 0!==r&&r,s=a.strict,u=void 0!==s&&s,l=a.sensitive,d=void 0!==l&&l;if(null==c)return n;var b=i(c,{end:o,strict:u,sensitive:d}),O=b.re,j=b.keys,p=O.exec(e);if(!p)return null;var f=p[0],h=p.slice(1),g=e===f;return o&&!g?null:{path:c,url:"/"===c&&""===f?"/":f,isExact:g,params:j.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}},1019:function(e,t,n){var a=n(1422);e.exports=O,e.exports.parse=r,e.exports.compile=function(e,t){return i(r(e,t),t)},e.exports.tokensToFunction=i,e.exports.tokensToRegExp=b;var c=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function r(e,t){for(var n,a=[],r=0,o=0,i="",l=t&&t.delimiter||"/";null!=(n=c.exec(e));){var d=n[0],b=n[1],O=n.index;if(i+=e.slice(o,O),o=O+d.length,b)i+=b[1];else{var j=e[o],p=n[2],f=n[3],h=n[4],g=n[5],m=n[6],v=n[7];i&&(a.push(i),i="");var y=null!=p&&null!=j&&j!==p,C="+"===m||"*"===m,I="?"===m||"*"===m,E=n[2]||l,T=h||g;a.push({name:f||r++,prefix:p||"",delimiter:E,optional:I,repeat:C,partial:y,asterisk:!!v,pattern:T?u(T):v?".*":"[^"+s(E)+"]+?"})}}return o<e.length&&(i+=e.substr(o)),i&&a.push(i),a}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function i(e,t){for(var n=new Array(e.length),c=0;c<e.length;c++)"object"===typeof e[c]&&(n[c]=new RegExp("^(?:"+e[c].pattern+")$",d(t)));return function(t,c){for(var r="",i=t||{},s=(c||{}).pretty?o:encodeURIComponent,u=0;u<e.length;u++){var l=e[u];if("string"!==typeof l){var d,b=i[l.name];if(null==b){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(a(b)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(b)+"`");if(0===b.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var O=0;O<b.length;O++){if(d=s(b[O]),!n[u].test(d))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(d)+"`");r+=(0===O?l.prefix:l.delimiter)+d}}else{if(d=l.asterisk?encodeURI(b).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(b),!n[u].test(d))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+d+'"');r+=l.prefix+d}}else r+=l}return r}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function d(e){return e&&e.sensitive?"":"i"}function b(e,t,n){a(t)||(n=t||n,t=[]);for(var c=(n=n||{}).strict,r=!1!==n.end,o="",i=0;i<e.length;i++){var u=e[i];if("string"===typeof u)o+=s(u);else{var b=s(u.prefix),O="(?:"+u.pattern+")";t.push(u),u.repeat&&(O+="(?:"+b+O+")*"),o+=O=u.optional?u.partial?b+"("+O+")?":"(?:"+b+"("+O+"))?":b+"("+O+")"}}var j=s(n.delimiter||"/"),p=o.slice(-j.length)===j;return c||(o=(p?o.slice(0,-j.length):o)+"(?:"+j+"(?=$))?"),o+=r?"$":c&&p?"":"(?="+j+"|$)",l(new RegExp("^"+o,d(n)),t)}function O(e,t,n){return a(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var a=0;a<n.length;a++)t.push({name:a,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):a(e)?function(e,t,n){for(var a=[],c=0;c<e.length;c++)a.push(O(e[c],t,n).source);return l(new RegExp("(?:"+a.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return b(r(e,n),t,n)}(e,t,n)}},1020:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var a=n(468),c=n(969),r=n(970);n(972);function o(e,t,n,r){var o;"string"===typeof e?(o=function(e){var t=e||"/",n="",a="",c=t.indexOf("#");-1!==c&&(a=t.substr(c),t=t.substr(0,c));var r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===a?"":a}}(e)).state=t:(void 0===(o=Object(a.a)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(i){throw i instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):i}return n&&(o.key=n),r?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=Object(c.default)(o.pathname,r.pathname)):o.pathname=r.pathname:o.pathname||(o.pathname="/"),o}function i(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(r.default)(e.state,t.state)}"undefined"===typeof window||!window.document||window.document.createElement},1021:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(315),c=n.n(a),r=n(345),o=n.n(r),i=n(789),s=n(316);const u={debug:o.a,info:o.a,error:o.a,warning:o.a,cleanup:o.a},l=c.a.createContext(u),d=({videoConversationId:e,conversationId:t,isAudioCall:n,children:a})=>{const c=Object(i.a)({videoConversationId:e,conversationId:t,isAudioCall:n});return Object(s.jsx)(l.Provider,{value:c},a)}},1022:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(315),c=n.n(a),r=n(345),o=n.n(r),i=n(450),s=n.n(i),u=n(350),l=n.n(u),d=n(411),b=n(316);const O=c.a.createContext({addPublisher:o.a,removePublisher:o.a});let j=!1;t.b=c.a.memo(({onClick:e,children:t})=>{const n=Object(a.useRef)([]),c=Object(a.useCallback)(()=>{j=!0,e(),n.current&&(l()(n.current,e=>{e.removeEventListener("click",c,{capture:!0})}),n.current=[])},[e]),r=Object(a.useMemo)(()=>({addPublisher:e=>{j||(n.current.push(e),e.addEventListener("click",c,{capture:!0}))},removePublisher:e=>{j||(e.removeEventListener("click",c,{capture:!0}),n.current=s()(n.current,t=>t!==e))}}),[c]);return Object(a.useEffect)(()=>{const e=Object(d.a)();if(Object(d.b)(e))return r.addPublisher(e.document),()=>{r.removePublisher(e.document)}},[]),Object(b.jsx)(O.Provider,{value:r},t)})},1023:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(453).__importDefault(n(1424)).default("audio");t.default=a},1024:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(315),c=n.n(a),r=n(345),o=n.n(r),i=n(1025),s=n(316);const u={debug:o.a,info:o.a,error:o.a,warning:o.a},l=c.a.createContext(u),d=({videoConversationId:e,conversationId:t,children:n})=>{const a=Object(i.a)({videoConversationId:e,conversationId:t});return Object(s.jsx)(l.Provider,{value:a},n)}},1025:function(e,t,n){"use strict";var a=n(315),c=n(320),r=n(376),o=n(526),i=n(336),s=n(365),u=n(383),l=n(790);const d=(new r.a).setUrl("/video-chat/conversation/log/event").setType(u.a.POST).build();t.a=({videoConversationId:e,conversationId:t})=>{const[n]=Object(o.a)(d,{ignoreResults:!0}),r=Object(c.d)(i.h),u=Object(s.d)(r),b=Object(a.useCallback)(t=>{const{eventType:n,activityAdditionalDetails:a}=t;return{videoConversationId:e,loggerSnUserId:u,eventType:n,loggerSnType:"SPRINKLR_LIVE_CHAT",offsetTime:0,activityAdditionalDetails:a}},[t,e,u]);return Object(a.useMemo)(()=>new l.a(n,{adapter:b,skip:!e}),[n,b,e])}},1029:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(159),c=n.n(a),r=n(387);const o=c()(async e=>{const t=(await r.a.get(e)).data;return(new DOMParser).parseFromString(t,"image/svg+xml")})},1030:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(315);const c=Object(a.createContext)({setIsFrameMaximized:()=>null,isFrameMaximized:!1})},1031:function(e,t,n){"use strict";var a=n(315),c=n.n(a),r=n(345),o=n.n(r);const i=c.a.createContext({setVisibleModal:o.a});t.a=i},1039:function(e,t,n){"use strict";t.a={PDF:"PDF",EXCEL:"EXCEL",DOCUMENT:"DOCUMENT",WORD_DOCUMENT:"DOC",PRESENTATION:"PRESENTATION",ONENOTE:"ONENOTE"}},1040:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a="@chatPrompt/PROMPT_ACTION_TRIGGER"},1041:function(e,t,n){var a=n(102),c=n(1440),r=n(99),o=n(608),i=n(1441),s=n(388),u=o((function(e){var t=s(e),n=a(e,i);return t===s(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?c(n,r(t,2)):[]}));e.exports=u},1042:function(e,t,n){var a=n(102),c=n(99),r=n(998),o=n(760);e.exports=function(e,t){if(null==e)return{};var n=a(o(e),(function(e){return[e]}));return t=c(t),r(e,n,(function(e,n){return t(e,n[0])}))}},1273:function(e,t,n){"use strict";var a,c=n(315),r=n.n(c),o=(n(355),n(319)),i=n(317);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const u=({svgRef:e,title:t,...n})=>r.a.createElement("svg",s({"data-spaceweb":"icon",viewBox:"0 0 14 14","data-icon-name":"SolidCobrowsing",className:"sw--bx sw--by sw--mw sw--mx",ref:e},n),t?r.a.createElement("title",null,t):null,a||(a=r.a.createElement("path",{d:"M12.752 0H1.248A1.328 1.328 0 00.024 1.416v8.66a1.328 1.328 0 001.224 1.416h11.504a1.328 1.328 0 001.224-1.416v-8.66A1.328 1.328 0 0012.752 0zM5.648 5.19a.362.362 0 01-.11-.263c0-.005-.006-.01-.006-.015v-.525h-1.05a.896.896 0 00-.895.895v.928a.889.889 0 00.262.633.918.918 0 00.632.263.5.5 0 010 1 1.914 1.914 0 01-1.34-.556 1.882 1.882 0 01-.554-1.34v-.928A1.896 1.896 0 014.48 3.387h1.051v-.52c0-.005.006-.01.006-.016a.343.343 0 01.11-.268.361.361 0 01.517.01l.996 1.038c.005.01.015.016.02.027a.369.369 0 01.08.179.2.2 0 010 .079.34.34 0 01-.095.221v.005H7.16L6.165 5.18a.361.361 0 01-.517.01zm5.765 1.02A1.897 1.897 0 019.52 8.106h-.88v.519c0 .005-.005.01-.005.016a.343.343 0 01-.111.268.361.361 0 01-.516-.01l-.996-1.038c-.005-.01-.016-.016-.021-.026a.369.369 0 01-.08-.18.2.2 0 010-.079.34.34 0 01.096-.22V7.35h.005l.996-1.038a.364.364 0 01.627.253c0 .005.005.01.005.016v.525h.879a.896.896 0 00.894-.896v-.928a.891.891 0 00-.263-.634.918.918 0 00-.631-.26.5.5 0 010-1 1.914 1.914 0 011.34.554 1.885 1.885 0 01.554 1.34zM10.3 12.584H3.597a.7.7 0 000 1.4H10.3a.7.7 0 100-1.4z"}))),l=r.a.forwardRef((e,t)=>r.a.createElement(u,s({svgRef:t},e)));n.p;const d=Object(i.a)(l,{target:"e1s9shjt0"})({name:"1utgq19",styles:"width:48px;height:48px;margin-bottom:18px;"});var b=n(1282),O=n(690),j=n(342),p=n(316);var f={name:"19cy8uy",styles:"max-width:218px;"};var h=r.a.memo(Object(o.injectIntl)(e=>{const{onStopSession:t,brandUser:n,intl:a}=e,r=Object(c.useMemo)(()=>({agentName:j.a.getName(n)}),[n]),o=Object(c.useMemo)(()=>a.formatMessage(O.a.settingUpCobrowsing,r),[r,a]),i=Object(c.useMemo)(()=>f,[]);return Object(p.jsx)(b.a,{onClose:t,Icon:d,description:o,descriptionStyles:i})})),g=n(524);t.a=e=>{const{sessionState:t}=e;return t!==g.b.INITIATED&&t!==g.b.SETUP&&t!==g.b.RESUMED?null:Object(p.jsx)(h,e)}},1277:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var a=n(315),c=n.n(a),r=n(36),o=n.n(r),i=n(350),s=n.n(i),u=n(417),l=n.n(u),d=n(345),b=n.n(d),O=n(320),j=n(436),p=n(375);var f=()=>e=>{const t={eventId:e.label,eventType:e.action.id,additional:{...e.additional,conversationId:e.conversationId}};Object(j.a)({topic:p.e,payload:{data:t}})},h=n(387),g=n(438),m=n(322);const v=new Set([g.a.AGENT_ASSIGNED.id,g.a.VIDEO_CALL_OUTGOING_STARTING.id,g.a.AUDIO_CALL_OUTGOING_STARTING.id]);var y=()=>async e=>{if(!v.has(e.action.id))try{await h.a.post("/livechat/prompt/browse/event",{page:e.page,userAgent:e.userAgent,device:e.device,timeZone:e.timeZone,eventType:e.action.label,eventId:e.label,conversationId:e.conversationId,sourceType:"LIVE_CHAT"})}catch(t){Object(m.b)(t)}},C=n(480),I=n(337),E=n(331),T=n(402),x=n(336),S=n(413),w=n(330),_=n(9),A=n(564),R=n(316);const N=c.a.createContext(b.a),M=e=>Object(S.c)(Object(x.e)(e));t.b=c.a.memo(e=>{const t=Object(C.a)(),c=Object(I.a)(),r=Object(a.useRef)([]),[i,u]=Object(a.useState)(!1),d=Object(E.a)(T.c),b=Object(E.a)(T.b),j=Object(O.d)(M),p=Object(_.M)();return Object(a.useEffect)(()=>{if(i&&j.length){const e={...j[0],category:"Sprinklr Widget",device:t.device,page:t.pageUrl,userAgent:t.userAgent,timeZone:t.timeZone};((e,t)=>{Object(A.c)(()=>{s()(e,e=>{e(t)})})})(r.current,e),b()}},[j,i]),Object(a.useEffect)(()=>{p||(e=>{const t=[],a=w.a.getGoogleTrackerId(e),c=w.a.isSprinklrAnalyticsEnabled(e);return o()(a)||t.push(n.e(57).then(n.bind(null,1842)).then(e=>e.default.createTracker({trackerId:a},{canAccessParent:Object(_.K)()})).catch(()=>{})),c&&t.push(y()),t.push(f()),Promise.all(t)})(c).then(e=>{r.current=l()(e),u(!0)})},[]),Object(R.jsx)(N.Provider,{value:d},e.children)})},1282:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));n(315);var a=n(317),c=n(316),r=n(318),o=n(321),i=n(465),s=n(464);const u=Object(a.a)("div",{target:"e1exikj40"})("position:fixed;top:0px;left:0px;width:100%;height:100%;z-index:",e=>Object(r.e)("frame.zIndex")(e),";transform:translateZ(",e=>Object(r.e)("frame.translateZ")(e),"px);"),l=Object(a.a)(i.a,{target:"e1exikj41"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),d={name:"1egabj8",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}body{background-color:transparent;}"},b=Object(a.a)("div",{target:"e1exikj42"})("width:100%;height:100%;position:relative;",e=>e.isPhone&&"backdrop-filter: blur(2px);",""),O=Object(a.a)("div",{target:"e1exikj43"})("position:absolute;padding:",e=>{const t=+Object(r.e)("confirmationBox.paddingTop")(e),n=+Object(r.e)("confirmationBox.paddingRight")(e),a=+Object(r.e)("confirmationBox.paddingLeft")(e);return`${t}px ${n}px ${+Object(r.e)("confirmationBox.paddingBottom")(e)}px ${a}px`},";",e=>e.isPhone?"\n      top: 0;\n      left: 0;\n      height: 100%;\n      width: 100%;\n      opacity: 0.95;\n      ":`\n      box-shadow: 0 4px 10px 0 rgba(49, 39, 39, 0.2);\n      border-radius: ${Object(r.e)("frame.borderRadius")(e)};\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      max-width: 312px;\n      width: 85%;\n  `," color:",Object(r.a)("charcoal"),";background-color:",Object(r.e)("confirmationBox.backgroundColor"),";"),j=Object(a.a)("div",{target:"e1exikj44"})("font-size:",Object(r.e)("confirmationBox.header.title.fontSize"),"px;font-family:",Object(r.c)("confirmationBox.header.title.fontFamily"),";font-weight:",Object(r.e)("confirmationBox.header.title.fontWeight"),";padding-bottom:",Object(r.e)("confirmationBox.header.paddingBottom"),"px;"),p=Object(a.a)("div",{target:"e1exikj45"})("font-size:",Object(r.e)("confirmationBox.description.fontSize"),"px;font-weight:normal;color:",Object(r.a)("charcoal"),";text-align:center;"),f=Object(a.a)(s.a,{target:"e1exikj46"})("position:absolute;top:env(safe-area-inset-top);",Object(o.c)("right: env(safe-area-inset-right);","left: env(safe-area-inset-left);"),""),h=e=>Object(c.css)({height:Object(r.e)("confirmationBox.header.iconButton.icon.height")({theme:e})+"px",width:Object(r.e)("confirmationBox.header.iconButton.icon.width")({theme:e})+"px"},""),g=e=>Object(c.css)({height:Object(r.e)("confirmationBox.header.iconButton.button.height")({theme:e})+"px",width:Object(r.e)("confirmationBox.header.iconButton.button.width")({theme:e})+"px"},"");var m=n(432),v=n(324),y=n(334),C=n(328);const I=({onClose:e,title:t,description:n,descriptionStyles:a,Icon:r})=>{const o=Object(C.b)(),i=Object(v.a)(),{direction:s}=Object(y.a)();return Object(c.jsx)(u,{className:"spr-chat__cobrowseInfo-box spr-live-chat-frame __cbio_ignored"},Object(c.jsx)(l,{name:"spr-chat__cobrowseInfo-frame"},Object(c.jsx)(c.Global,{styles:d}),Object(c.jsx)(b,{isPhone:i},Object(c.jsx)(O,{isPhone:i},Object(c.jsx)("div",{className:"flex-column-container center-x-y spr full-width full-height"},Object(c.jsx)(f,{direction:s,iconName:"closeIcon",Icon:m.a,onClick:e,iconCss:h(o),css:g(o)}),Object(c.jsx)(r,null),t&&Object(c.jsx)(j,null,t),n&&Object(c.jsx)(p,{css:a},n))))))}},1350:function(e,t,n){var a=n(607);e.exports=function(e,t){for(var n=-1,c=e.length;++n<c&&a(t,e[n],0)>-1;);return n}},1421:function(e,t,n){"use strict";var a=n(687),c=n.n(a),r=n(500),o=n.n(r),i=n(315),s=n.n(i),u=n(378),l=n.n(u),d=n(1018),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=function(e){return 0===s.a.Children.count(e)},f=function(e){function t(){var n,a;O(this,t);for(var c=arguments.length,r=Array(c),o=0;o<c;o++)r[o]=arguments[o];return n=a=j(this,e.call.apply(e,[this].concat(r))),a.state={match:a.computeMatch(a.props,a.context.router)},j(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:b({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,a=e.location,c=e.path,r=e.strict,i=e.exact,s=e.sensitive;if(n)return n;o()(t,"You should not use <Route> or withRouter() outside a <Router>");var u=t.route,l=(a||u.location).pathname;return Object(d.a)(l,{path:c,strict:r,exact:i,sensitive:s},u.match)},t.prototype.componentWillMount=function(){c()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),c()(!(this.props.component&&this.props.children&&!p(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),c()(!(this.props.render&&this.props.children&&!p(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){c()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),c()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,a=t.component,c=t.render,r=this.context.router,o=r.history,i=r.route,u=r.staticContext,l={match:e,location:this.props.location||i.location,history:o,staticContext:u};return a?e?s.a.createElement(a,l):null:c?e?c(l):null:"function"===typeof n?n(l):n&&!p(n)?s.a.Children.only(n):null},t}(s.a.Component);f.propTypes={computedMatch:l.a.object,path:l.a.string,exact:l.a.bool,strict:l.a.bool,sensitive:l.a.bool,component:l.a.func,render:l.a.func,children:l.a.oneOfType([l.a.func,l.a.node]),location:l.a.object},f.contextTypes={router:l.a.shape({history:l.a.object.isRequired,route:l.a.object.isRequired,staticContext:l.a.object})},f.childContextTypes={router:l.a.object.isRequired},t.a=f},1422:function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},1423:function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},c={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r=Object.defineProperty,o=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,l=u&&u(Object);e.exports=function e(t,n,d){if("string"!==typeof n){if(l){var b=u(n);b&&b!==l&&e(t,b,d)}var O=o(n);i&&(O=O.concat(i(n)));for(var j=0;j<O.length;++j){var p=O[j];if(!a[p]&&!c[p]&&(!d||!d[p])){var f=s(n,p);try{r(t,p,f)}catch(h){}}}return t}return t}},1424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(453),c=a.__importStar(n(315)),r=n(315),o=a.__importDefault(n(1425)),i=a.__importDefault(n(1426));t.default=function(e){return function(t){var n,s;s=c.isValidElement(t)?(n=t).props:t;var u=o.default({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1}),l=u[0],d=u[1],b=r.useRef(null),O=function(e,t){return function(n){try{t&&t(n)}finally{e&&e(n)}}},j=function(){return d({paused:!1})},p=function(){return d({paused:!0})},f=function(){var e=b.current;e&&d({muted:e.muted,volume:e.volume})},h=function(){var e=b.current;if(e){var t=e.duration,n=e.buffered;d({duration:t,buffered:i.default(n)})}},g=function(){var e=b.current;e&&d({time:e.currentTime})},m=function(){var e=b.current;e&&d({buffered:i.default(e.buffered)})};n=n?c.cloneElement(n,a.__assign(a.__assign({controls:!1},s),{ref:b,onPlay:O(s.onPlay,j),onPause:O(s.onPause,p),onVolumeChange:O(s.onVolumeChange,f),onDurationChange:O(s.onDurationChange,h),onTimeUpdate:O(s.onTimeUpdate,g),onProgress:O(s.onProgress,m)})):c.createElement(e,a.__assign(a.__assign({controls:!1},s),{ref:b,onPlay:O(s.onPlay,j),onPause:O(s.onPause,p),onVolumeChange:O(s.onVolumeChange,f),onDurationChange:O(s.onDurationChange,h),onTimeUpdate:O(s.onTimeUpdate,g),onProgress:O(s.onProgress,m)}));var v=!1,y={play:function(){var e=b.current;if(e&&!v){var t=e.play();if("object"===typeof t){v=!0;var n=function(){v=!1};t.then(n,n)}return t}},pause:function(){var e=b.current;if(e&&!v)return e.pause()},seek:function(e){var t=b.current;t&&void 0!==l.duration&&(e=Math.min(l.duration,Math.max(0,e)),t.currentTime=e)},volume:function(e){var t=b.current;t&&(e=Math.min(1,Math.max(0,e)),t.volume=e,d({volume:e}))},mute:function(){var e=b.current;e&&(e.muted=!0)},unmute:function(){var e=b.current;e&&(e.muted=!1)}};return r.useEffect((function(){var e=b.current;e&&(d({volume:e.volume,muted:e.muted,paused:e.paused}),s.autoPlay&&e.paused&&y.play())}),[s.src]),[n,l,y,b]}}},1425:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(315);t.default=function(e){void 0===e&&(e={});var t=a.useState(e),n=t[0],c=t[1];return[n,a.useCallback((function(e){c((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[c])]}},1426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}},1429:function(e,t,n){var a=n(999);e.exports=function(e,t,n){return null==e?e:a(e,t,n)}},1437:function(e,t,n){var a=n(1438),c=n(69),r=/[&<>"']/g,o=RegExp(r.source);e.exports=function(e){return(e=c(e))&&o.test(e)?e.replace(r,a):e}},1438:function(e,t,n){var a=n(1001)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=a},1439:function(e,t,n){var a=n(69);e.exports=function(){var e=arguments,t=a(e[0]);return e.length<3?t:t.replace(e[1],e[2])}},1440:function(e,t,n){var a=n(162),c=n(676),r=n(773),o=n(102),i=n(106),s=n(163),u=Math.min;e.exports=function(e,t,n){for(var l=n?r:c,d=e[0].length,b=e.length,O=b,j=Array(b),p=1/0,f=[];O--;){var h=e[O];O&&t&&(h=o(h,i(t))),p=u(h.length,p),j[O]=!n&&(t||d>=120&&h.length>=120)?new a(O&&h):void 0}h=e[0];var g=-1,m=j[0];e:for(;++g<d&&f.length<p;){var v=h[g],y=t?t(v):v;if(v=n||0!==v?v:0,!(m?s(m,y):l(f,y,n))){for(O=b;--O;){var C=j[O];if(!(C?s(C,y):l(e[O],y,n)))continue e}m&&m.push(y),f.push(v)}}return f}},1441:function(e,t,n){var a=n(774);e.exports=function(e){return a(e)?e:[]}},1753:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return $t}));var a=n(315),c=n.n(a),r=n(401),o=n.n(r),i=n(316),s=n(36),u=n.n(s),l=n(450),d=n.n(l),b=n(618),O=n.n(b),j=n(439),p=n.n(j),f=n(530),h=n(446),g=n(1010),m=n(573),v=n(552),y=n(390),C=n(455);const I="IDLE",E="TRACKING";var T=()=>{const{subscribe:e}=Object(v.a)(),t=Object(a.useCallback)(()=>({eventType:C.a.PAGE_VISIT,eventId:c.current,details:{title:Object(y.c)(),oldUrl:c.current,newUrl:r.current}}),[]),n=Object(g.useFirstMountState)(),c=Object(a.useRef)(""),r=Object(a.useRef)(Object(y.b)()),{loading:o,refetch:i}=Object(m.a)({payload:t(),skipQueryOnMount:!1});return Object(a.useEffect)(()=>{const n=e("pageVisitTrackerInPrompt",({currentUrl:e,previousUrl:n})=>{c.current=n,r.current=e,i(t())});return()=>{n&&n()}},[i]),{trackingStatus:n||o?E:I}};var x=()=>{const{refetch:e}=Object(m.a)({skipQueryOnMount:!0});Object(a.useEffect)(()=>{const t=()=>{const{visibilityState:t}=document;e({eventType:C.a.TAB_CHANGE,eventId:Object(y.b)(),details:{isActive:"visible"===t}})};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}},[e])};var S=()=>{const{refetch:e}=Object(m.a)({skipQueryOnMount:!0});Object(a.useEffect)(()=>{const t=()=>{e({eventType:C.a.TAB_CLOSE,eventId:Object(y.b)(),details:{}})};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[e])};var w=()=>(x(),S(),T()),_=n(376),A=n(383),R=n(10),N=n(422),M=n(488);const L=(new _.a).setUrl("/livechat/prompt/candidatePrompts").setType(A.a.POST).build(),k="ADD",P="REMOVE",D="RESET";var U=()=>{const{data:e,refetch:t,fetchMore:n,updateQuery:c}=Object(h.a)({query:L,skipQueryOnMount:!0}),r=w().trackingStatus===I,[o,i]=Object(a.useState)(r?void 0:{isSilent:!1}),s=Object(a.useContext)(f.a),u=Object(a.useRef)(r);u.current=r;const l=Object(a.useCallback)(e=>{if(!u.current)return void i({isSilent:e});return t({...Object(y.a)(),appId:Object(R.a)().appId},e?(e,t)=>d()(t,e=>{const t=s.getActionState(e.interceptId,e.id);return t!==M.a.CLOSE&&t!==M.a.ENGAGE&&t!==M.a.SNOOZE}):void 0)},[t]),b=Object(a.useCallback)(e=>{if(u.current)return n({...Object(y.a)(),appId:Object(R.a)().appId,...e},(e,t)=>O()([...e,...t],"id"));i({isSilent:!1})},[]);Object(a.useEffect)(()=>{r&&o&&(l(o.isSilent),i(void 0))},[r,o]);return[e,Object(a.useCallback)(e=>{switch(e.type){case k:return b(e.payload);case P:{const t=new Set(p()(e.payload.interceptIds));return c(e=>d()(e,e=>!t.has(N.a.getId(e)))),null}case D:return l(e.payload.silent);default:return null}},[c])]};var V=c.a.createContext(void 0);var F=()=>Object(a.useContext)(V),G=n(749),B=n(342),z=n(374);const H=e=>`PROMPT_${B.a.getId(e)}_${Date.now()}_${Math.random().toString(16).substr(2,8)}`;let W;const $=()=>W,q=()=>{$().disconnect().then(()=>{Object(z.a)("MQTT Client | Disconnected")}).catch(e=>{console.error("MQTT Client | Disconnection Error",e)})};var Y=n(322),K=n(391);const Z="ADD_INTERCEPT",Q="REMOVE_INTERCEPT";var J=(e,t)=>{const n=Object(a.useMemo)(()=>({chatUser:K.a.getChatUser(t),userName:K.a.getChatSessionToken(t),inboxServerUrl:K.a.getProactiveInboxServerUrl(t),userInbox:K.a.getProactiveUserInbox(t)}),[t.chatUser,t.chatSessionToken,t.proactivePromptInboxServerUrl,t.proactiveUserInbox]);Object(a.useEffect)(()=>{(({chatUser:e,userName:t,inboxServerUrl:n,userInbox:a})=>{const c=H(e);W=new G.a({userName:t,clientId:c,inboxServerUrl:n,userInbox:a})})(n);try{(()=>{$().connect().catch(e=>{console.error("MQTT Client | Connection Error",e)});const e=$();e.on("error",()=>{Object(z.a)("MQTT Client | Error")}),e.on("offline",()=>{Object(z.a)("MQTT Client | Offline")}),e.on("reconnect",()=>{Object(z.a)("MQTT Client | Reconnect")}),e.on("close",()=>{Object(z.a)("MQTT Client | Closed")})})(),$().subscribe().catch(e=>{console.error("MQTT client | Subscribe Error",e)}),$().on("message",(t,n)=>{try{const t=JSON.parse(n.toString());e(t)}catch(a){Object(Y.b)(a)}})}catch(t){Object(Y.b)(t),q()}return()=>{try{$().unsubscribe()}catch(e){Object(Y.b)(e)}finally{q()}}},[n,e])},X=n(345),ee=n.n(X),te=n(410),ne=n.n(te),ae=n(526),ce=n(790),re=n(0);const oe=(new _.a).setUrl("/livechat/logging/log").setType(A.a.POST).build(),ie=e=>{const{message:t,userId:n}=e,a=`UI_${re.a.getAppId(Object(R.a)())}_${n}_${ne.a.v4()}`;return{message:t,timeStamp:Date.now(),clientId:a,url:Object(y.b)()}},se={debug:ee.a,info:ee.a,error:ee.a,warning:ee.a,cleanup:ee.a},ue=c.a.createContext({debug:ee.a,info:ee.a,warning:ee.a,error:ee.a}),le=({children:e})=>{const t=F(),n=K.a.getChatUser(t),c=(({category:e,batch:t,log:n,skip:c,adapter:r,userId:o})=>{const[i]=Object(ae.a)(oe,{ignoreResults:!0}),s=Object(a.useRef)(se);s.current=Object(a.useMemo)(()=>new ce.a(n||i,{batch:t,skip:c,adapter:r||ie}),[i,ie]),Object(a.useEffect)(()=>()=>{s.current.cleanup()},[]);return Object(a.useMemo)(()=>({debug:t=>s.current.debug({message:t,category:e,userId:o}),error:t=>s.current.error({message:t,category:e,userId:o}),info:t=>s.current.info({message:t,category:e,userId:o}),warning:t=>s.current.warning({message:t,category:e,userId:o})}),[e,o])})({category:"PROACTIVE_PROMPT",userId:B.a.getId(n),batch:!0});return Object(i.jsx)(ue.Provider,{value:c},e)},de=()=>Object(a.useContext)(ue);var be=n(404);var Oe=()=>{const{subscribe:e}=Object(v.a)(),t=F(),[n,c]=U(),r=de(),o=Object(R.b)();Object(a.useEffect)(()=>{c({type:D,payload:{}})},[c,t]);const i=Object(a.useCallback)(e=>{switch(e.payload.type){case Z:c({type:k,payload:{variables:e.payload.variables}});break;case Q:c({type:P,payload:{interceptIds:e.payload.interceptIds}})}},[c]);return J(i,t),Object(a.useEffect)(()=>{const t=e("fetchCandidatePromptBaseOnUrlChange",()=>{c({type:D,payload:{silent:!0}})});return()=>{t&&t()}},[c]),Object(a.useEffect)(()=>{const e=e=>{if(e.response&&e.response.data&&e.response.data.eventType===be.a.USER_PROFILE_UPDATED.id)return c({type:D,payload:{silent:!0}})};return o.sprChat("subscribeToUpdate",{topic:"eventTriggered",subscriber:e}),()=>{o.sprChat("unsubscribeToUpdate",{topic:"eventTriggered",subscriber:e})}},[c]),Object(a.useEffect)(()=>{const e=d()(n,e=>!N.a.getCreativeId(e));u()(e)||r.debug("Available intercepts : "+JSON.stringify(e))},[n]),[n,c]},je=n(96),pe=n.n(je),fe=n(505),he=n(419);var ge=e=>{const t=de(),n=Object(a.useMemo)(()=>pe()(e,e=>{let t=e;return N.a.getSnoozeConfig(e)&&(t=(e=>{const t=N.a.getFilter(e),n=N.a.getSnoozeConfig(e);if(u()(n))return e;const a={filterType:fe.a.LTE,field:he.a.NUM_SNOOZE_ALLOWED,values:[n.maxSnoozeCount],details:{numSnoozes:n.maxSnoozeCount-n.currentSnoozeCount,nextSnoozeDuration:n.nextSnoozeDuration}};return t?{...e,filter:{filterType:fe.a.AND,filters:[a,t]}}:{...e,filter:a}})(t)),t}),[e]);return Object(a.useEffect)(()=>{const e=d()(n,e=>!N.a.getCreativeId(e));u()(e)||t.debug("Adapted intercepts : "+JSON.stringify(e))},[n]),n},me=n(1041),ve=n.n(me),ye=n(37),Ce=n.n(ye),Ie=n(417),Ee=n.n(Ie);const Te=new Set([he.a.IS_CONVERSATION_OPEN]),xe="EXCLUDE_LIVE_CHAT_FILTERS",Se="INCLUDE_LIVE_CHAT_FILTERS",we=(e,t)=>{if(!u()(e)){if(e.filterType===fe.a.AND||e.filterType===fe.a.OR){if(u()(e.filters))return;const n=Ee()(pe()(e.filters,e=>we(e,t)));return u()(n)?void 0:{...e,filters:n}}return t===Se&&Te.has(e.field)||t===xe&&!Te.has(e.field)?e:void 0}};var _e=n(1006),Ae=n(343);var Re=()=>{const{subscribe:e,getValue:t}=Object(v.a)();return{subscribe:Object(a.useCallback)((t,n)=>{const a=Ae.a.getId(t);return e(a,n)},[e]),getValue:t}},Ne=n(346),Me=n.n(Ne),Le=n(360),ke=n.n(Le),Pe=n(154),De=n.n(Pe);var Ue=class{constructor(){this._startTime=void 0,this._endTime=void 0,this.start=()=>(this._startTime=this.getCurrentTime(),this._startTime),this.stop=()=>(this._endTime=this.getCurrentTime(),this._endTime),this.getCurrentTime=()=>Date.now(),this.getStartTime=()=>this._startTime,this.getEndTime=()=>this._endTime,this._startTime=0,this._endTime=0}};var Ve=class{constructor(){this._clockInstance=void 0,this._totalTime=void 0,this.time=()=>(this._totalTime=this._clockInstance.getCurrentTime()-this._clockInstance.getStartTime(),this._totalTime),this._clockInstance=new Ue,this._totalTime=0,this._clockInstance.start()}};var Fe=()=>Object(a.useCallback)(({startTime:e,expectedTime:t,onTimeout:n})=>{const a=t-(e||Date.now());let c;return a>0&&(c=window.setTimeout(()=>{n()},a)),c},[]);var Ge=()=>{const e=Fe(),t=Object(a.useRef)();t.current=Object(a.useMemo)(()=>new Ve,[]);const n=Object(a.useRef)({});return{subscribe:Object(a.useCallback)((a,c)=>{const r=Ae.a.getId(a),o=e({startTime:t.current.time(),expectedTime:ke()(Ae.a.getValues(a)),onTimeout:c});return o&&(n.current={...n.current,[r]:{timeoutId:o}}),()=>{clearTimeout(De()(n.current,r+".timeoutId")),n.current=Me()(n.current,r)}},[]),getValue:Object(a.useCallback)(()=>t.current.time(),[])}},Be=n(350),ze=n.n(Be);var He=class{constructor(){this._clockInstance=void 0,this._activeTime=void 0,this._visibilityChangeHandler=()=>{const{visibilityState:e}=document;"hidden"===e&&(this._clockInstance.stop(),this._activeTime+=this._clockInstance.getEndTime()-this._clockInstance.getStartTime()),"visible"===e&&this._clockInstance.start()},this.time=()=>"hidden"===document.visibilityState?this._activeTime:this._activeTime+(this._clockInstance.getCurrentTime()-this._clockInstance.getStartTime()),this._clockInstance=new Ue,"visible"===document.visibilityState&&this._clockInstance.start(),this._activeTime=0,document.addEventListener("visibilitychange",this._visibilityChangeHandler)}};var We=()=>{const e=Fe(),t=Object(a.useRef)();t.current=Object(a.useMemo)(()=>new He,[]);const n=Object(a.useRef)({}),c=Object(a.useCallback)(()=>{"visible"===document.visibilityState&&ze()(n.current,(a,c)=>{const{onChangeCallback:r}=a,o=e({startTime:t.current.time(),expectedTime:ke()(Ae.a.getValues(De()(a,"filter"))),onTimeout:r});o&&(n.current={...n.current,[c]:{...n.current[c],timeoutId:o}})}),"hidden"===document.visibilityState&&ze()(n.current,e=>{const{timeoutId:t}=e;t&&window.clearTimeout(t)})},[]);Object(a.useEffect)(()=>(document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}),[]);return{subscribe:Object(a.useCallback)((a,c)=>{const r=Ae.a.getId(a);if("visible"===document.visibilityState){const o=e({startTime:t.current.time(),expectedTime:ke()(Ae.a.getValues(a)),onTimeout:c});o&&(n.current={...n.current,[r]:{timeoutId:o,filter:a,onChangeCallback:c}})}return"hidden"===document.visibilityState&&(n.current={...n.current,[r]:{filter:a,onChangeCallback:c}}),()=>{clearTimeout(De()(n.current,r+".timeoutId")),n.current=Me()(n.current,r)}},[]),getValue:Object(a.useCallback)(()=>t.current.time(),[])}};var $e=class{constructor(){this._clockInstance=void 0,this._inactiveTime=void 0,this._visibilityChangeHandler=()=>{const{visibilityState:e}=document;"hidden"===e&&this._clockInstance.start(),"visible"===e&&(this._clockInstance.stop(),this._inactiveTime+=this._clockInstance.getEndTime()-this._clockInstance.getStartTime())},this.time=()=>"visible"===document.visibilityState?this._inactiveTime:this._inactiveTime+(this._clockInstance.getCurrentTime()-this._clockInstance.getStartTime()),this._clockInstance=new Ue,"hidden"===document.visibilityState&&this._clockInstance.start(),this._inactiveTime=0,document.addEventListener("visibilitychange",this._visibilityChangeHandler)}};var qe=()=>{const e=Fe(),t=Object(a.useRef)();t.current=Object(a.useMemo)(()=>new $e,[]);const n=Object(a.useRef)({}),c=Object(a.useCallback)(()=>{"visible"===document.visibilityState&&ze()(n.current,e=>{const{timeoutId:t}=e;t&&window.clearTimeout(t)}),"hidden"===document.visibilityState&&ze()(n.current,(a,c)=>{const{onChangeCallback:r}=a,o=e({startTime:t.current.time(),expectedTime:ke()(Ae.a.getValues(De()(a,"filter"))),onTimeout:r});o&&(n.current={...n.current,[c]:{...n.current[c],timeoutId:o}})})},[]);Object(a.useEffect)(()=>(document.addEventListener("visibilitychange",c),()=>{document.removeEventListener("visibilitychange",c)}),[]);return{subscribe:Object(a.useCallback)((a,c)=>{const r=Ae.a.getId(a);if("hidden"===document.visibilityState){const o=e({startTime:t.current.time(),expectedTime:ke()(Ae.a.getValues(a)),onTimeout:c});o&&(n.current={...n.current,[r]:{timeoutId:o,filter:a,onChangeCallback:c}})}return"visible"===document.visibilityState&&(n.current={...n.current,[r]:{filter:a,onChangeCallback:c}}),()=>{clearTimeout(De()(n.current,r+".timeoutId")),n.current=Me()(n.current,r)}},[]),getValue:Object(a.useCallback)(()=>t.current.time(),[])}},Ye=n(1042),Ke=n.n(Ye);var Ze=()=>{const e=Object(a.useRef)({}),t=Object(a.useContext)(f.a);return{subscribe:Object(a.useCallback)((n,a)=>{const c=Ae.a.getId(n),r=ke()(Ae.a.getValues(n));if(!t.getActionState(r)){const n=t.setSubscriber(r,e=>{e===M.a.ENGAGE&&a()});e.current={...e.current,[c]:{unsubscribeInterceptActionEvent:n}}}return()=>{const t=De()(e.current,c+".unsubscribeInterceptActionEvent");t&&t(),e.current=Me()(e.current,c)}},[]),getValue:Object(a.useCallback)(()=>Ke()(t.getActionDetails(),e=>e.variants.some(e=>e.actionState===M.a.ENGAGE)),[])}};var Qe=()=>{const e=Object(a.useRef)({}),t=Object(a.useContext)(f.a);return{subscribe:Object(a.useCallback)((n,a)=>{const c=Ae.a.getId(n),r=ke()(Ae.a.getValues(n));if(!t.getActionState(r)){const n=t.setSubscriber(r,e=>{e===M.a.CLOSE&&a()});e.current={...e.current,[c]:{unsubscribeInterceptActionEvent:n}}}return()=>{const t=De()(e.current,c+".unsubscribeInterceptActionEvent");t&&t(),e.current=Me()(e.current,c)}},[]),getValue:Object(a.useCallback)(()=>Ke()(t.getActionDetails(),e=>e.variants.some(e=>e.actionState===M.a.CLOSE)),[])}};var Je=()=>{const{getValue:e,subscribe:t}=Ze(),{getValue:n,subscribe:c}=Qe(),r=Object(a.useRef)({});return{subscribe:Object(a.useCallback)((t,a,c)=>{const o=Ae.a.getId(t);switch(c&&Ae.a.getField(c)){case he.a.INTERCEPT_CLOSED_IN_SESSION_KEY:{const e=n(),i=ke()(Ae.a.getValues(c)),s=()=>{const n=ke()(Ae.a.getValues(t)),c=e[i]?e[i].variants:[],s=c[c.length-1].actionTime,u=n-(Date.now()-s);let l;u>0&&(l=window.setTimeout(()=>{a()},u),r.current={...r.current,[o]:[()=>clearTimeout(l)]})};e[i]&&s();break}case he.a.INTERCEPT_ENGAGED_IN_SESSION_KEY:{const n=e(),i=ke()(Ae.a.getValues(c)),s=()=>{const e=ke()(Ae.a.getValues(t)),c=n[i]?n[i].variants:[],s=c[c.length-1].actionTime,u=e-(Date.now()-s);let l;u>0&&(l=window.setTimeout(()=>{a()},u),r.current={...r.current,[o]:[()=>clearTimeout(l)]})};n[i]&&s();break}}return()=>{pe()(r.current[o],e=>e()),r.current=Me()(r.current,o)}},[])}},Xe=n(471),et=n.n(Xe),tt=n(454),nt=n.n(tt),at=n(411);const ct="HORIZONTAL",rt="VERTICAL",ot=({clientWindow:e,scrollDirection:t})=>{const n=e.document;let a,c;if(t===ct){const e=n.documentElement.scrollWidth;a=n.documentElement.scrollLeft+n.documentElement.clientWidth,c=e?Math.round(a/e*100):100}else{const e=n.documentElement.scrollHeight;a=n.documentElement.scrollTop+n.documentElement.clientHeight,c=e?Math.round(a/e*100):100}return{scrollDepth:a,scrollPercent:c}},it=e=>{const t=Object(at.a)(),[n,c]=Object(a.useState)(()=>(({clientWindow:e,scrollDirection:t})=>Object(at.b)(e)?ot({clientWindow:e,scrollDirection:t}):{scrollDepth:0,scrollPercent:0})({clientWindow:t,scrollDirection:e}));return Object(a.useEffect)(()=>{if(Object(at.b)(t)){const n=nt()(()=>{const n=ot({clientWindow:t,scrollDirection:e});c(n)},1e3);return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)}}return ee.a},[]),n};var st=()=>{const{getValue:e,subscribe:t}=Re(),{getValue:n,subscribe:c}=Ge(),{getValue:r,subscribe:o}=We(),{getValue:i,subscribe:s}=qe(),{getValue:u,subscribe:l}=Qe(),{getValue:d,subscribe:b}=Ze(),{subscribe:O}=Je(),{getValue:j,subscribe:p}=(()=>{const e=it(rt),t=Object(a.useRef)({}),n=Object(a.useRef)(e);n.current=e,et()(()=>{pe()(t.current,e=>{e()})},[e.scrollDepth,e.scrollPercent]);const c=Object(a.useCallback)((e,n)=>{const a=Ae.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=Me()(t.current,a)}},[]);return{getValue:Object(a.useCallback)(()=>({scrollDepth:n.current.scrollDepth,scrollPercent:n.current.scrollPercent}),[]),subscribe:c}})(),{getValue:f,subscribe:h}=(()=>{const e=it(ct),t=Object(a.useRef)({}),n=Object(a.useRef)(e);n.current=e,et()(()=>{pe()(t.current,e=>{e()})},[e.scrollDepth,e.scrollPercent]);const c=Object(a.useCallback)((e,n)=>{const a=Ae.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=Me()(t.current,a)}},[]);return{getValue:Object(a.useCallback)(()=>({scrollDepth:n.current.scrollDepth,scrollPercent:n.current.scrollPercent}),[]),subscribe:c}})(),{getValue:g,subscribe:m}=(()=>{const e=Object(a.useRef)({});return{subscribe:Object(a.useCallback)((t,n)=>{const a=Ae.a.getId(t),c=ke()(Ae.a.getValues(t));let r;return c>0&&(r=window.setTimeout(()=>{e.current={...e.current,[a]:{...e.current.id,timeLeft:0}},n()},c)),e.current={...e.current,[a]:{timeoutId:r,timeLeft:c}},()=>{window.clearTimeout(De()(e.current,a+".timeoutId")),e.current=Me()(e.current,a)}},[]),getValue:Object(a.useCallback)(()=>t=>{const n=Ae.a.getId(t);return De()(e.current,n+".timeLeft",0)},[])}})(),{getValue:v,subscribe:y}=(()=>{const e=Fe(),t=Object(a.useRef)(new Ve),n=Object(a.useRef)({});return{subscribe:Object(a.useCallback)((a,c)=>{const r=Ae.a.getId(a),o=De()(Ae.a.getDetails(a),"nextSnoozeDuration",0),i=t.current.time(),s=e({startTime:i,expectedTime:i+o,onTimeout:()=>{n.current={...n.current,[r]:{...n.current.id,timeLeft:0}},c()}});return s&&(n.current={...n.current,[r]:{timeoutId:s,timeLeft:o}}),()=>{clearTimeout(De()(n.current,r+".timeoutId")),n.current=Me()(n.current,r)}},[]),getValue:Object(a.useCallback)(()=>e=>{const t=Ae.a.getId(e);return De()(n.current,t+".timeLeft",0)},[])}})();return{getValue:Object(a.useCallback)(()=>({[he.a.CURRENT_URL]:e(),[he.a.TOTAL_TIME_SPENT]:n(),[he.a.ACTIVE_TIME_SPENT]:r(),[he.a.INACTIVE_TIME_SPENT]:i(),[he.a.INTERCEPT_ENGAGED_IN_SESSION_KEY]:d(),[he.a.INTERCEPT_CLOSED_IN_SESSION_KEY]:u(),[he.a.VERTICAL_PAGE_SCROLL_DEPTH]:j(),[he.a.HORIZONTAL_PAGE_SCROLL_DEPTH]:f(),[he.a.TIME_SPENT_ON_SESSION]:g(),[he.a.NUM_SNOOZE_ALLOWED]:v()}),[e,n,r,i,u,d,j,f,g,v]),subscribe:Object(a.useCallback)((e,n,a)=>{switch(Ae.a.getField(e)){case he.a.TOTAL_TIME_SPENT:return c(e,n);case he.a.CURRENT_URL:return t(e,n);case he.a.ACTIVE_TIME_SPENT:return o(e,n);case he.a.INACTIVE_TIME_SPENT:return s(e,n);case he.a.INTERCEPT_CLOSED_IN_SESSION_KEY:return l(e,n);case he.a.INTERCEPT_ENGAGED_IN_SESSION_KEY:return b(e,n);case he.a.DEPENDENT_DURATION_KEY:return O(e,n,a);case he.a.VERTICAL_PAGE_SCROLL_DEPTH:return p(e,n);case he.a.HORIZONTAL_PAGE_SCROLL_DEPTH:return h(e,n);case he.a.TIME_SPENT_ON_SESSION:return m(e,n);case he.a.NUM_SNOOZE_ALLOWED:return y(e,n);default:return null}},[t,c,o,s,l,b,O,p,h,m,y])}},ut=n(338);var lt=(e,t)=>{const{_getStaticValueMap:n=ee.a}=t||ut.a,{getValue:c,subscribe:r}=st(),o=Object(a.useCallback)(()=>({...n(),...c()}),[c,n]);return Object(_e.a)(e,{...t,getValue:o,subscribe:r})};var dt=e=>{const[t,n]=Object(a.useState)(0),c=Object(a.useRef)([]),r=Object(a.useRef)({}),o=Object(R.b)();return Object(a.useMemo)(()=>{u()(e)?c.current=[{hasPassed:!0}]:c.current=pe()(e,({id:e,filter:t})=>{const n=u()(t)||r.current[e];return delete r.current[e],{hasPassed:n}})},[e]),Object(a.useEffect)(()=>{if(!u()(Ee()(pe()(e,"filter")))){const t=ne.a.v4(),a=({response:t})=>{t&&t.data&&(c.current=pe()(e,({id:e,filter:n},a)=>(r.current[e]=!n||t.data.results[a],{hasPassed:r.current[e]})),n(e=>e+1))};return o.sprChat("subscribeToUpdate",{topic:"addFilterToEvaluate",subscriber:a}),o.sprChat("addFilterToEvaluate",{id:t,filters:pe()(e,"filter")}),()=>{o.sprChat("unsubscribeToUpdate",{topic:"addFilterToEvaluate",subscriber:a}),o.sprChat("removeFilterToEvaluate",{id:t})}}return ee.a},[e]),c.current};var bt=e=>{const t=Object(a.useRef)([]),n=de(),{interceptsWithoutLiveChatFilterToEvaluate:c,interceptsOnlyWithLiveChatFilterToEvaluate:r}=Object(a.useMemo)(()=>Ce()(e,(e,t)=>{const n=we(N.a.getFilter(t),xe),a=we(N.a.getFilter(t),Se);return{interceptsWithoutLiveChatFilterToEvaluate:[...e.interceptsWithoutLiveChatFilterToEvaluate,n],interceptsOnlyWithLiveChatFilterToEvaluate:[...e.interceptsOnlyWithLiveChatFilterToEvaluate,{id:N.a.getId(t),filter:a}]}},{interceptsWithoutLiveChatFilterToEvaluate:[],interceptsOnlyWithLiveChatFilterToEvaluate:[]}),[e]),o=lt(c,{defaultValue:!0}),i=dt(r);return Object(a.useMemo)(()=>{t.current=[],pe()(e,(e,n)=>{o[n].hasPassed&&i[n].hasPassed&&(t.current=[...t.current,e])})},[o,i,e]),Object(a.useEffect)(()=>{const e=d()(t.current,e=>!N.a.getCreativeId(e));u()(e)||n.debug("filterPassedIntercepts : "+JSON.stringify(e))},[t.current]),t.current},Ot=n(473);const jt=(e,t)=>t?Ce()(N.a.getTargets(e),(e,n,a)=>({...e,[a]:{...n,additional:t[n.value]}}),{}):N.a.getTargets(e);var pt=n(387);async function ft(e){return(await pt.a.get("/livechat/prompt/creative/"+e)).data}async function ht(e){return(await pt.a.post("/livechat/prompt/fetch/survey",e)).data}const gt=["snoozeConfig"];var mt=e=>{const[t,n]=Object(a.useState)(0),c=Object(a.useRef)([]),r=Object(a.useRef)({}),o=de();return Object(a.useMemo)(()=>{c.current=[],pe()(e,e=>{if(!e)return;if(!N.a.getCreativeId(e))return void o.debug("Intercept resolver : "+JSON.stringify(e));if(!u()(r.current[N.a.getId(e)]))return void c.current.push({...e,...Me()(r.current[N.a.getId(e)],gt)});const t=(e=>{const t=N.a.getId(e),n=Ce()(N.a.getTargets(e),(e,t)=>t.type===Ot.a.SURVEY||t.type===Ot.a.SURVEY_INLINE?{...e,surveyURLs:e.surveyURLs?[...e.surveyURLs,t.value]:[t.value]}:e,{});return u()(n)?void 0:{...n,variantId:t}})(e);Promise.all([ft(N.a.getCreativeId(e)),t?ht(t):Promise.resolve(void 0)]).then(([t,a])=>{const o={...e,creative:t,targets:jt(e,a)};r.current[N.a.getId(e)]=o,c.current=[...c.current,o],n(e=>e+1)}).catch(e=>{Object(Y.b)(e)})})},[e,n]),c.current};var vt=e=>{const t=Object(a.useRef)([]),n=bt(e),c=mt(n);return Object(a.useMemo)(()=>{t.current=O()([...ve()(t.current,c,"id"),...c],"id")},[c]),t.current},yt=n(575);const Ct=new Set([Ot.a.LIVE_CHAT_EXECUTE_RULE,Ot.a.LIVE_CHAT_ROUTE_TO_BOT,Ot.a.LIVE_CHAT_WITH_AGENT,Ot.a.CHAT_WITH_AGENT,Ot.a.ROUTE_TO_BOT,Ot.a.EXECUTE_RULE]);var It=e=>{const[t,n]=Object(a.useState)([]),c=Object(R.b)();return Object(a.useEffect)(()=>{const t=t=>{const a=t?e:(e=>Ce()(e,(e,t)=>{let n=!1;return ze()(N.a.getTargets(t),e=>{if(Ct.has(yt.a.getType(e)))return n=!0,!1}),n?e:[...e,t]},[]))(e);n(e=>O()([...ve()(e,a,"id"),...a],"id"))};return c.sprChat("onAvailabilityChange",t),()=>{c.sprChat("offAvailabilityChange",t)}},[n,e,c]),t};const Et="REMOVE_INTERCEPT";var Tt=function(){const[e,t]=Oe(),n=ge(e),c=vt(n);return[It(c),Object(a.useCallback)(e=>{e.type===Et&&t({type:P,payload:{interceptIds:[e.payload.interceptId]}})},[])]},xt=n(323),St=n(812),wt=n(340);const _t="POPUP",At="LIVECHAT",Rt="POSITIONED_POPUP",Nt=Object(wt.a)(()=>n.e(42).then(n.bind(null,1831))),Mt=Object(wt.a)(()=>n.e(43).then(n.bind(null,1823))),Lt=Object(wt.a)(()=>n.e(37).then(n.bind(null,1832))),kt=new Set([_t,At,Rt]);var Pt=c.a.memo(e=>{const{intercepts:t}=e,n=Object(a.useMemo)(()=>Ce()(t,(e,t)=>{const n=St.a.getType(N.a.getCreative(t));return kt.has(n)&&e[n].push(t),e},{[_t]:[],[At]:[],[Rt]:[]}),[t]),r=n[_t],o=n[Rt],s=n[At];return Object(i.jsx)(c.a.Fragment,null,u()(r)?null:Object(i.jsx)(a.Suspense,{fallback:null},Object(i.jsx)(Nt,Object(xt.a)({},e,{intercepts:r}))),u()(s)?null:Object(i.jsx)(a.Suspense,{fallback:null},Object(i.jsx)(Lt,Object(xt.a)({},e,{intercepts:s}))),u()(o)?null:Object(i.jsx)(a.Suspense,{fallback:null},Object(i.jsx)(Mt,Object(xt.a)({},e,{intercepts:o}))))});var Dt=()=>{const[e,t]=Tt(),n=Object(a.useCallback)(e=>{t({type:Et,payload:{interceptId:e}})},[t]);return u()(e)?null:Object(i.jsx)(Pt,{intercepts:e,onClose:n})},Ut=n(813),Vt=n(1032);var Ft=function(e){const t=Object(Vt.a)(e.window);return Object(i.jsx)(Ut.a.Provider,{value:t},e.children)};var Gt=class{constructor(){this._map=void 0,this._map={}}addEntry(e){this._map[e]||(this._map[e]={subscribers:[],variants:[]})}setAction(e,t){const n=(e=>{const t=e.indexOf("_");return-1!==t?e.substring(0,t):e})(e),a=Date.now();this.addEntry(n),this._map[n].variants=[...this._map[n].variants,{actionState:t,actionTime:a,id:e}],this._map[n].subscribers.forEach(e=>{e(t)}),this._map[n].subscribers=[]}setSubscriber(e,t){return this.addEntry(e),this._map[e].subscribers.push(t),()=>{this._map[e].subscribers=this._map[e].subscribers.filter(e=>e!==t)}}getActionState(e,t){const n=this._map[e]&&this._map[e].variants;if(n&&n.length){const e=n.find(e=>e.id===t);return t?e&&e.actionState:n[n.length-1].actionState}}getActionDetails(){return this._map}};var Bt=()=>Object(a.useRef)(new Gt).current,zt=n(568);var Ht=c.a.memo(e=>{const t=Object(R.b)(),n=Bt(),c=Object(a.useMemo)(()=>Object(zt.a)(t.document),[t.document]);return Object(i.jsx)(i.CacheProvider,{value:c},Object(i.jsx)(Ft,{window:t},Object(i.jsx)(V.Provider,{value:e.handshakeDetails},Object(i.jsx)(f.a.Provider,{value:n},Object(i.jsx)(le,null,Object(i.jsx)(Dt,null))))))});const Wt="spr-live-prompt-app";function $t(e,t){const n=(()=>{const e=Object(R.b)().document,t=e.querySelector("#"+Wt);if(t)return t;const n=e.createElement("div");return n.id=Wt,n.style.width="0",n.style.height="0",e.body.appendChild(n),n})();o.a.render(Object(i.jsx)(Ht,{handshakeDetails:t}),n)}},1759:function(e,t,n){"use strict";var a=n(315),c=n.n(a),r=n(378),o=n.n(r),i=n(1423),s=n.n(i),u=n(1421),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};t.a=function(e){var t=function(t){var n=t.wrappedComponentRef,a=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,["wrappedComponentRef"]);return c.a.createElement(u.a,{children:function(t){return c.a.createElement(e,l({},a,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:o.a.func},s()(t,e)}},1811:function(e,t,n){"use strict";n.r(t);var a=n(603),c=n.n(a),r=n(604),o=n.n(r),i=n(154),s=n.n(i),u=n(36),l=n.n(u),d=n(10),b=n(9);const O=[],j=(...e)=>{l()(e)||O.push(...e)};const p=new(n(978).a);var f=n(374);const h="AVAILABLE",g="UN_AVAILABLE",m="PENDING";let v=m;const y=e=>{v=e?h:g},C=()=>v===g,I=()=>v===m,E="PENDING",T="SUCCESS",x="FAIL",S="EXPIRED";let w=E;const _=e=>{w=e},A="INCORRECT_PAYLOAD",R="NETWORK_FAILURE",N="CHAT_UNAVAILABLE";var M=n(392),L=n.n(M),k=n(501);const P="APP_AVAILABLE",D="APP_IN_SESSION";function U(e,t){const n=Object(b.L)(t);if(l()(n))return;const a=L()(Object(d.a)(),{userContext:{$merge:n}});Object(d.f)(a),e({type:k.c,payload:n})}U.dependecies=[D];function V(e,t){e({type:"@user/UPDATE_USER_SETTINGS",payload:t})}V.dependecies=[D];var F=n(430);function G(e){e({type:F.f})}function B(e){Object(b.K)()&&e({type:F.d})}G.dependecies=[D],B.dependecies=[P];var z=n(522),H=n(375);function W(e){Object(b.K)()&&e({type:F.b})}W.dependecies=[P];var $=n(479),q=n.n($),Y=n(345),K=n.n(Y);const Z=({topic:e,legacySubscriberMap:t,legacySubscriber:n,newSubscriber:a})=>(Object(z.b)(K.a,{topic:e,subscriber:a}),t.push({legacySubscriber:n,newSubscriber:a}),t),Q=({topic:e,legacySubscriberMap:t,legacySubscriber:n})=>{const a=q()(t,({legacySubscriber:e})=>e===n);return-1!==a&&(Object(z.c)(K.a,{topic:e,subscriber:t[a].newSubscriber}),t.splice(a,1)),t};let J=[];let X=[];var ee=n(605);function te(e,t){e({type:ee.a,payload:t})}function ne(e,t){e({type:ee.b,payload:{promptId:t.id}})}te.dependecies=[D],ne.dependecies=[D];let ae=[];var ce=n(11),re=n.n(ce),oe=n(38),ie=n.n(oe),se=n(436),ue=n(606);function le(e,t={}){const n=re()(t)?t:s()(t,"initialMessages");new Promise((a,c)=>{e(Object(ue.b)({initialMessages:n,conversationContext:s()(t,"conversationContext"),assignToUser:s()(t,"assignToUser"),createCase:!!s()(t,"autoInitiateConversation"),additional:!re()(t)&&ie()(t)?{...t.additional,externalCaseId:t.id}:void 0,silent:!!s()(t,"silent")},{resolve:a,reject:c}))}).then(e=>{Object(se.a)({topic:"openNewConversation",payload:{data:{conversationId:e},request:t}})}).catch(e=>{Object(se.a)({topic:"openNewConversation",payload:{error:e,request:t}})})}le.dependecies=[D];var de=n(467);function be(e,t){const n=Object(de.a)();0!==n.index?(n.goBack(),t(!0)):t(!1)}be.dependecies=[P];var Oe=n(356);function je(e,t){e({type:Oe.y,payload:t})}function pe(e,t){e({type:Oe.k,payload:t})}function fe(e,t){const n=Object(b.L)(t);if(l()(n))return;const a=L()(Object(d.a)(),{clientContext:{$merge:n}});Object(d.f)(a),e({type:Oe.e,payload:{context:n}})}je.dependecies=[D],pe.dependecies=[D],fe.dependecies=[P];let he=[];let ge=[];function me(e){Object(b.K)()&&e({type:F.i})}function ve(e){Object(b.K)()&&e({type:F.h})}me.dependecies=[P],ve.dependecies=[P];let ye=[];function Ce(e,t){e({type:"@commerce/UPDATE_CART",payload:t})}function Ie(e,t){e({type:"@commerce/REMOVE_FROM_CART",payload:t})}Ce.requireSession=!0,Ie.dependecies=[D];var Ee=n(158),Te=n.n(Ee),xe=n(387),Se=n(558),we=n.n(Se);we.a.validators.type.types.MobileClientType=function(e){return"IPHONE"===e||"IPHONE_VOIP"===e||"ANDROID"===e||"WINDOWS"===e||"WINDOWS_UNIVERSAL"===e};const _e={mobileClientType:{type:"MobileClientType",presence:!0},appVersion:{type:"number",presence:!0},deviceId:{type:"string",presence:!0},deviceName:{type:"string"}},Ae=Object.assign({},_e,{deviceToken:{type:"string",presence:!0}});function Re(e,t){if(t.appVersion=Te()(t.appVersion),n=t,we()(n,Ae))throw Object(f.a)("Invalid device registration payload",t),new Error(A);var n;return xe.a.post("/livechat/event/push/register-device",t).then(()=>({})).catch(()=>{throw new Error(R)})}Re.dependecies=[D];let Ne=[];function Me(e,t){if(t.appVersion=Te()(t.appVersion),n=t,we()(n,_e))throw Object(f.a)("Invalid device unregistration payload",t),new Error(A);var n;return xe.a.post("/livechat/event/push/unregister-device",t).then(()=>({})).catch(()=>{throw new Error(R)})}Me.dependecies=[D];let Le=[];let ke=[];var Pe=n(437);function De(e,t){const{type:n,...a}=t;switch(n){case Pe.q:{const t=a.cId;e(Object(ue.a)({conversationId:t}));break}}}De.dependecies=[D];var Ue=n(100),Ve=n.n(Ue);const Fe=e=>{He(K.a,e)};let Ge=null,Be=Fe;function ze(e,t){Ve()(t)&&(Be=t)}function He(e,t){Ge&&(Ge(t),Ge=null)}Object(z.b)(K.a,{topic:H.i,subscriber:({response:{data:e}})=>{const{callBack:t,permissions:n}=e;Ge=t,Be(n)}});const We=e=>{xe.a.post("/livechat/conversation/fetchAgentAvailabilityDetails").then(e=>{Object(se.a)({topic:"getAvailableAgents",payload:{data:e.data}})}).catch(()=>{Object(se.a)({topic:"getAvailableAgents",payload:{error:R}})})};We.dependecies=[D];var $e=n(322);function qe(e,t){new Promise((n,a)=>{e(Object(ue.a)({conversationId:t},{resolve:n,reject:a}))}).catch(e=>{Object($e.b)(e)})}qe.dependecies=[D];const Ye={updateUserContext:[U],updateUserSettings:[V],open:[B],close:[W],onUnreadCountChange:[function(e,t){J=Z({topic:H.l,legacySubscriberMap:J,legacySubscriber:t,newSubscriber:({response:{data:e}})=>{t(s()(e,"count"))}})}],offUnreadCountChange:[function(e,t){J=Q({topic:H.l,legacySubscriberMap:J,legacySubscriber:t})}],onExternalEvent:[function(e,t){X=Z({topic:H.f,legacySubscriberMap:X,legacySubscriber:t,newSubscriber:({response:{data:e}})=>{t(e)}})}],offExternalEvent:[function(e,t){X=Q({topic:H.f,legacySubscriberMap:X,legacySubscriber:t})}],onClose:[function(e,t){Object(z.b)(e,{topic:H.d,subscriber:t})}],offClose:[function(e,t){Object(z.c)(e,{topic:H.d,subscriber:t})}],enable:[me],disable:[ve],onAvailabilityChange:[function(e,t){ke=Z({topic:H.c,legacySubscriberMap:ke,legacySubscriber:t,newSubscriber:({response:{data:e}})=>{t(e.isChatVisible)}}),t(v===h)}],offAvailabilityChange:[function(e,t){ke=Q({topic:H.c,legacySubscriberMap:ke,legacySubscriber:t})}],subscribeToUpdate:[z.b],unsubscribeToUpdate:[z.c],addFilterToEvaluate:[(e,t)=>{e({type:F.a,payload:{subscriber:t}})}],removeFilterToEvaluate:[(e,t)=>{e({type:F.m,payload:{id:t.id}})}],openNewPrompt:[te],clearPrompt:[ne],onPromptAction:[function(e,t){ae=Z({topic:H.j,legacySubscriberMap:ae,legacySubscriber:t,newSubscriber:({response:{data:e}})=>{t(e)}})}],offPromptAction:[function(e,t){ae=Q({topic:H.j,legacySubscriberMap:ae,legacySubscriber:t})}],openNewConversation:[le],sendExternalEvent:[je],clearSession:[G],updateConversationContext:[pe],updateClientContext:[fe],onShowMedia:[function(e,t){Object(z.b)(e,{topic:H.h,subscriber:t})}],offShowMedia:[function(e,t){Object(z.c)(e,{topic:H.h,subscriber:t})}],onCloseMedia:[function(e,t){Object(z.b)(e,{topic:H.g,subscriber:t})}],offCloseMedia:[function(e,t){Object(z.c)(e,{topic:H.g,subscriber:t})}],onEvent:[function(e,t){ye=Z({topic:H.e,legacySubscriberMap:ye,legacySubscriber:t,newSubscriber:({response:{data:e}})=>{t(e)}})}],offEvent:[function(e,t){ye=Q({topic:H.e,legacySubscriberMap:ye,legacySubscriber:t})}],getAvailableAgents:[We],openExistingConversation:[qe],updateCart:[Ce],removeFromCart:[Ie],registerDevice:[Re,function(e,t){Object(se.a)({topic:H.k,payload:{data:t,error:e}})}],onDeviceRegister:[function(e,t){Ne=Z({topic:H.k,legacySubscriberMap:Ne,legacySubscriber:t,newSubscriber:({response:{error:e}})=>{t(e)}})}],offDeviceRegister:[function(e,t){Ne=Q({topic:H.k,legacySubscriberMap:Ne,legacySubscriber:t})}],unregisterDevice:[Me,function(e,t){Object(se.a)({topic:H.m,payload:{data:t,error:e}})}],onUnregisterDevice:[function(e,t){Le=Z({topic:H.m,legacySubscriberMap:Le,legacySubscriber:t,newSubscriber:({response:{error:e}})=>{t(e)}})}],offUnregisterDevice:[function(e,t){Le=Q({topic:H.m,legacySubscriberMap:Le,legacySubscriber:t})}],onLoad:[function(e,t){he=Z({topic:H.a,legacySubscriberMap:he,legacySubscriber:t,newSubscriber:()=>{t()}})}],offLoad:[function(e,t){he=Q({topic:H.a,legacySubscriberMap:he,legacySubscriber:t})}],onLoadComplete:[function(e,t){ge=Z({topic:H.b,legacySubscriberMap:ge,legacySubscriber:t,newSubscriber:({response:{error:e}})=>{t(e)}})}],offLoadComplete:[function(e,t){ge=Q({topic:H.b,legacySubscriberMap:ge,legacySubscriber:t})}],goBack:[be],onNotification:[De],onSeekPermission:[ze],offSeekPermission:[function(e){ze(0,Fe)}],grantPermission:[He]},Ke=async()=>{if(!l()(O)){const e=O.shift();await Qe(...e),await Ke()}};async function Ze(e,t,n,...a){if(!t)return;const c=[p.emit.bind(p),...a];try{const e=await t(...c);n&&n(void 0,e)}catch(r){Object(f.a)(r),n&&n(r)}}async function Qe(e,...t){const n=Ye[e]&&Ye[e][0],a=Ye[e]&&Ye[e][1],c=n&&n.dependecies&&n.dependecies.includes(P);if(n&&n.dependecies&&n.dependecies.includes(D)||c)return c?C()?void(a&&a(N)):I()?void j([e,...t]):void Ze(e,n,a,...t):void(w===x||w===S||C()?a&&a(N):w===E||I()?j([e,...t]):Ze(e,n,a,...t));Ze(e,n,a,...t)}var Je=n(346),Xe=n.n(Je),et=n(497),tt=n(0),nt=n(4),at=n(3),ct=n(1839);const rt=Object(nt.a)("isSSOAuthorized"),ot=Object(nt.a)("authToken"),it=Object(nt.a)("oneTimeToken");class st{}st.isSSOAuthorized=Object(at.a)(rt),st.getAuthToken=Object(at.a)(ot),st.hasIsSSOAuthorized=e=>e&&Object(ct.a)("isSSOAuthorized",e),st.getOneTimeToken=Object(at.a)(it);var ut=n(357),lt=n(330),dt=n(448),bt=n(653),Ot=n(390);var jt=n(416);const pt=async({ssoId:e,conversationId:t,messageId:n})=>{const a=await(async({ssoId:e,conversationId:t,messageId:n})=>{const{appId:a}=Object(d.a)(),c=[{key:"idpId",value:e},{key:"x-chat-token",value:await Object(dt.a)(a)}];return t&&c.push({key:"conversationId",value:t}),n&&c.push({key:"messageId",value:n}),c})({ssoId:e,conversationId:t,messageId:n});return"https://prod4-live-chat.sprinklr.com/api/livechat/authenticate/begin?"+Object(jt.d)(a)},ft=e=>st.isSSOAuthorized(tt.a.getUserSettings(Object(d.a)()))&&!!lt.a.getAutoLoginSSOId(ut.a.getCustomizationConfig(e)),ht=async({ssoId:e,conversationId:t,messageId:n})=>{const a=(e=>{const t=screen.width/2,n=screen.height/2,a=t-t/2,c=n-n/2;return window.open(e,"_blank",`height=${n},width=${t},top=${c},left=${a}`)})(await pt({ssoId:e,conversationId:t,messageId:n}));return(()=>{const e=window.document.createElement("iframe");e.id="subscriberIframe",e.src="https://live-chat-static.sprinklr.com/api/livechat/authenticate/listener.html?appId="+Object(d.a)().appId,e.style.visibility="hidden",window.document.body.appendChild(e)})(),new Promise((e,t)=>{let n;n=setInterval(()=>{a&&a.closed&&(r(),t())},1500);const c=async n=>{if(n.origin.match(/(sprinklr\.com)/g))try{const{params:t}=JSON.parse(n.data);await Object(dt.i)(Object(d.a)().appId,t.authToken),e(t)}catch(a){t(),Object($e.b)(a)}finally{r()}},r=()=>{clearInterval(n),window.removeEventListener("message",c)};window.addEventListener("message",c)}).finally(()=>{a&&a.close(),(()=>{const e=document.getElementById("subscriberIframe");e&&document.body.removeChild(e)})()})};var gt=n(373),mt=n(338);const vt=({handshakeDetails:e,applicationConfig:t,getSessionToken:n})=>{if(n&&Object(xe.b)({getSessionToken:n}),e&&Object(xe.b)({userId:e.chatUser.userId}),t){const e=ut.a.getAutoExpireUserSessionTimeInMinutes(t);Object(xe.b)({sessionExpiryTime:e})}},yt=async e=>{const t=tt.a.getAppId(e),n=tt.a.getUserSettings(e),a=st.getAuthToken(n);if(st.hasIsSSOAuthorized(n)){const e=(e=>{if(e)try{return JSON.parse(atob(e.split(".")[1]))}catch(t){console.error("Unable to parse user token when isSSOAuthorized",e)}return mt.a})(await Object(dt.a)(t));Object(gt.b)(e.chatUserId)&&await Object(dt.f)(t)}a&&(await Object(dt.f)(t),await Object(dt.i)(t,a))};async function Ct(e){const t=tt.a.getAppId(e),n=tt.a.getUserSettings(e),a=Xe()(tt.a.getUserSettings(e),["authToken","isSSOAuthorized","oneTimeToken"]),c=tt.a.getUserContext(e);let r,o;if(!!tt.a.getSessionOrigin(Object(d.a)())){const{primaryToken:e,secondaryToken:n}=await async function(e){let t,n,a;try{t=await Object(dt.c)(e)}catch(o){console.warn(o)}try{n=await Object(dt.b)(e,bt.a)}catch(o){console.warn(o)}try{a=await Object(dt.b)(e,bt.b)}catch(o){console.warn(o)}const c=n||a||t;let r=a||t;return r=r===c?void 0:r,{primaryToken:c,secondaryToken:r}}(t);r=e,o=n}else r=await Object(dt.c)(t);const i={appId:t,oneTimeToken:s()(n,"oneTimeToken"),chatSessionToken:r,secondaryChatToken:o,page:Object(Ot.b)(),pageTitle:Object(Ot.c)(),referralPage:Object(Ot.d)(),timezone:Object(Ot.f)(),userAgent:Object(Ot.e)(),locale:tt.a.getLocale(e),meetingId:tt.a.getMeetingId(e),otp:tt.a.getOtp(e)};if(!l()(a)){const{id:e,hash:t,...n}=a;Object.assign(i,{chatUser:{userId:e,...n},chatUserSignature:t})}return l()(c)||Object.assign(i,{customContext:c}),i}const It=async e=>Object(et.c)(e),Et=async e=>{const t=await Object(et.a)(await Ct(e));if(!!tt.a.getSessionOrigin(Object(d.a)())&&await(async e=>{try{await Object(dt.g)(e,bt.d)}catch(t){console.warn(t)}try{await Object(dt.g)(e,bt.b)}catch(t){console.warn(t)}})(tt.a.getAppId(e)),await Object(dt.i)(tt.a.getAppId(e),t.chatSessionToken),!t.userPreferences){const e=await Object(dt.e)(t.chatUser.userId);return{...t,userPreferences:e}}return t},Tt=e=>{p.on(e),_(T)},xt=async()=>{_(x),y(!1),await Ke(),Object(se.a)({topic:H.b,payload:{error:!0}})};var St=n(447),wt=n(673),_t=n.n(wt);function At(e){const t=Object($e.a)();t&&t.setUser&&t.setUser({id:e.userId,username:_t()(`${e.firstName||""} ${e.lastName||""}`),email:e.email||""})}var Rt=n(315),Nt=n.n(Rt),Mt=n(401),Lt=n.n(Mt),kt=n(687),Pt=n.n(kt),Dt=n(500),Ut=n.n(Dt),Vt=n(378),Ft=n.n(Vt),Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Ht=function(e){function t(){var n,a;Bt(this,t);for(var c=arguments.length,r=Array(c),o=0;o<c;o++)r[o]=arguments[o];return n=a=zt(this,e.call.apply(e,[this].concat(r))),a.state={match:a.computeMatch(a.props.history.location.pathname)},zt(a,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:Gt({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,a=t.history;Ut()(null==n||1===Nt.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=a.listen((function(){e.setState({match:e.computeMatch(a.location.pathname)})}))},t.prototype.componentWillReceiveProps=function(e){Pt()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?Nt.a.Children.only(e):null},t}(Nt.a.Component);Ht.propTypes={history:Ft.a.object.isRequired,children:Ft.a.node},Ht.contextTypes={router:Ft.a.object},Ht.childContextTypes={router:Ft.a.object.isRequired};var Wt=Ht,$t=n(402),qt=n(316),Yt=n(320),Kt=n(1277),Zt=n(981),Qt=n(471),Jt=n.n(Qt),Xt=n(380),en=n(452),tn=n(593),nn=n(400),an=n(332);const cn=e=>Object(nn.c)(Object(an.b)(e));var rn=Nt.a.memo(e=>{const t=Object(en.a)(),n=Object(Xt.a)(),a=Object(Yt.d)(cn),c=ut.a.getVisibilityConfigFilter(n),{hasPassed:r}=Object(tn.a)(c,{logOnSuccess:!0,defaultValue:!1}),o=!r&&a;return Object(Rt.useEffect)(()=>{r&&Object(f.a)("Sprinklr Chat hidden by visibility criteria"),a||Object(f.a)("Sprinklr Chat disabled by sdk"),y(o),Object(se.a)({topic:H.c,payload:{data:{isChatVisible:o}}})},[r,a,o]),Object(Rt.useEffect)(()=>((async()=>{await Ke(),Object(se.a)({topic:H.a,payload:{}}),Object(se.a)({topic:H.b,payload:{error:!1}})})(),()=>{Object(se.a)({topic:H.c,payload:{data:{isChatVisible:!1}}})}),[]),Jt()(()=>{Ke()},[t]),o?e.children:null}),on=n(683),sn=n(523),un=n(323),ln=n(319),dn=n(328),bn=n(506),On=n(1421),jn=n(1018);function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var hn=function(e){function t(){return pn(this,t),fn(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){Ut()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){Pt()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),Pt()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,a=void 0,c=void 0;return Nt.a.Children.forEach(t,(function(t){if(null==a&&Nt.a.isValidElement(t)){var r=t.props,o=r.path,i=r.exact,s=r.strict,u=r.sensitive,l=r.from,d=o||l;c=t,a=Object(jn.a)(n.pathname,{path:d,exact:i,strict:s,sensitive:u},e.match)}})),a?Nt.a.cloneElement(c,{location:n,computedMatch:a}):null},t}(Nt.a.Component);hn.contextTypes={router:Ft.a.shape({route:Ft.a.object.isRequired}).isRequired},hn.propTypes={children:Ft.a.node,location:Ft.a.object};var gn=hn,mn=n(1020),vn=n(1019),yn=n.n(vn),Cn={},In=0,En=function(e){var t=e,n=Cn[t]||(Cn[t]={});if(n[e])return n[e];var a=yn.a.compile(e);return In<1e4&&(n[e]=a,In++),a},Tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("/"===e)return e;var n=En(e);return n(t,{pretty:!0})},xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var _n=function(e){function t(){return Sn(this,t),wn(this,e.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){Ut()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=Object(mn.a)(e.to),n=Object(mn.a)(this.props.to);Object(mn.b)(t,n)?Pt()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"===typeof n?Tn(n,t.params):xn({},n,{pathname:Tn(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(Nt.a.Component);_n.propTypes={computedMatch:Ft.a.object,push:Ft.a.bool,from:Ft.a.string,to:Ft.a.oneOfType([Ft.a.string,Ft.a.object]).isRequired},_n.defaultProps={push:!1},_n.contextTypes={router:Ft.a.shape({history:Ft.a.shape({push:Ft.a.func.isRequired,replace:Ft.a.func.isRequired}).isRequired,staticContext:Ft.a.object}).isRequired};var An=_n,Rn=n(317);const Nn=Object(Rn.a)("div",{target:"ejhhbev0"})({name:"jbngkd",styles:"display:flex;flex-direction:column;height:100%;width:100%;position:relative;"}),Mn=Object(qt.css)("@media screen and (min-width:",649,"px) and (min-height:",601,"px){border-radius:8px;}"),Ln={name:"1ih49i4",styles:"opacity:0;z-index:1;overflow:hidden;"},kn={name:"h3fsyk",styles:"opacity:1;transition:opacity 0.16s ease-in;overflow:hidden;"},Pn=Object(qt.css)(".","page-fade","-enter{",Ln,";}.","page-fade","-enter.","page-fade","-enter-active{",kn,";}.","page-fade","-exit{",kn,";}.","page-fade","-exit.","page-fade","-exit-active{",Ln,";}");var Dn=n(412),Un=n.n(Dn),Vn=n(318),Fn=n(483);const Gn=Object(Rn.a)("div",{target:"egs66bu0"})("font-size:",Object(Vn.d)("xs"),";margin:0 auto;position:absolute;top:20%;z-index:",Fn.a.SNACK_BAR,";"),Bn=Object(Rn.a)("div",{target:"egs66bu1"})("background:",Object(Vn.e)("snackBar.backgroundColor"),";color:",Object(Vn.a)("white"),";max-width:70%;border-radius:",Object(Vn.e)("snackBar.borderRadius"),"px;padding:",Object(Vn.g)("snackBar.padding"),";"),zn=Object(qt.css)(".","snackbar","-enter{transform:translateY(-20%);transition:transform 250ms ease-in;}.","snackbar","-enter-active{transform:translateY(0);}.","snackbar","-exit{transform:translateY(0);transition:transform 250ms ease-out;}.","snackbar","-exit-active{transform:translateY(-20%);}");var Hn=n(566);var Wn=()=>{const{notification:e,setNotification:t}=Object(Hn.a)(),n=Object(Rt.useRef)(),a=Object(Rt.useMemo)(()=>s()(e,"timeout")||2e3,[e]);return Object(Rt.useEffect)(()=>{e&&(window.clearTimeout(n.current),n.current=window.setTimeout(()=>{t(void 0)},a))},[e,a]),Object(qt.jsx)(Nt.a.Fragment,null,Object(qt.jsx)(qt.Global,{styles:zn}),Object(qt.jsx)(bn.CSSTransition,{classNames:"snackbar",in:Boolean(e),timeout:{enter:250,exit:250},mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(qt.jsx)(Gn,{className:"center-x-y full-width"},e?Object(qt.jsx)(Bn,{className:"text-wrap"},(c=e.message,Un()(c)?c:Object(qt.jsx)(ln.FormattedMessage,c))):null)));var c},$n=n(945),qn=n(686),Yn=n(612);const Kn=({children:e,locationKey:t})=>Object(qt.jsx)(bn.TransitionGroup,null,Object(qt.jsx)(bn.CSSTransition,{key:t,classNames:"page-fade",timeout:300},e));var Zn=()=>Object(qt.jsx)(Nt.a.Fragment,null,Object(qt.jsx)(Wn,null),Object(qt.jsx)(qt.Global,{styles:Pn}),Object(qt.jsx)(Nn,null,Object(qt.jsx)(On.a,{render:({location:e})=>Object(qt.jsx)(Kn,{locationKey:e.pathname},Object(qt.jsx)($n.a,{css:Mn},({LogoutPage:t,HomePage:n,ConversationPage:a,ConversationsListPage:c,SurveyPage:r,Error401Page:o,KnowledgeBasePage:i,KnowledgeBaseCategoriesPage:s,KnowledgeBaseArticlePage:u})=>Object(qt.jsx)(gn,{location:e},Object(qt.jsx)(On.a,{exact:!0,path:"/logout",component:t}),Object(qt.jsx)(On.a,{exact:!0,path:"/home",component:n}),Object(qt.jsx)(On.a,{exact:!0,path:"/survey/:surveyUrl",component:r}),Object(qt.jsx)(On.a,{exact:!0,path:"/knowledge-base/categories/:categoryId",component:i}),Object(qt.jsx)(On.a,{exact:!0,path:"/knowledge-base/categories/:categoryId/categories",component:s}),Object(qt.jsx)(On.a,{exact:!0,path:"/knowledge-base"},Object(qt.jsx)(An,{to:"/knowledge-base/categories/"+Yn.a})),Object(qt.jsx)(On.a,{exact:!0,path:"/knowledge-base/article/:articleId",component:u}),Object(qt.jsx)(On.a,{path:"/conversation",render:({match:e})=>Object(qt.jsx)(gn,null,Object(qt.jsx)(On.a,{exact:!0,path:e.path+"/all",component:c}),Object(qt.jsx)(On.a,{exact:!0,path:e.path+"/new/:transientConversationId?",render:e=>Object(qt.jsx)(a,Object(un.a)({},e,{pageType:qn.a.NEW}))}),Object(qt.jsx)(On.a,{exact:!0,path:e.path+"/last",render:e=>Object(qt.jsx)(a,Object(un.a)({},e,{pageType:qn.a.LAST}))}),Object(qt.jsx)(On.a,{exact:!0,path:e.path+"/:conversationId/survey/:surveyUrl",component:r}),Object(qt.jsx)(On.a,{path:e.path+"/:conversationId",render:e=>Object(qt.jsx)(a,Object(un.a)({},e,{pageType:qn.a.EXISTING}))}),Object(qt.jsx)(On.a,{render:()=>Object(qt.jsx)("div",null,"Not Found")}))}),Object(qt.jsx)(On.a,{exact:!0,path:"/401",component:o}))))}))),Qn=n(98);const Jn=Object(qt.css)("padding-top:env(safe-area-inset-top);@media screen and (min-width:",649,"px) and (min-height:",601,"px){border-radius:8px;}");var Xn=()=>Object(qt.jsx)(Nt.a.Fragment,null,Object(qt.jsx)(On.a,{render:({location:e})=>Object(qt.jsx)($n.a,{css:Jn},({LogoutPage:t,ConversationPage:n,SurveyPage:a,Error401Page:c})=>Object(qt.jsx)(gn,{location:e},Object(qt.jsx)(On.a,{exact:!0,path:"/logout",component:t}),Object(qt.jsx)(On.a,{exact:!0,path:"/home"},Object(qt.jsx)(An,{to:"/conversation/new"})),Object(qt.jsx)(On.a,{exact:!0,path:"/survey/:surveyUrl",component:a}),Object(qt.jsx)(On.a,{path:"/conversation",render:({conversationLocation:e,match:t})=>Object(qt.jsx)(gn,{location:e},Object(qt.jsx)(On.a,{exact:!0,path:t.path+"/new/:transientConversationId?",render:e=>Object(qt.jsx)(n,Object(un.a)({key:e.match.params.transientConversationId||Qn.e},e,{pageType:qn.a.NEW}))}),Object(qt.jsx)(On.a,{exact:!0,path:t.path+"/last",render:e=>Object(qt.jsx)(n,Object(un.a)({},e,{pageType:qn.a.LAST}))}),Object(qt.jsx)(On.a,{exact:!0,path:t.path+"/:conversationId/survey/:surveyUrl",component:a}),Object(qt.jsx)(On.a,{path:t.path+"/:conversationId",render:e=>Object(qt.jsx)(n,Object(un.a)({key:e.match.params.conversationId},e,{pageType:qn.a.EXISTING}))}))}),Object(qt.jsx)(On.a,{exact:!0,path:"/401",component:c})))}),Object(qt.jsx)(Wn,null)),ea=n(752),ta=n(1267),na=n(743),aa=n(465),ca=n(560);const ra=Object(Rn.a)(aa.a,{target:"e1ogxy6u0"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),oa=Object(Rn.a)("div",{target:"e1ogxy6u1"})("height:100%;width:100%;display:flex;align-items:center;justify-content:center;background-image:",Object(Vn.e)("page.gradients"),";background-color:",Object(Vn.e)("page.backgroundColor"),";"),ia=Object(Rn.a)("div",{target:"e1ogxy6u2"})("height:calc(100% - ",e=>2*Object(Vn.e)("page.minPadding",0)(e),"px);width:calc(100% - ",e=>2*Object(Vn.e)("page.minPadding",0)(e),"px);margin:",Object(Vn.e)("page.minPadding",0),"px;border-radius:",e=>Object(Vn.e)("page.minPadding")(e)?"8px":"0px",";box-shadow:0 2px 15px 0 rgba(0,0,0,0.2);overflow:hidden;background-color:",Object(Vn.a)("white"),";",e=>!e.isPhone&&!Object(ca.a)()&&"max-width: 648px;\n    max-height: 95%;",";"),sa={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"};var ua=n(324),la=n(372),da=n(792),ba=n(331),Oa=n(404),ja=n(359);const pa=e=>{const t=Object(ua.a)(),n=Object(la.a)();return Object(Rt.useEffect)(()=>(n({action:Oa.a.CONVERSATION_WINDOW_OPENED}),()=>{n({action:Oa.a.CONVERSATION_WINDOW_CLOSED})}),[]),Object(qt.jsx)(oa,null,Object(qt.jsx)(ia,{ref:e.pageBoxRef,className:"spr",isPhone:t},Object(b.A)()?Object(qt.jsx)(Xn,null):Object(qt.jsx)(Zn,null)))};var fa=Object(ln.injectIntl)(e=>{const t=Object(Rt.useRef)(),n=Object(dn.b)(),a=e.intl.formatMessage,c=Object(da.a)(),r=Object(ba.a)($t.e),o=Object(Rt.useCallback)(()=>{c(t),r()},[c,r]);return Object(qt.jsx)(Nt.a.Fragment,null,Object(qt.jsx)(ta.a,{theme:n}),Object(qt.jsx)(ra,{"aria-label":a(ja.a.liveChatBox),name:"spr-chat__page-frame",contentDidMount:o},Object(qt.jsx)(qt.Global,{styles:sa}),Object(qt.jsx)(pa,Object(un.a)({},e,{pageBoxRef:t}))),Object(qt.jsx)(na.b,{parentFrameRef:t}),Object(qt.jsx)(ea.b,null))}),ha=n(485),ga=n(350),ma=n.n(ga),va=n(1028),ya=n.n(va),Ca=n(1429),Ia=n.n(Ca);const Ea=(e,t)=>{const n=[];return ma()(e,(e,a)=>{"filters"===a?ma()(e,({filter:e,value:a})=>{l()(e)||l()(a)||n.push({field:e.field,filterType:e.fieldType||e.filterType,filters:e.filters,values:e.values,details:{...e.details,path:t,value:a}})}):n.push(...Ea(e,t?`${t}.${a}`:a))}),n};var Ta=e=>{const t=Object(Rt.useMemo)(()=>Ea(s()(e,"styleFilters"),""),[e]),n=Object(tn.a)(t),a=(({styles:e,flatFilters:t,evaluatedFilters:n})=>{const a=ya()(e);return ma()(t,(e,t)=>{n[t].hasPassed&&e.details&&Ia()(a,e.details.path,{...s()(a,e.details.path),...e.details.value})}),a})({styles:s()(e,"styles"),flatFilters:t,evaluatedFilters:n});return{...e,styles:a}};var xa=e=>{const t=Object(dn.b)(),n=Ta(t);return Object(qt.jsx)(dn.a,{theme:n},e.children)},Sa=n(932),wa=n(565),_a=n.n(wa),Aa=n(527),Ra=n(381);const Na=e=>Object(Aa.h)(e)+Object(Vn.e)("trigger.size")({theme:e})+20,Ma=Object(Rn.a)("div",{target:"emlrnqp0"})("top:",e=>e.isPhone&&"0",";bottom:",e=>e.alignWithChatTrigger?Object(Aa.h)(e.theme):Na(e.theme),"px;max-width:",e=>e.isMaximized?`calc(${Math.max(Object(Vn.e)("frame.maximizedWidth")(e),Object(Vn.e)("frame.width")(e))}px - ${Object(Aa.j)(e.theme)}px)`:`calc(${Object(Vn.e)("frame.width")(e)}px - ${Object(Aa.j)(e.theme)}px)`,";transition:max-width 200ms ease,max-height 200ms ease;min-width:200px;position:fixed;",Object(Aa.i)(),";z-index:",e=>Object(Vn.e)("frame.zIndex")(e),";padding:",e=>Object(Vn.g)("frame.margin")(e),";box-sizing:border-box;",e=>(e=>{const t=Object(Ra.c)(Object(Vn.e)("frame.marginTop")({theme:e})),n=Object(Ra.c)(Object(Vn.e)("frame.marginBottom")({theme:e})),a=Object(Ra.c)(Object(Vn.e)("frame.marginLeft")({theme:e})),c=Object(Ra.c)(Object(Vn.e)("frame.marginRight")({theme:e}));return _a()([t,n,a,c],e=>e>0)})(e.theme)&&`background-color: ${Object(Ra.e)(Object(Vn.e)("frame.overlay.opacity")(e),Object(Vn.e)("frame.overlay.backgroundColour")(e))};`,";transform:translatez(",e=>Object(Vn.e)("frame.translateZ")(e),"px);height:calc(100% - ",e=>Na(e.theme),"px - ",20,"px);width:100%;max-height:",e=>e.isMaximized?`calc(100% - ${Na(e.theme)}px - 20px)`:Object(Vn.e)("frame.height")(e),";",e=>e.isPhone&&" height: 100%;\n    width: 100vw;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    max-height: 100vh;\n    max-width: 100vw;\n    min-width: 100vw;\n  ",";"),La=Object(Rn.a)("div",{target:"emlrnqp1"})("height:100%;width:100%;position:relative;overflow:hidden;box-shadow:0 2px 15px 0 rgba(0,0,0,0.2);border-radius:",e=>Object(Vn.e)("frame.borderRadius")(e),";",e=>{const t=Object(Ra.c)(Object(Vn.e)("frame.marginTop")(e))>0?Object(Vn.e)("frame.borderRadius")(e):0,n=Object(Ra.c)(Object(Vn.e)("frame.marginBottom")(e))>0?Object(Vn.e)("frame.borderRadius")(e):0;return e.isPhone&&`\n    border-top-left-radius: ${t};\n    border-top-right-radius: ${t};\n    border-bottom-left-radius: ${n};\n    border-bottom-right-radius: ${n};\n    box-shadow: none;`},";"),ka=Object(Rn.a)(aa.a,{target:"emlrnqp2"})({name:"1l2nfdo",styles:"border:0 none;height:100%;width:100%;"}),Pa=Object(qt.css)(".","spr-chat-box-anim","-enter{opacity:0;transform:translateY(20px);}.","spr-chat-box-anim","-enter.","spr-chat-box-anim","-enter-active{opacity:1;transform:translateY(0);transition:opacity 0.16s linear,transform 0.08s linear;}.","spr-chat-box-anim","-exit{opacity:1;transform:translateY(0);}.","spr-chat-box-anim","-exit.","spr-chat-box-anim","-exit-active{opacity:0;transform:translateY(20px);transition:opacity 0.16s linear,transform 0.08s linear;}"),Da={name:"2b9rdz",styles:".frame-content{width:100%;height:100%;}.frame-root{height:100%;width:100%;}"};var Ua=n(1030),Va=n(337),Fa=n(438);const Ga=e=>Object(nn.g)(Object(an.b)(e)),Ba=Object(ln.injectIntl)(e=>{const t=Object(Yt.d)(Ga),n=e.intl.formatMessage,a=Object(Va.a)(),c=lt.a.isTriggerHiddenWhenMaximised(a),r=Object(la.a)(),o=Object(ua.a)(),i=Object(Rt.useRef)(),s=Object(da.a)(),u=Object(ba.a)($t.e),[l,d]=Object(Rt.useState)(!1),O=Object(Rt.useCallback)(e=>{d(e)},[]);Jt()(()=>{const e=t?Fa.a.CONVERSATION_WINDOW_CLOSED:Fa.a.CONVERSATION_WINDOW_OPENED;r({action:e})},[t]);const j=Object(Rt.useCallback)(()=>{s(i),u()},[s]),p=Object(Rt.useMemo)(()=>({setIsFrameMaximized:O,isFrameMaximized:l}),[O,l]);return Object(qt.jsx)(Nt.a.Fragment,null,Object(qt.jsx)(qt.Global,{styles:Pa}),Object(qt.jsx)(bn.CSSTransition,{in:!t,classNames:"spr-chat-box-anim",timeout:{enter:500,exit:500},mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(qt.jsx)(Ua.a.Provider,{value:p},Object(qt.jsx)(Ma,{className:"spr-chat__box spr-live-chat-frame",ref:e.frameRef,isPhone:o,alignWithChatTrigger:!!c,isMaximized:l},Object(qt.jsx)(La,{isPhone:o},Object(qt.jsx)(ka,{"aria-label":n(ja.a.liveChatBox),name:"spr-chat__box-frame",isPhone:o,contentDidMount:j},Object(qt.jsx)(qt.Global,{styles:Da}),Object(qt.jsx)("div",{className:"full-height full-width",ref:i},Object(b.A)()?Object(qt.jsx)(Xn,null):Object(qt.jsx)(Zn,null))))))))});var za=Nt.a.forwardRef((e,t)=>Object(qt.jsx)(Ba,{frameRef:t})),Ha=n(366),Wa=n.n(Ha),$a=n(486),qa=n(340),Ya=n(570),Ka=n.n(Ya),Za=n(797),Qa=n(440);const Ja=({prompt:e,isLocked:t})=>{if(!t)return e;const{buttons:n=Qa.a}=e;return(e=>e.length&&Ka()(e,e=>e.type!==Za.b.NEW_CONVERSATION))(n)?e:void 0};var Xa=n(336),ec=n(333);const tc=Object(qa.a)(()=>n.e(44).then(n.bind(null,1816))),nc=e=>Object(nn.f)(Object(an.b)(e)),ac=e=>Object(ec.b)(Object(ec.p)(Object(Xa.c)(e)));var cc=e=>{const t=Object(Yt.d)(an.d),n=Object(Yt.d)(nc),{isLocked:a,lockReason:c}=Object($a.a)(),r=Object(Yt.d)(ac),o=Object(Rt.useRef)();return o.current=Object(Rt.useMemo)(()=>{if(o.current){const e=o.current.id,n=Wa()(t,t=>t.id===e);if(!l()(n)){const e=Ja({prompt:n,isLocked:a});if(e)return e}}return Wa()(t,e=>{const t=Ja({prompt:e,isLocked:a});if(t)return t})},[t,a]),l()(o.current)||n||!r?(a&&Object(f.a)("Cannot initiate prompt: ",c),null):Object(qt.jsx)(Rt.Suspense,{fallback:null},Object(qt.jsx)(tc,Object(un.a)({},e,{visiblePrompt:o.current})))},rc=n(502),oc=n(748);const ic=Object(Rn.a)("div",{target:"egvnsbi0"})("display:flex;background:transparent;border-radius:",e=>Object(Vn.e)("trigger.overlayIconButton.button.height")(e)/2,"px;bottom:",e=>Object(Sa.b)(e),"px;height:",Object(Vn.e)("trigger.overlayIconButton.button.height"),"px;",e=>Object(Sa.d)({leftOffset:Object(Sa.e)(e),rightOffset:Object(Sa.e)(e)})(e),";width:",Object(Vn.e)("trigger.overlayIconButton.button.width"),"px;position:fixed;transform:translatez(",e=>Object(Vn.e)("frame.translateZ")(e),"px);"),sc=Object(Rn.a)(aa.a,{target:"egvnsbi1"})("border:0 none;border-radius:",e=>Object(Vn.e)("trigger.overlayIconButton.button.height")(e)/2,"px;box-shadow:0 2px 32px 0 rgba(0,0,0,0.15),0 1px 6px 0 rgba(0,0,0,0.09);height:100%;width:100%;"),uc=Object(Rn.a)(oc.a,{target:"egvnsbi2"})("font-size:",Object(Vn.e)("trigger.overlayIconButton.fontSize"),";height:",Object(Vn.e)("trigger.overlayIconButton.button.height"),"px;width:",Object(Vn.e)("trigger.overlayIconButton.button.width"),"px;line-height:",Object(Vn.e)("trigger.overlayIconButton.button.height"),"px;"),lc=Object(qt.css)(".","spr-chat-proactive-box-anim","-enter{opacity:0;}.","spr-chat-proactive-box-anim","-enter.","spr-chat-proactive-box-anim","-enter-active{opacity:1;transition:opacity 0.3s ease,transform 0.15s ease;}.","spr-chat-proactive-box-anim","-enter-done,.","spr-chat-proactive-box-anim","-appear{}.","spr-chat-proactive-box-anim","-exit{opacity:1;}.","spr-chat-proactive-box-anim","-exit.","spr-chat-proactive-box-anim","-exit-active{opacity:0;transition:opacity 0s ease,transform 0s ease;}"),dc=Object(Rn.a)("div",{target:"egvnsbi3"})("position:relative;z-index:",e=>Object(Vn.e)("frame.zIndex")(e),";");var bc=n(507);const Oc=Object(rc.a)(e=>Object(nn.g)(Object(an.b)(e)),e=>Object(nn.f)(Object(an.b)(e)),e=>Object(ec.w)(Object(ec.p)(Object(an.c)(e))),(e,t,n)=>({isMinimized:e,isChatTriggerHidden:t,totalUnreadCount:n}));var jc=Object(ln.injectIntl)(e=>{const{isMinimized:t,totalUnreadCount:n,isChatTriggerHidden:a}=Object(Yt.d)(Oc),c=Object(dn.b)(),r=e.intl.formatMessage;return a?null:Object(qt.jsx)(Nt.a.Fragment,null,Object(qt.jsx)(qt.Global,{styles:lc}),Object(qt.jsx)(bn.CSSTransition,{in:t,timeout:{enter:300,exit:0},classNames:"spr-chat-proactive-box-anim",mountOnEnter:!0,unmountOnExit:!0,appear:!0},Object(qt.jsx)(dc,{className:"notification-container"},Object(qt.jsx)(bc.a,{unreadCount:n,shouldPlay:!0}),n>0&&Object(qt.jsx)(ic,{className:"spr-chat__notification-box spr-live-chat-frame",theme:c},Object(qt.jsx)(sc,{name:"spr-chat__notification-frame","aria-label":r(ja.a.liveChatNotification)},Object(qt.jsx)(uc,{className:"center-x-y",count:n}))))))}),pc=n(1273);const fc=e=>"spr-cobrowse-state_"+e,hc=!!tt.a.getSessionOrigin(Object(d.a)());var gc={get:async e=>{try{const t=fc(e);if(!hc)return bt.d.getItem(t);const n=await bt.c.getItem(t);if(!n){const e=await bt.d.getItem(t);if(e)return bt.d.removeItem(t),await bt.c.setItem(t,e),e}return n}catch(t){return void console.warn(t)}},set:(e,t)=>hc?bt.c.setItem(fc(e),t):bt.d.setItem(fc(e),t),remove:e=>hc?bt.c.removeItem(fc(e)):bt.d.removeItem(fc(e))},mc=n(615),vc=n(798);const yc=Object(qa.a)(()=>Promise.all([n.e(1),n.e(18)]).then(n.bind(null,1814))),Cc={endCobrowseSession:mc.c,resumeCobrowseSession:mc.n,markCobrowseSessionFailed:mc.e};var Ic=()=>{const e=Object(Yt.d)(an.f),{endCobrowseSession:t,resumeCobrowseSession:n,markCobrowseSessionFailed:a}=Object(ba.a)(Cc),c=Object(Rt.useCallback)(()=>{t({messageId:e.messageId})},[e.messageId]),{appId:r}=Object(Rt.useMemo)(()=>Object(d.a)(),[]);return Object(Rt.useEffect)(()=>{(async()=>{const e=await gc.get(r);try{if(e){const{conversationId:t,messageId:a,agentId:c}=JSON.parse(e);n({state:{conversationId:t,messageId:a,agentId:c}})}}catch{a({reason:vc.a.RESUME_SESSION_FAILED})}})()},[n,r]),l()(e)?null:Object(qt.jsx)(Rt.Suspense,{fallback:Object(qt.jsx)(pc.a,{sessionState:e.sessionState,onStopSession:c})},Object(qt.jsx)(yc,{cobrowseState:e}))};var Ec=()=>{const e=Object(Rt.useRef)(null);return Object(qt.jsx)(Nt.a.Fragment,null,Object(qt.jsx)(cc,null),Object(qt.jsx)(Sa.a,null),Object(qt.jsx)(jc,null),Object(qt.jsx)(za,{ref:e}),Object(qt.jsx)(na.b,{parentFrameRef:e}),Object(qt.jsx)(Ic,null),Object(qt.jsx)(ea.b,null))},Tc=n(597),xc=n(569),Sc=n(742),wc=n(1011),_c=n(1009),Ac=n(658),Rc=n(799),Nc=n(1264),Mc=n(480),Lc=n(334),kc=n(1016);var Pc=Nt.a.memo(Object(ln.injectIntl)(e=>{const t=Object(Mc.a)(),n=Object(Lc.a)(),a=Object(Xt.a)(),c=Object(kc.a)(),r=Object(Rt.useMemo)(()=>({locale:e.intl.locale,messages:e.intl.messages,defaultLocale:e.intl.defaultLocale}),[e.intl]);return Object(qt.jsx)(Nc.a,{ownerDocument:window.parent.document,theme:a.otherConfigs.theme,direction:n.direction,device:t.device,skin:c,intl:r},e.children)})),Dc=n(1027),Uc=n(96),Vc=n.n(Uc);const Fc=({id:e,filters:t})=>{const n=Object(tn.a)(t);return Object(Rt.useEffect)(()=>{Object(se.a)({topic:"addFilterToEvaluate",payload:{data:{id:e,filters:t,results:re()(n)?Vc()(n,e=>e.hasPassed):n.hasPassed}}})},[n,t]),null},Gc=e=>Object(nn.b)(Object(an.b)(e)),Bc=Nt.a.memo(e=>{const t=Object(Yt.d)(Gc);return Object(qt.jsx)(Nt.a.Fragment,null,Vc()(t,(e,t)=>Object(qt.jsx)(Fc,{key:t,id:t,filters:e})),e.children)});var zc=n(365),Hc=n(568);var Wc=function({applicationConfig:e,store:t,history:n}){const a=Object(d.b)(),c=Object(b.J)()?fa:Ec,r=Object(Rt.useCallback)(e=>Object(zc.e)(Object(an.g)(t.getState()),e),[]),o=Object(Rt.useMemo)(()=>Object(Hc.a)(a.document),[a.document]);return Object(Rt.useEffect)(()=>{t.dispatch(Object($t.d)())},[t]),Object(qt.jsx)(qt.CacheProvider,{value:o},Object(qt.jsx)(Ac.a,{window:a},Object(qt.jsx)(Yt.a,{store:t},Object(qt.jsx)(Zt.b,null,Object(qt.jsx)(on.a,null,Object(qt.jsx)(sn.b.Provider,{value:e},Object(qt.jsx)(_c.a,null,Object(qt.jsx)(Bc,null,Object(qt.jsx)(rn,null,Object(qt.jsx)(xc.a,{locale:Object(d.a)().locale,applicationConfig:e},Object(qt.jsx)(Pc,null,Object(qt.jsx)(xa,null,Object(qt.jsx)(ha.b.Provider,{value:r},Object(qt.jsx)(wc.a,null,Object(qt.jsx)(Sc.b,null,Object(qt.jsx)(Kt.b,null,Object(qt.jsx)(Tc.a,null,Object(qt.jsx)(Rc.a.Provider,{value:n},Object(qt.jsx)(Wt,{history:n},Object(qt.jsx)(Dc.b,null,Object(qt.jsx)(c,null)))))))))))))))))))))},$c=n(802),qc=n(325),Yc=n(1268),Kc=n(1265),Zc=n(1278),Qc=n(472),Jc=n(403),Xc=n(451),er=n(418);function tr(e){return e.type===Pe.d}function nr(e){return e.type===Pe.c}function ar(e){return e.type===Pe.b}function cr(e){return e.type===Pe.e}function rr(e){return e.type===Pe.f}function*or(e){try{yield Object(qc.b)(e.filter(tr).map(e=>Object(qc.h)(Object(Qc.n)({conversationId:e.payload.conversationId,videoConversationId:e.payload.videoConversationId,participantInfos:e.payload.participantInfos,type:e.payload.type}))))}catch(t){Object($e.b)(t)}}function*ir(e){try{yield Object(qc.b)(e.filter(nr).map(e=>Object(qc.h)(Object(Qc.l)({notifyAgent:!1,videoConversationId:e.payload.videoConversationId}))))}catch(t){Object($e.b)(t)}}function*sr(e){try{const t=yield Object(qc.j)(Xa.b),n=Object(er.g)(t);yield Object(qc.b)(e.filter(cr).map(e=>n.videoConversationId===e.payload.videoConversationId?Object(qc.h)(Object(Qc.i)({videoConversationId:e.payload.videoConversationId,reason:Xc.d.AGENT_ASSIGNMENT_FAILED})):Object(qc.h)(Object(Qc.l)({notifyAgent:!1,videoConversationId:e.payload.videoConversationId}))))}catch(t){Object($e.b)(t)}}function*ur(e){try{yield Object(qc.b)(e.filter(ar).map(e=>Object(qc.h)(Object(Qc.i)({videoConversationId:e.payload.videoConversationId,reason:Xc.d.AGENT_ASSIGNMENT_FAILED}))))}catch(t){Object($e.b)(t)}}function*lr(e){try{yield Object(qc.b)(e.filter(rr).map(e=>Object(qc.h)(Object(Qc.u)({videoConversationId:e.payload.videoConversationId,callInfo:{conversation:e.payload.conversation,participant:e.payload.participant}}))))}catch(t){Object($e.b)(t)}}function*dr(e){try{const{events:t}=e.payload;yield Object(qc.b)([Object(qc.c)(ir,t),Object(qc.c)(or,t),Object(qc.c)(ur,t),Object(qc.c)(lr,t),Object(qc.c)(sr,t)])}catch(t){Object($e.b)(t)}}function*br(){try{yield Object(qc.m)(Jc.l,dr)}catch(e){Object($e.b)(e)}}var Or=n(362),jr=n(410),pr=n.n(jr),fr=n(785),hr=n(509);function gr({videoConversationId:e,shouldWaitForConnection:t}){return Or.__awaiter(this,void 0,void 0,(function*(){return(yield hr.a.post(`video-chat/conversation/accept/${e}?shouldWaitForConnection=${t}`)).data}))}function mr({videoConversationId:e}){return Or.__awaiter(this,void 0,void 0,(function*(){return hr.a.post("video-chat/conversation/leave/"+e)}))}function vr({conversationId:e,audioOnly:t,messageText:n,sourceButtonId:a,postBackChatMessageId:c,shouldWaitForConnection:r,videoConversationId:o,activityEventType:i}){return Or.__awaiter(this,void 0,void 0,(function*(){return(yield hr.a.post("video-chat/conversation/initiate/"+e,{audioOnly:t,messageText:n,clickedButtonId:a,postBackChatMessageId:c,shouldWaitForConnection:r,videoChatConversationId:o,activityEventType:i})).data}))}function yr(e){return Or.__awaiter(this,void 0,void 0,(function*(){return(yield hr.a.get("video-chat/conversation/participant/connected/"+e)).data}))}function Cr(e){return Or.__awaiter(this,void 0,void 0,(function*(){return(yield hr.a.get("video-chat/conversation/fetch/ongoing/conversation?caseId="+e)).data}))}var Ir=n(335),Er=n(371),Tr=n(811),xr=n(807);function*Sr(e){try{const{notifyAgent:t,isIncomingCall:n,callDetails:a,videoConversationId:c}=e.payload;if(!t)return;if(!n&&!a.hasInitiateSucceeded&&a.state===Xc.e.WAITING){if((yield Object(qc.l)(e=>(e.type===fr.v||e.type===fr.o)&&s()(e,"payload.videoConversationId")===c)).type===fr.o)return}if(n&&a.state===Xc.c.ACCEPTED){if((yield Object(qc.l)(e=>(e.type===fr.k||e.type===fr.h)&&s()(e,"payload.videoConversationId")===c)).type===fr.h)return}yield Object(qc.c)(mr,{videoConversationId:c})}catch(t){Object($e.b)(t)}}function*wr(e){try{e.payload.isOutgoingWaiting&&(yield Object(qc.c)(Sr,e)),yield Object(qc.h)({type:Oe.Z,payload:{text:e.payload.text,sender:e.payload.sender,conversationId:e.payload.conversationId}})}catch(t){Object($e.b)(t)}}function*_r(e){try{const{actionParams:{messageId:t,actionId:n},conversationId:a}=e.payload,c=yield Object(qc.j)(Xa.b),r=Object(er.g)(c),o=r.messageId;if(o&&t===o&&n!==r.sourceButtonId){const e=yield Object(qc.j)(Xa.c),n=Object(ec.j)(Object(ec.l)(e,a),t);Er.a.getAttachment(Ir.a.getMessagePayload(n)).reSubmittable||(yield Object(qc.h)(Object(Qc.l)({notifyAgent:!0,callDetails:r,videoConversationId:r.videoConversationId})))}}catch(t){Object($e.b)(t)}}function*Ar(e){try{yield Object(qc.h)(Object(Qc.p)({conversationId:e.payload.conversationId,controls:Object(Tr.e)(e.payload.isPhone),type:e.payload.type,messageText:e.payload.messageText,messageId:e.payload.messageId,sourceButtonId:e.payload.sourceButtonId,videoConversationId:pr.a.v4()}))}catch(t){Object($e.b)(t)}}function*Rr(e){try{const{videoConversationId:t}=e.payload;yield Object(qc.h)(Object(Qc.b)({videoConversationId:t,controls:Object(Tr.e)(e.payload.isPhone)})),yield Object(qc.c)(gr,{videoConversationId:t,shouldWaitForConnection:!0}),yield Object(qc.h)(Object(Qc.t)({videoConversationId:t}))}catch(t){if(Object($e.b)(t),Object(St.f)(t)){const n=s()(t,"response.data.error");yield Object(qc.h)(Object(Qc.d)({videoConversationId:e.payload.videoConversationId,reason:"CALL_ALREADY_ENDED"===n?Xc.b.ACCEPT_FAILED_DUE_TO_CALL_END:Xc.b.ACCEPT_FAILED_DUE_TO_OTHER_REASONS}))}}}function*Nr(e){try{yield Object(qc.h)(Object(Qc.f)({videoConversationId:e.payload.videoConversationId}))}catch(t){Object($e.b)(t)}}function*Mr(e){try{yield Object(qc.h)(Object(Qc.k)({videoConversationId:e.payload.videoConversationId}))}catch(t){Object($e.b)(t)}}function*Lr(e){let t;try{const{videoConversationId:n}=e.payload,a=yield Object(qc.j)(Xa.b),c=Object(er.g)(a),r=c.messageId,o=c.conversationId,i=Object(er.k)(a,n);if(yield Object(qc.h)(Object($t.c)({conversationId:o,action:i?Oa.a.AUDIO_CALL_OUTGOING_STARTING:Oa.a.VIDEO_CALL_OUTGOING_STARTING})),r){const e=yield Object(qc.j)(Xa.c);t=Object(ec.j)(Object(ec.l)(e,o),r),yield Object(qc.c)(xr.b,{chatMessage:t,conversationId:o,params:{buttonId:c.sourceButtonId}})}const s=yield Object(qc.c)(vr,{conversationId:o,audioOnly:i,messageText:c.messageText,sourceButtonId:c.sourceButtonId,postBackChatMessageId:r,shouldWaitForConnection:!0,videoConversationId:n,activityEventType:"CALL_STARTED"});yield Object(qc.h)(Object(Qc.w)({agentWaitTime:s.conversation.agentWaitTime,videoConversationId:s.conversation.id}))}catch(n){t&&(yield Object(qc.h)({type:Oe.I,payload:{chatMessage:t,conversationId:e.payload.conversationId}})),Object($e.b)(n),Object(St.f)(n)&&(yield Object(qc.h)(Object(Qc.i)({videoConversationId:e.payload.videoConversationId,reason:Xc.d.INITIATE_FAILED})))}}function*kr(e){try{const{conversationId:n,type:a,isPhone:c,prevState:r,videoConversationId:o}=e.payload,i=yield Object(qc.j)(Xa.b),u=Object(er.d)(i),d=s()(u,"state")===Xc.c.FAILED;if(Object(Tr.f)({callDetails:u,rejoiningVideoConversationId:o}))return;d&&(yield Object(qc.h)(Object(Qc.l)({notifyAgent:!1,videoConversationId:o,callDetails:u,isIncomingCall:!0})));const b=a===Xc.a.AUDIO,O=Object(Tr.b)(r);yield Object(qc.h)(Object($t.c)({conversationId:n,action:Object(Tr.c)(b,O)})),yield Object(qc.h)(Object(Qc.q)({conversationId:n,videoConversationId:o,state:O?Xc.c.ACCEPTED:Xc.c.SETUP,controls:Object(Tr.e)(c),type:a}));const j=yield Object(qc.c)(Cr,n);if(l()(j))return yield Object(qc.h)(Object(Qc.d)({videoConversationId:o,reason:Xc.b.REJOINING_FAILED_DUE_TO_CALL_END,prevState:r}));const{conversation:p}=j;if(O){try{yield Object(qc.c)(gr,{videoConversationId:p.id,shouldWaitForConnection:!0})}catch(t){if(Object($e.b)(t),Object(St.f)(t)){const e=s()(t,"response.data.error");return yield Object(qc.h)(Object(Qc.d)({videoConversationId:o,reason:"CALL_ALREADY_ENDED"===e?Xc.b.ACCEPT_FAILED_DUE_TO_CALL_END:Xc.b.ACCEPT_FAILED_DUE_TO_OTHER_REASONS,prevState:r}))}}yield Object(qc.h)(Object(Qc.t)({videoConversationId:p.id}))}}catch(t){if(Object($e.b)(t),Object(St.f)(t))return yield Object(qc.h)(Object(Qc.d)({videoConversationId:e.payload.videoConversationId,reason:Xc.b.REJOINING_FAILED_DUE_TO_OTHER_REASONS,prevState:e.payload.prevState}))}}function*Pr(e){try{const{conversationId:t,type:n,isPhone:a,prevState:c,videoConversationId:r}=e.payload,o=yield Object(qc.j)(Xa.b),i=Object(er.d)(o),u=s()(i,"state")===Xc.e.FAILED;if(Object(Tr.f)({callDetails:i,rejoiningVideoConversationId:r}))return;u&&(yield Object(qc.h)(Object(Qc.l)({notifyAgent:!1,videoConversationId:r,callDetails:i})));const d=n===Xc.a.AUDIO;yield Object(qc.h)(Object($t.c)({conversationId:t,action:Object(Tr.c)(d)})),yield Object(qc.h)(Object(Qc.r)({conversationId:t,videoConversationId:r,state:Object(Tr.d)(c),controls:Object(Tr.e)(a),type:n}));const b=yield Object(qc.c)(Cr,e.payload.conversationId);if(l()(b))return yield Object(qc.h)(Object(Qc.i)({videoConversationId:r,reason:Xc.d.REJOINING_FAILED_DUE_TO_CALL_END,prevState:c}));const{conversation:O}=b;yield Object(qc.h)(Object(Qc.s)({videoConversationId:O.id,agentWaitTime:O.agentWaitTime}))}catch(t){if(Object($e.b)(t),Object(St.f)(t))return yield Object(qc.h)(Object(Qc.i)({videoConversationId:e.payload.videoConversationId,reason:Xc.d.REJOINING_FAILED_DUE_TO_OTHER_REASONS,prevState:e.payload.prevState}))}}function*Dr(e){try{const t=e.payload,{isIncomingCall:n}=t,a=Or.__rest(t,["isIncomingCall"]);n?yield Object(qc.h)(Object(Qc.e)(a)):yield Object(qc.h)(Object(Qc.j)(a))}catch(t){Object($e.b)(t)}}function*Ur(e){try{yield Object(qc.c)(yr,e.payload.videoConversationId)}catch(t){Object($e.b)(t)}}function*Vr(){try{yield Object(qc.m)(fr.e,Rr),yield Object(qc.m)(fr.g,Nr),yield Object(qc.m)(fr.n,Mr),yield Object(qc.m)(fr.b,Sr),yield Object(qc.m)(fr.m,Ar),yield Object(qc.m)(fr.u,Lr),yield Object(qc.m)(fr.c,wr),yield Object(qc.m)(fr.w,Dr),yield Object(qc.m)(fr.j,kr),yield Object(qc.m)(fr.r,Pr),yield Object(qc.m)(Oe.c,_r),yield Object(qc.m)(fr.x,Ur)}catch(e){Object($e.b)(e)}}function*Fr(){yield Object(qc.b)([Object(qc.g)(br),Object(qc.g)(Vr)])}function Gr(e){return e.type===Pe.l}function*Br(){const e=yield Object(qc.j)(Xa.f);return l()(e)||(yield Object(qc.h)(Object(mc.g)())),null}function*zr(e){try{const{events:t}=e.payload;yield Object(qc.b)(t.filter(Gr).map(e=>{const{status:t}=e.payload;return"LIVE"===t?Object(qc.c)(Br):"COMPLETED"===t?Object(qc.h)(Object(mc.c)({endedByAgent:!0})):null}))}catch(t){Object($e.b)(t)}}function*Hr(){yield Object(qc.m)(Jc.l,zr)}var Wr=n(1284);function*$r(){yield Object(qc.b)([Object(qc.g)(Wr.a),Object(qc.g)(Hr)])}function qr(e){return e.type===Pe.a}function*Yr(e){yield Object(qc.b)(e.filter(qr).map(e=>Object(qc.h)({type:"@commerce/ADD_TO_CART",payload:e.payload})))}function*Kr(e){try{const{events:t}=e.payload;yield Object(qc.b)([Object(qc.c)(Yr,t)])}catch(t){Object($e.b)(t)}}function*Zr(){yield Object(qc.m)(Jc.l,Kr)}const Qr=new(n(951).a),Jr=e=>Or.__awaiter(void 0,void 0,void 0,(function*(){const{httpMethod:t="GET",httpUrl:n="",httpPayload:a=mt.a,actionIdentifier:c,requestId:r}=e.params;let o,i;try{const l="POST"===t||"PUT"===t?yield Qr[t.toLowerCase()](n,a,{withCredentials:!0}):yield Qr[t.toLowerCase()](n,{withCredentials:!0});o=l.request.status,i=l.request.responseText}catch(l){Object($e.b)(l),Object(St.f)(l)?(o=l.request.status,i=l.request.responseText):(o=500,i="")}finally{yield(s={status:o,responseText:i,actionIdentifier:c,requestId:r},u=e.conversationId,hr.a.post("/livechat/cart/on-add-to-cart/"+u,s))}var s,u})),Xr=e=>hr.a.post("/livechat/cart/update-cart",e),eo=e=>hr.a.post("/livechat/cart/remove-from-cart",e);function*to(e){try{const{type:t,params:n,conversationId:a}=e.payload;"HTTP_REQUEST"===t&&(yield Object(qc.c)(Jr,{params:n,conversationId:a}))}catch(t){Object($e.b)(t)}}function*no(){yield Object(qc.m)("@commerce/ADD_TO_CART",to)}const ao={presence:!0,format:{pattern:"^(?!\\s*$).+",message:"can only be non-empty string"}},co={modifiedTime:{type:"number"},productItems:{array:{each:{sku:ao,productCategory:{type:"string"},quantity:{type:"number"},standardPrice:{type:"number"},standardCurrency:{type:"string"},title:{type:"string"},description:{type:"string"}}}}},ro={modifiedTime:{type:"number"},productItems:{array:{each:{sku:ao,quantity:{type:"number"}}}}};function*oo(e){try{const n=(t=e.payload,we()(t,co));if(n)return void Object(f.a)("Invalid payload passed to update cart, please check",n);yield Object(qc.c)(Xr,e.payload)}catch(n){Object($e.b)(n)}var t}function*io(){yield Object(qc.m)("@commerce/UPDATE_CART",oo)}function*so(e){try{const n=(t=e.payload,we()(t,ro));if(n)return void Object(f.a)("Invalid payload passed to remove from cart, please check",n);yield Object(qc.c)(eo,e.payload)}catch(n){Object($e.b)(n)}var t}function*uo(){yield Object(qc.m)("@commerce/REMOVE_FROM_CART",so)}function*lo(){yield Object(qc.b)([Object(qc.g)(Zr),Object(qc.g)(no),Object(qc.g)(io),Object(qc.g)(uo)])}var bo=n(389);function*Oo(){try{yield Object(qc.b)([Object(qc.g)(Yc.a),Object(qc.g)(Kc.a),Object(qc.g)(Zc.a),Object(qc.g)(Fr),Object(qc.g)($r),Object(qc.g)(lo)])}catch(e){Object($e.b)(e)}}function*jo(){try{const e=yield Object(qc.g)(Oo);yield Object(qc.l)(bo.c),yield Object(qc.d)(e)}catch(e){Object($e.b)(e)}}var po=n(37),fo=n.n(po),ho=n(351),go=n(405),mo=n(521);function vo(e,t){const n=Object(jn.a)(e,{path:"/conversation/:conversationId/:transientId?"});if(!n)return{};const a=s()(n.params,"conversationId"),c=s()(n.params,"transientId");return"all"===a?{isConversationPath:!1,matchedConversationId:void 0}:"new"===a?{isConversationPath:!0,matchedConversationId:t?t.slice(1):c}:{isConversationPath:!0,matchedConversationId:a}}var yo=n(947);function*Co(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=Object(zc.d)(yield Object(qc.j)(an.g)),c=yield Object(qc.j)(an.c),r=Object(ec.f)(c.conversations,t);if(r){const e=Vc()(r.defaultMessages,"id"),c=Ir.a.getId(n);if(e.includes(c))return void(yield Object(qc.h)({type:Oe.O,payload:{conversationId:t,lastReadMessageId:c}}));if(function(e,t){return!(Ir.a.getSender(e)===t)&&!Object(go.f)(e)}(n,a)){const{isConversationPath:e,conversationId:n}=yield Object(qc.j)(mo.e),a=yield Object(qc.j)(an.b),{isMinimized:c}=a,o=Object(de.a)(),i=!!e,s=!l()(r);(Object(b.A)()?s&&t===n:s)&&(yield Object(qc.h)({type:Oe.P,payload:{conversationId:t,count:1}}),c&&!i&&o.push("/conversation/"+t))}}}catch(t){Object($e.b)(t)}}function*Io(){yield Object(qc.m)(Oe.D,Co)}function*Eo(e){try{window.open(Object(jt.b)(e.payload.url)),e.promise.resolve()}catch(t){e.promise.reject(),Object($e.b)(t)}}function*To(){yield Object(qc.m)(Oe.Q,Eo)}function*xo(e){try{window.open(Object(jt.a)(e.payload.phoneNumber)),e.promise.resolve()}catch(t){e.promise.reject(),Object($e.b)(t)}}function*So(){yield Object(qc.m)(Oe.p,xo)}function*wo(e){const{surveyUrl:t,shouldReplace:n,conversationId:a}=e.payload,c=Object(de.a)(),r=Object(b.A)()||Object(b.E)()?t+"&showCancel=true":t,o="/survey/"+encodeURIComponent(r+"&hideThankYouPage=true");return n?c.replace(o):c.push(a?`/conversation/${a}${o}`:o)}function*_o(){yield Object(qc.m)(Oe.U,wo)}function*Ao(e){const{deleted:t,closed:n,surveyUrl:a,conversationId:c}=e.payload;try{if(t||n){const e=Object(de.a)(),{matchedConversationId:n}=vo(e.location.pathname,e.location.hash),r=t&&c&&n===c&&!Object(b.A)();a?yield Object(qc.h)(Object(ho.n)({surveyUrl:a,shouldReplace:r,conversationId:c})):r&&e.goBack()}}catch(r){Object($e.b)(r)}}function*Ro(){yield Object(qc.m)(Oe.j,Ao)}function*No(){try{const{payload:{applicationConfig:e,handshakeDetails:t}}=yield Object(qc.l)(bo.a);if(t){if(Object(b.D)()){const e=Object(b.g)();yield Object(qc.h)(Object(ho.b)(e))}if(Object(b.C)()){const e=Object(b.f)(),t=Object(b.c)(e);yield Object(qc.h)(Object(ho.a)(e,t,Object(Ot.a)()))}yield Object(qc.f)(1e3),yield Object(qc.h)(Object(ho.g)())}}catch(e){Object($e.b)(e)}}function*Mo(e){try{const{payload:t,promise:n}=e,{conversationId:a}=t;yield Object(qc.c)(yo.b,a),n&&n.resolve()}catch(t){e.promise&&e.promise.reject(),Object($e.b)(t)}}function*Lo(){yield Object(qc.m)(Oe.o,Mo)}function*ko(e){try{const t=yield Object(qc.j)(an.g),n=Object(zc.d)(t),a=yield Object(qc.j)(an.c),c=((e,t,n)=>{if(n){const a=Object(mo.d)(e[n],t);return a?[{conversationId:n,count:a}]:[]}return fo()(e,(e,n)=>{const a=Object(mo.d)(n,t);return a&&e.push({conversationId:n.id,count:a}),e},[])})(Object(ec.p)(a).byId,n,e);l()(c)||(yield Object(qc.h)({type:Oe.N,payload:c}))}catch(t){console.warn(t)}}function*Po(){if(Object(b.A)()){if(Object(b.G)())for(;;){yield Object(qc.l)(Oe.g);const{conversationId:e}=yield Object(qc.j)(mo.e);yield Object(qc.c)(ko,e)}if(Object(b.D)()||Object(b.C)()){yield Object(qc.i)([Object(qc.l)(Oe.t),Object(qc.l)(Oe.u),Object(qc.l)(Oe.w),Object(qc.l)(Oe.x)]);const{conversationId:e}=yield Object(qc.j)(mo.e);return void(yield Object(qc.c)(ko,e))}}else{if(Object(b.D)()||Object(b.C)())return yield Object(qc.b)([Object(qc.i)([Object(qc.l)(Oe.t),Object(qc.l)(Oe.w),Object(qc.l)(Oe.u),Object(qc.l)(Oe.x)]),Object(qc.l)(Oe.g)]),void(yield Object(qc.c)(ko));if(Object(b.I)()||Object(b.F)()||Object(b.G)())for(;;)yield Object(qc.l)(Oe.g),yield Object(qc.c)(ko)}}function*Do(){yield Object(qc.b)([Object(qc.g)(No),Object(qc.g)(Io),Object(qc.g)(To),Object(qc.g)(So),Object(qc.g)(Lo),Object(qc.g)(_o),Object(qc.g)(Ro),Object(qc.g)(Po)])}var Uo=n(609),Vo=n(510),Fo=n(503);function*Go({action:e}){try{const n=e.payload;if((t=n).type!==Fo.h&&t.type!==Fo.i)return;const a=yield Object(qc.j)(an.c),c=Object(ec.d)(Object(ec.v)(a));n.type===Fo.h&&(yield Object(qc.c)(dt.j,n.payload.contextId||c,n.payload.abortedProcessContext,[])),n.type===Fo.i&&(yield Object(qc.c)(dt.h,n.payload.contextId||c))}catch(n){Object($e.b)(n)}var t}function*Bo(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=yield Object(qc.c)(dt.d,t);if(a){const e=Er.a.getAttachment(Ir.a.getMessagePayload(n));if(Object(gt.c)(Ir.a.getSender(n))&&e&&Object(Uo.c)(e)){const e=Ir.a.getId(n),c=a.messageIds;yield Object(qc.c)(dt.j,t,a.context,[...c,e])}}}catch(t){Object($e.b)(t)}}function*zo(e){try{const{conversationId:t,chatMessage:n}=e.payload,a=yield Object(qc.c)(dt.d,t);a&&(yield Object(qc.c)(dt.j,t,a.context,[]))}catch(t){Object($e.b)(t)}}function*Ho(){yield Object(qc.m)(Oe.D,Bo)}function*Wo(){yield Object(qc.m)(Oe.G,zo)}function*$o(e){try{const t=yield Object(qc.c)(dt.d,e);t&&(yield Object(qc.b)(t.messageIds.map(e=>Object(qc.c)(Vo.n,e))),yield Object(qc.c)(Vo.t,{context:t.context,conversationId:e}),yield Object(qc.c)(dt.h,e))}catch(t){Object($e.b)(t)}}function*qo(e){try{const{results:t}=e.payload.conversationResponse;yield Object(qc.b)(t.map(e=>Object(qc.c)($o,e.id)))}catch(t){Object($e.b)(t)}}function*Yo(){yield Object(qc.m)(Oe.g,qo)}function*Ko(){yield Object(qc.b)([Object(qc.g)(Ho),Object(qc.g)(Wo),Object(qc.g)(Yo)])}var Zo=n(417),Qo=n.n(Zo),Jo=n(449),Xo=n.n(Jo),ei=n(450),ti=n.n(ei),ni=n(367),ai=n.n(ni),ci=n(358),ri=n.n(ci),oi=n(427),ii=n(808),si=n(771),ui=n(810);function*li(){try{const e=yield Object(qc.j)(an.b),{isMinimized:t}=e;t&&(yield Object(qc.h)({type:F.d,payload:{}}))}catch(e){Object($e.b)(e)}}function*di(){try{const e=yield Object(qc.j)(an.c),t=Object(ec.d)(Object(ec.v)(e)),n=yield Object(qc.c)(de.a),a="/conversation/"+t;a!==n.location.pathname&&n.push(a),yield Object(qc.c)(li)}catch(e){Object($e.b)(e)}}function*bi(){try{yield Object(qc.l)(Oe.g),yield Object(qc.c)(di)}catch(e){Object($e.b)(e)}}function*Oi({initialMessages:e,conversationContext:t,createCase:n,additional:a,assignToUser:c,conversationId:r}){try{const o=yield Object(qc.j)(an.g),i=Object(zc.d)(o);let s,u;const d=ti()(e,e=>{const t=Un()(e)?e:e.message;return!l()(_t()(t))});if(!l()(d)||l()(e)&&re()(e)){const e=(e=>e.map(e=>Un()(e)?{message:{text:e},isSentByUser:!1}:Un()(e.message)?{...e,message:{text:e.message}}:e))(d);s=Qo()(e.map((e,t)=>e.isSentByUser?oi.a.makeOutgoing().makeTextMessage({text:e.message.text||"",conversationId:r,sender:i,disableManualResponse:e.message.disableManualResponse}):Object(ii.b)(e.message.text,r,""+t,e.message.disableManualResponse))),u=!0}else{const e=yield Object(qc.j)(an.c),t=Object(ec.l)(e,Qn.e);s=Object(ec.k)(t),u=Object(ec.x)(t)}yield Object(qc.h)({type:Oe.J,payload:{conversationId:r,messages:s,conversationContext:t,hasInitialItems:u,createCase:n,assignToUser:c,additional:a}})}catch(o){Object($e.b)(o)}}function*ji(e,t){const{payload:{silent:n},promise:a}=t;try{let c=yield Object(qc.j)(e=>e);const r=ut.a.getCustomizationConfig(e),o=(e,t)=>s()(e,t),i=Object(ec.p)(Object(an.c)(c));ri()(Object(ec.u)(i))&&(yield Object(qc.h)({type:Oe.B,payload:{}}),yield Object(qc.l)(Oe.ab),c=yield Object(qc.j)(e=>e));const{isLocked:u}=Object(mo.f)(c,r,o);if(u){if(!n){const e=Object(ec.b)(i);yield Object(qc.c)(e?di:bi)}throw ui.a.LIMIT_REACHED}const l=`${Qn.e}_${Xo()()}`;if(yield Object(qc.c)(Oi,{...t.payload,conversationId:l}),yield Object(qc.h)({type:Oe.K,payload:{conversationId:l,appContext:Object(Ot.a)()},promise:a}),!n){const e=Object(de.a)(),{isConversationPath:t}=vo(e.location.pathname,e.location.hash),n="/conversation/new/"+l;!!t?e.replace(n):e.push(n),yield Object(qc.c)(li)}}catch(c){a&&a.reject(Object(ii.a)(c)),Object($e.b)(c)}}function*pi(e){const{payload:t,promise:n}=e;let a;try{const e=yield Object(qc.j)(an.c),c=Object(ec.p)(e);if(a=t.conversationId||Object(ec.d)(Object(ec.v)(e)),!a)return void(n&&n.reject(ui.a.NOT_FOUND));const r=Object(de.a)(),{isConversationPath:o,matchedConversationId:i}=vo(r.location.pathname,r.location.hash),u=!!o,d="/conversation/"+a;let O=a,j=[];if(i!==a){if(Object(b.y)(a)){const e=Object(b.d)(a),t=Object(b.c)(e),n=Object(ec.i)(c,e);O=t,ai()(c.ids,n)||(yield Object(qc.h)(Object(ho.a)(e,t,Object(Ot.a)())),j=[Oe.t,Oe.u])}else ai()(c.ids,a)||(yield Object(qc.h)(Object(ho.b)(a)),j=[Oe.w,Oe.x]);for(;!l()(j);){const[e,t]=yield Object(qc.i)([Object(qc.l)(j[0]),Object(qc.l)(j[1])]);if(O===(s()(e,"payload.conversationResponse.id")||s()(t,"payload.conversationId"))){if(t)throw t.payload.error;break}}}u?r.replace(d):r.push(d),yield Object(qc.c)(li),n&&n.resolve(a)}catch(c){Object($e.b)(c),n&&n.reject(Object(ii.a)(c))}finally{(yield Object(qc.e)())&&n&&n.reject(ui.a.UNEXPECTED_ERROR)}}function*fi(){try{const{payload:{applicationConfig:e}}=yield Object(qc.l)($c.a);yield Object(qc.m)(si.c,ji,e)}catch(e){Object($e.b)(e)}}function*hi(){try{yield Object(qc.n)(si.a,pi)}catch(e){Object($e.b)(e)}}var gi=n(520),mi=n(349),vi=n(680);const yi={[mi.b.PROGRESS_BAR]:e=>{const t=Ir.a.getMessagePayload(e).attachment;return t.status===vi.a.ABORTED||t.status===vi.a.ERROR}},Ci=e=>{const t=Ir.a.getMessagePayload(e).attachment,n=t&&yi[t.type];return n&&n(e)};var Ii=n(487);class Ei{constructor(){this.queueItems=void 0,this.queueItems=[]}isEmpty(){return 0===this.queueItems.length}put(e){const t=q()(this.queueItems,t=>Ir.a.getId(e.message)===Ir.a.getId(t.message));-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}take(){return this.queueItems.shift()}}function*Ti(e){try{const{message:t,externalMessageId:n}=e,a=yield Object(qc.c)(Ii.b,t);a&&(yield Object(qc.h)({type:"EXTERNAL_MESSAGE_SEND",payload:{id:n,message:a}}))}catch(t){Object($e.b)(t)}}function*xi(e){try{for(;;){const t=yield Object(qc.l)(e);Ci(t.message)||(yield Object(qc.c)(Ti,t))}}catch(t){Object($e.b)(t)}}let Si;function*wi(e){try{Si||(Si=yield Object(qc.c)(gi.b,new Ei),yield Object(qc.k)(xi,Si));const t=yield Object(qc.j)(an.c),n=Object(ec.d)(Object(ec.v)(t)),a=yield Object(qc.j)(an.g),c=Object(zc.d)(a),r=oi.a.makeOutgoing().makeDynamicMessage({externalMessageId:e.id,messageId:e.sprMsgId,messagePayload:e.message,conversationId:e.contextId||n,messageContext:e.messageContext,sender:e.isSentByUser?c:Qn.b});if(!r)return;const o={externalMessageId:e.id,message:r};!e.sprMsgId||Ci(r)?yield Object(qc.g)(Ti,o):yield Object(qc.h)(Si,o);const{payload:{id:i,message:s}}=yield Object(qc.l)("EXTERNAL_MESSAGE_SEND");return{id:i,message:s}}catch(t){return void Object($e.b)(t)}}var _i=n(421);function*Ai({action:e}){try{if(e.payload.type!==Fo.d)return;const{id:t,message:n}=yield Object(qc.c)(wi,e.payload.payload);yield Object(qc.h)(Object(_i.l)({id:t,conversationId:Ir.a.getConversationId(n),messageId:Ir.a.getId(n)}))}catch(t){Object($e.b)(t)}}var Ri=n(439),Ni=n.n(Ri);function*Mi({action:e}){try{if(e.payload.type!==Fo.c)return;const{payload:t}=e.payload,n=oi.a.makeOutgoing().makeDynamicMessage({externalMessageId:t.id,messagePayload:{events:Ni()(t.event)},conversationId:t.contextId,sender:Qn.b});if(!n)return;yield Object(qc.c)(Ii.b,n)}catch(t){Object($e.b)(t)}}var Li=n(613),ki=n.n(Li),Pi=n(1439),Di=n.n(Pi);const Ui=/\$\{(\w+)\}/g,Vi=(e,t)=>Di()(e,Ui,(e,n)=>t[n]?t[n]:e),Fi=(e,t)=>{const{totalUnits:n,completedUnits:a,action:c,status:r}=t,o=e[`progress.${c}.${r}.title`];return Vi(o,{completedUnits:a,totalUnits:n})},Gi=(e,t)=>{const{totalUnits:n,completedUnits:a,action:c,status:r}=t,o=e[`progress.${c}.${r}.description`];return Vi(o,{completedUnits:a,totalUnits:n})};class Bi{constructor(){this.queueItems=void 0,this.queueItems=[]}isEmpty(){return 0===this.queueItems.length}put(e){const t=q()(this.queueItems,t=>e.contextId===t.contextId);-1!==t&&this.queueItems.splice(t,1),this.queueItems.push(e)}take(){return this.queueItems.shift()}}const zi=(e,t)=>`${e}_${t}`,Hi=ki()(()=>{const e={};return{get:t=>e[t],set:(t,n)=>{e[t]=n},remove:t=>{delete e[t]}}});function*Wi(e){for(;;)try{const{contextId:n,id:a,message:c,messageContext:r}=yield Object(qc.l)(e),o=c.attachment,{id:i,message:s}=yield Object(qc.c)(wi,{contextId:n,id:a,sprMsgId:Hi().get(zi(n,o.action)),message:c,messageContext:r});yield Object(qc.h)(Object(_i.m)({id:i,conversationId:Ir.a.getConversationId(s),messageId:Ir.a.getId(s)})),(t=o).status!==vi.a.COMPLETED&&(t.status!==vi.a.ABORTED&&t.status!==vi.a.ERROR||t.enableRetry)?Hi().set(zi(n,o.action),Ir.a.getId(s)):Hi().remove(zi(n,o.action))}catch(n){Object($e.b)(n)}var t}let $i;function*qi({action:e,localeData:t}){try{if(e.payload.type!==Fo.f)return;$i||($i=yield Object(qc.c)(gi.b,new Bi),yield Object(qc.k)(Wi,$i));const{payload:{contextId:n,id:a,progressContext:c,data:r}}=e.payload;yield Object(qc.h)($i,{contextId:n,id:a,message:{attachment:{type:mi.b.PROGRESS_BAR,title:Fi(t,r),description:Gi(t,r),progress:r.progress,status:r.status,action:r.action,enableCancel:r.enableCancel,enableRetry:r.enableRetry},disableManualResponse:r.disableManualResponse},messageContext:c})}catch(n){Object($e.b)(n)}}function*Yi(e,t){yield Object(qc.b)([Object(qc.c)(Ai,{action:t,localeData:e}),Object(qc.c)(Mi,{action:t,localeData:e}),Object(qc.c)(qi,{action:t,localeData:e}),Object(qc.c)(Go,{action:t})])}function*Ki(){try{const e=yield Object(qc.a)(Oe.y),{payload:{localeData:t}}=yield Object(qc.l)(F.k);yield Object(qc.m)(e,Yi,t)}catch(e){Object($e.b)(e)}}function*Zi(){const e=Object(d.a)();yield Object(dt.f)(e.appId)}function*Qi(){yield Object(qc.m)(F.f,Zi)}function*Ji(){try{yield Object(qc.b)([Object(qc.g)(fi),Object(qc.g)(hi),Object(qc.g)(Ki),Object(qc.g)(Qi)])}catch(e){Object($e.b)(e)}}function Xi(e){return Object(ec.w)(Object(ec.p)(Object(an.c)(e)))}function*es(){try{let t=yield Object(qc.j)(Xi);for(;;)try{yield Object(qc.i)({notificationReceived:Object(qc.l)(Oe.P),notificationRead:Object(qc.l)(Oe.O),notificationsReceived:Object(qc.l)(Oe.N)});const e=yield Object(qc.j)(Xi);t!==e&&(Object(se.a)({topic:H.l,payload:{data:{count:e}}}),t=e)}catch(e){Object($e.b)(e)}}catch(e){Object($e.b)(e)}}function*ts(){try{for(;;)try{const e=yield Object(qc.l)(Oe.z);Object(se.a)({topic:H.f,payload:{data:{type:e.payload.type,payload:{...e.payload.payload,userAuthToken:yield Object(dt.a)(tt.a.getAppId(Object(d.a)()))}}}})}catch(e){Object($e.b)(e)}}catch(e){Object($e.b)(e)}}function*ns(){try{yield Object(qc.b)([Object(qc.g)(es),Object(qc.g)(ts)])}catch(e){Object($e.b)(e)}}var as=n(765);async function cs(e){return(await xe.a.get("/livechat/upload/policy?fileName="+encodeURIComponent(e))).data}async function rs(e,t){const n=await xe.a.post(`https://${e}.s3.amazonaws.com/`,t);return decodeURIComponent(n.headers.location)}const os=[{key:"Cache-Control",value:n.n(as)()("max-age=31536000, no-transform, public")},{key:"Content-Type",value:e=>e.type}],is=["key","acl","x-amz-credential","x-amz-algorithm","x-amz-date","policy","x-amz-signature","x-amz-security-token","x-amz-server-side-encryption"];function*ss(e,t){try{if(function(e){return"AZURE"===e.type}(e)){const{uploadFileOnAzure:a}=yield Promise.all([n.e(7),n.e(14)]).then(n.bind(null,1801));return yield Object(qc.c)(a,e,t)}return yield Object(qc.c)(rs,e.bucket,function(e,t){const n=new FormData;return is.forEach(t=>{n.append(t,e[t])}),os.forEach(e=>{n.append(e.key,e.value(t))}),n.append("file",t),n}(e,t))}catch(a){return}}function*us(e){try{const t=yield Object(qc.c)(cs,e.name);if(t){return yield Object(qc.c)(ss,t,e)}return}catch(t){return}}var ls=n(594),ds=n(572);function bs(e){return new Promise(t=>{const n=document.createElement("img");n.onload=e=>{e.target&&t({height:e.target.naturalHeight,width:e.target.naturalWidth})},n.src=e})}function*Os(e,t,n,a){try{if(c=n.type,ai()(ds.c,c)){const c=URL.createObjectURL(n),{height:r,width:o}=yield Object(qc.c)(bs,c),i=yield Object(qc.c)(ho.p,oi.a.makeOutgoing().makeImageAttachmentMessage({attachmentProperties:{height:r,width:o,url:c},conversationId:e,sender:t,inReplyToChatMessageId:a}));yield Object(qc.h)(i);const s=yield Object(qc.c)(us,n);if(s){const e=Object(ls.f)(i.payload.chatMessage,s,mi.b.IMAGE);yield Object(qc.c)(Ii.c,e),URL.revokeObjectURL(c)}else yield Object(qc.h)({payload:{conversationId:e,transientId:i.payload.chatMessage.id},type:Oe.F})}}catch(r){Object($e.b)(r)}var c}function js(e){return new Promise(t=>{const n=document.createElement("video");n.onloadeddata=()=>{n.currentTime=0},n.onseeked=e=>{const a=document.createElement("canvas");a.height=n.videoHeight,a.width=n.videoWidth;const c=a.getContext("2d");if(c){c.drawImage(n,0,0,a.width,a.height);(a.toBlob||a.msToBlob).bind(a)(e=>{const a=e?new File([e],"image.jpg",{type:"image/jpeg"}):null;t({previewImageFile:a,height:n.videoHeight,width:n.videoWidth})})}},n.src=e,n.load()})}function*ps(e){try{return yield Object(qc.c)(us,e)}catch(t){return void Object($e.b)(t)}}function*fs(e,t,n,a){try{if(c=n.type,ai()(ds.e,c)){const c=URL.createObjectURL(n),{previewImageFile:r,height:o,width:i}=yield Object(qc.c)(js,c),s=URL.createObjectURL(r),u=yield Object(qc.c)(ho.p,oi.a.makeOutgoing().makeVideoAttachmentMessage({attachmentProperties:{height:o,width:i,previewImageUrl:s,url:c},conversationId:e,sender:t,inReplyToChatMessageId:a}));yield Object(qc.h)(u);const[l,d]=yield Object(qc.b)([Object(qc.c)(us,n),Object(qc.c)(ps,r)]);if(l){const e=Object(ls.g)(Object(ls.f)(u.payload.chatMessage,l,mi.b.VIDEO),d);yield Object(qc.c)(Ii.c,e),URL.revokeObjectURL(c),URL.revokeObjectURL(s)}else yield Object(qc.h)({payload:{conversationId:e,transientId:u.payload.chatMessage.id},type:Oe.F})}}catch(r){Object($e.b)(r)}var c}var hs=n(1039);const gs={"application/pdf":hs.a.PDF,"text/plain":hs.a.DOCUMENT,"application/msword":hs.a.WORD_DOCUMENT,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":hs.a.WORD_DOCUMENT,"application/vnd.ms-excel":hs.a.EXCEL,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":hs.a.EXCEL,"application/vnd.ms-powerpoint":hs.a.PRESENTATION,"application/vnd.openxmlformats-officedocument.presentationml.presentation":hs.a.PRESENTATION,"application/onenote":hs.a.ONENOTE,"application/json":hs.a.DOCUMENT};function*ms(e,t,n,a){try{if(c=n.type,ai()(ds.b,c)){const c=URL.createObjectURL(n),r=yield Object(qc.c)(ho.p,oi.a.makeOutgoing().makeDocumentAttachmentMessage({attachmentProperties:{url:c,title:n.name,documentType:gs[n.type]},conversationId:e,sender:t,inReplyToChatMessageId:a}));yield Object(qc.h)(r);const o=yield Object(qc.c)(us,n);if(o){const e=Object(ls.f)(r.payload.chatMessage,o,mi.b.DOCUMENT);yield Object(qc.c)(Ii.c,e),URL.revokeObjectURL(c)}else yield Object(qc.h)({payload:{conversationId:e,transientId:r.payload.chatMessage.id},type:Oe.F})}}catch(r){Object($e.b)(r)}var c}function*vs(e,t,n,a){try{if(c=n.type,ai()(ds.a,c)){const c=URL.createObjectURL(n),r=yield Object(qc.c)(ho.p,oi.a.makeOutgoing().makeAudioAttachmentMessage({attachmentProperties:{url:c,mimeType:n.type,title:n.name},conversationId:e,sender:t,inReplyToChatMessageId:a}));yield Object(qc.h)(r);const o=yield Object(qc.c)(us,n);if(o){const e=Object(ls.f)(r.payload.chatMessage,o,mi.b.AUDIO);yield Object(qc.c)(Ii.c,e),URL.revokeObjectURL(c)}else yield Object(qc.h)({payload:{conversationId:e,transientId:r.payload.chatMessage.id},type:Oe.F})}}catch(r){Object($e.b)(r)}var c}function*ys(e){const{conversationId:t,chatUserId:n,file:a,inReplyToChatMessageId:c}=e.payload;yield Object(qc.b)([Object(qc.c)(Os,t,n,a,c),Object(qc.c)(fs,t,n,a,c),Object(qc.c)(vs,t,n,a,c),Object(qc.c)(ms,t,n,a,c)])}var Cs=function*(){yield Object(qc.m)(si.b,ys)};let Is;function*Es(){for(;;)try{let e;yield Object(qc.l)(Jc.b),Is=Date.now(),yield Object(qc.l)(Jc.a),e=Date.now(),Is&&e-Is>=3e5&&(Is=void 0,yield Object(qc.h)({type:Jc.m}))}catch(e){Object($e.b)(e)}}function*Ts(){yield Object(qc.b)([Object(qc.g)(Es)])}var xs=n(1029),Ss=n(344);function*ws(){try{for(;;)try{yield Object(qc.l)(F.g);Object(b.J)()?Object(se.a)({topic:H.d}):yield Object(qc.h)(Object(Ss.b)())}catch(e){Object($e.b)(e)}}catch(e){Object($e.b)(e)}}function*_s(){try{for(;;)try{const e=yield Object(qc.l)(F.l),{isMediaOpen:t}=e.payload;t?Object(se.a)({topic:H.h}):Object(se.a)({topic:H.g})}catch(e){Object($e.b)(e)}}catch(e){Object($e.b)(e)}}function*As(e,t){try{yield Object(qc.h)(Object(Ss.i)(e,t))}catch(n){Object($e.b)(n)}}function*Rs(e,t,n){try{const e=yield Object(qc.j)(an.b),t=Object(nn.e)(e),n=Object(zc.c)(yield Object(qc.j)(Xa.h)).userId;let a={};ma()(t,(e,t)=>{a={...a,[t]:e.enabled}}),yield Object(dt.k)(n,a)}catch(a){yield Object(qc.c)(As,e,n),Object($e.b)(a)}}function*Ns(){try{for(;;){const e=yield Object(qc.l)(F.o),{userPreferenceKey:t,newValue:n,oldValue:a}=e.payload;yield Object(qc.c)(As,t,n),yield Object(qc.c)(Rs,t,n,a)}}catch(e){Object($e.b)(e)}}function*Ms(){try{const{payload:{applicationConfig:e}}=yield Object(qc.l)(bo.a);setTimeout(()=>{const t=s()(e,"otherConfigs.theme.icons",{});ma()(t,e=>{Object(xs.a)(e)})},1e4)}catch(e){Object($e.b)(e)}}function*Ls(){try{yield Object(qc.b)([Object(qc.g)(ws),Object(qc.g)(_s),Object(qc.g)(Ns),Object(qc.g)(Ms)])}catch(e){Object($e.b)(e)}}var ks=n(693),Ps=n(342);function*Ds(e){try{const{user:t,userContext:n}=e.payload||{},a=Object(zc.c)(yield Object(qc.j)(Xa.h)),c=Ps.a.getId(a),r=Object(b.L)(n);if(Object(gt.a)(t)&&!Object(gt.b)(c)||Object(gt.b)(c)&&Object(gt.d)(t,a)){const e=L()(Object(d.a)(),{userContext:{$merge:r},user:{$set:{...Object(d.a)().user||{},...t}}});Object(d.f)(e);const n=yield Object(qc.c)(ks.d,{...a,...t,customContext:r});return yield Object(qc.h)(Object($t.c)({action:Oa.a.USER_PROFILE_UPDATED})),void(yield Object(qc.h)({type:k.d,payload:{users:[n]}}))}const o=L()(Object(d.a)(),{userContext:{$set:r},user:{$set:t}});return Object(d.f)(o),void Object(de.a)().push("/logout?reboot=true")}catch(t){Object($e.b)(t)}}function*Us(){try{yield Object(qc.m)("@user/UPDATE_USER_SETTINGS",Ds)}catch(e){Object($e.b)(e)}}function*Vs(){return Object(gi.d)(e=>{const t=()=>{e(Object($t.g)(!0))},n=()=>{e(Object($t.g)(!1))};return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}})}function*Fs(){let e;try{for(e=yield Object(qc.c)(Vs);;){const t=yield Object(qc.l)(e);yield Object(qc.h)(t)}}catch(t){Object($e.b)(t)}finally{e&&e.close()}}function Gs(){return Object(gi.d)(e=>{const t=Object(d.b)();if(!t)return K.a;const n=()=>{const{visibilityState:t}=document;"hidden"===t&&e({type:Jc.b}),"visible"===t&&e({type:Jc.a})};return t.document.addEventListener("visibilitychange",n),()=>{t.document.removeEventListener("visibilitychange",n)}})}function*Bs(){let e;try{for(e=yield Object(qc.c)(Gs);;){const t=yield Object(qc.l)(e);yield Object(qc.h)(t)}}catch(t){Object($e.b)(t)}finally{e&&e.close()}}function*zs(e){try{const{ssoId:t,conversationId:n,messageId:a}=e.payload;yield ht({ssoId:t,conversationId:n,messageId:a}),yield Object(qc.h)({type:Jc.e,payload:{}}),yield Object(qc.h)({type:bo.b,payload:{}}),e.promise&&e.promise.resolve()}catch(t){yield Object(qc.h)({type:Jc.c,payload:{}}),e.promise&&e.promise.reject()}}function*Hs(){try{yield Object(qc.m)(Jc.d,zs)}catch(e){Object($e.b)(e)}}function*Ws(){try{yield Object(qc.b)([Object(qc.g)(Hs)])}catch(e){Object($e.b)(e)}}let $s=!0;function*qs(){for(;;)try{yield Object(qc.l)(F.b),yield Object(qc.h)({type:F.c})}catch(e){Object($e.b)(e)}}function*Ys(){for(;;)try{yield Object(qc.l)(F.d),yield Object(qc.h)({type:F.e})}catch(e){Object($e.b)(e)}}function*Ks(e){$s=!1,yield Object(qc.h)(Object($t.a)({ssoId:lt.a.getAutoLoginSSOId(ut.a.getCustomizationConfig(e))})())}function*Zs(){try{const{payload:{applicationConfig:e}}=yield Object(qc.l)(bo.a);if(Object(b.J)())return;if(!$s||!ft(e))return void(yield Object(qc.g)(Ys));yield Object(qc.l)(F.d),yield Object(qc.c)(Ks,e),yield Object(qc.l)(Jc.c),yield Object(qc.g)(Ys),yield Object(qc.h)({type:F.d})}catch(e){Object($e.b)(e)}}function*Qs(){yield Object(qc.b)([Object(qc.g)(Zs),Object(qc.g)(qs)])}var Js=n(504),Xs=n.n(Js);var eu=n(1040);function*tu(e){try{const{type:t,buttonId:n,promptId:a}=e.payload,c=yield Object(qc.j)(an.d),r=Wa()(c,e=>e.id===a);if(!r)return;t!==Za.a.TRIGGERED&&(yield Object(qc.h)(function(e){return{type:ee.b,payload:{promptId:e}}}(a)));const o=Wa()(r.buttons,e=>e.id===n);t===Za.a.ENGAGED&&o&&o.type===Za.b.URL&&o.value?window.open(Object(jt.b)(o.value)):t!==Za.a.ENGAGED||o&&o.type===Za.b.CLOSE||(yield Object(qc.h)(Object(ue.b)({initialMessages:Qo()([...Vc()(r.messages,({text:e,disableManualResponse:t=!1})=>({message:{text:e,disableManualResponse:t}})),o?{isSentByUser:!0,message:o.label}:void 0]),createCase:!!s()(r.additional,"createCase"),additional:{...Xs()(r.additional,["interceptId","creativeId"]),interceptTargetId:n,clickedOnPrompt:!0}}))),Object(se.a)({topic:H.j,payload:{data:{type:t,id:a,button:o}}})}catch(t){Object($e.b)(t)}}function*nu(){try{yield Object(qc.m)(eu.a,tu)}catch(e){Object($e.b)(e)}}var au=n(681);function*cu(){try{const{appId:e}=Object(d.a)();yield Object(qc.c)(gc.remove,e)}catch(e){Object($e.b)(e)}}function*ru(e){try{const{conversationId:t,messageId:n,agentId:a}=e.payload.state,{appId:c}=Object(d.a)();yield Object(qc.c)(gc.set,c,JSON.stringify({conversationId:t,messageId:n,agentId:a}))}catch(t){Object($e.b)(t)}}function*ou(){yield Object(qc.m)([au.g,au.h],cu)}function*iu(){yield Object(qc.m)(au.j,ru)}function*su(){yield Object(qc.b)([Object(qc.g)(ou),Object(qc.g)(iu)])}var uu=n(1753);var lu=async e=>{let t;try{p.reset(),_(E),t=await Et(Object(d.a)()),vt({handshakeDetails:t}),At(t.chatUser),e.hasPrompts&&Object(uu.default)(e,t);const n=await vu(null,{applicationConfig:e,handshakeDetails:t,chatSettings:Object(d.a)()});await Tt(n)}catch(n){const a=tt.a.getUserSettings(Object(d.a)());if(Object(St.e)(n)&&a&&st.getOneTimeToken(a)){const a=await vu(n,{applicationConfig:e,handshakeDetails:t,chatSettings:Object(d.a)()});await Tt(a)}else await xt()}};function*du(){try{const{payload:{applicationConfig:t}}=yield Object(qc.l)(bo.a);for(;;)try{yield Object(qc.l)(bo.b),yield lu(t)}catch(e){Object($e.b)(e)}}catch(e){Object($e.b)(e)}}function*bu(){try{yield Object(qc.b)([Object(qc.g)(Do),Object(qc.g)(nu),Object(qc.g)(Ji),Object(qc.g)(ns),Object(qc.g)(Cs),Object(qc.g)(Fs),Object(qc.g)(Bs),Object(qc.g)(Ts),Object(qc.g)(Ls),Object(qc.g)(Us),Object(qc.g)(Ws),Object(qc.g)(Ko),Object(qc.g)(su)])}catch(e){Object($e.b)(e)}}function*Ou(){try{yield Object(qc.l)(bo.c),_(S)}catch(e){Object($e.b)(e)}}function*ju(){try{yield Object(qc.b)([Object(qc.g)(du),Object(qc.g)(Qs),Object(qc.g)(Ou)])}catch(e){Object($e.b)(e)}}function*pu(){try{yield Object(qc.g)(ju);const e=yield Object(qc.g)(bu);yield Object(qc.l)(bo.c),yield Object(qc.d)(e)}catch(e){Object($e.b)(e)}}function*fu(){yield Object(qc.b)([Object(qc.g)(jo),Object(qc.g)(pu)])}const hu=(e,t,n)=>(new $c.b).setReducer(an.a).setSaga(fu).setHTTPClient(xe.a).setApplicationConfig(e).setHandshakeDetails(t).setChatSettings(n).build();async function gu({applicationConfig:e,store:t,history:n}){const a=Object(d.b)().document,c=Object(b.J)()?b.a:b.b;Lt.a.render(Object(qt.jsx)(Wc,{applicationConfig:e,history:n,store:t}),c(a,"spr-live-chat-app"))}async function mu(e,{applicationConfig:t,handshakeDetails:n,chatSettings:a}){const c=hu(t,n,a),r=Object(de.a)({isUnauthorized:!!e});await gu({applicationConfig:t,store:c,history:r});return t=>{e||c.dispatch(t)}}async function vu(e,{applicationConfig:t,handshakeDetails:n,chatSettings:a}){const c=hu(t,n,a),r=Object(de.a)({isUnauthorized:!!e,reset:!0});await gu({applicationConfig:t,store:c,history:r}),r.go(r.entries.length-1);return t=>{e||c.dispatch(t)}}!function(){async function e(...e){Qe(...e)}const t=Object(d.e)();e.q=t?t.q:[],e.loaded=!0,Object(d.b)().sprChat=e}();const yu=Object(b.w)();n(1017)(`./${yu.toLowerCase()}/pages`);const Cu=Object(d.e)();j(...Cu.q),async function(){let e,t,a;try{if(e=Object(d.a)(),l()(e))throw new Error;await yt(e),vt({getSessionToken:()=>Object(dt.a)(e.appId)});const[c,r]=await(async e=>{const[t,n]=await Promise.allSettled([It(e),Et(e)]),a=t.value;if(Object(b.K)()||!ft(a))return[t,n];try{await ht({ssoId:lt.a.getAutoLoginSSOId(ut.a.getCustomizationConfig(a))})}catch(c){Object($e.b)(c)}return[t,{value:await Et(e)}]})(e);if(t=c.value,a=r.value,"rejected"===r.status)throw r.reason;if("rejected"===c.status)throw new Error;((e,t)=>{const{appId:n}=Object(d.a)(),{chatUser:a}=e;!s()(t,"otherConfigs.settings.disableSentry")&&Object($e.a)()})(a,t),(e=>{const t=!lt.a.isDebugModeDisabled(e.otherConfigs);window.sprDebugLog=(...e)=>{t&&console.debug(...e)}})(t),vt({applicationConfig:t,handshakeDetails:a}),t.hasPrompts&&Promise.resolve().then(n.bind(null,1753)).then(({default:e})=>{e(t,a)});const o=await mu(null,{applicationConfig:t,handshakeDetails:a,chatSettings:e});await Tt(o)}catch(c){const n=tt.a.getUserSettings(e);if(Object(St.e)(c)&&n&&st.getOneTimeToken(n)){const n=await mu(c,{applicationConfig:t,handshakeDetails:a,chatSettings:e});await Tt(n)}else await xt()}}();const{meetingId:Iu,user:Eu,otp:Tu}=Object(d.a)(),xu=s()(Eu,"oneTimeToken");l()(Iu)&&l()(xu)&&l()(Tu)||Cu("open");const{autoTrigger:Su}=Object(d.a)();let wu;wu=!0===Su?0:c()(Su)?1e3*Math.max(Su,0):null,o()(wu)||setTimeout(()=>{Cu("openNewConversation")},wu)},324:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var a=n(315),c=n(481),r=n(751),o=n(9),i=n(560);function s(e){return Object(o.H)()||Object(r.b)(e)&&!Object(i.a)()}t.a=function(){const e=Object(c.a)();return Object(a.useMemo)(()=>s(e),[e])}},327:function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return c}));var a=n(668);const c={OPEN_LINK:"openLink",AUDIO:"audio",ATTACHMENT:"attachment",BOT_USER:"botUser",CAMERA:"camera",CHAT_USER:"chatUser",CHEVRON:"chevron",CLOSE:"close",CLOSE_CIRCLE:"closeCircle",CLOSE_CONVERSATION:"closeConversation",DELETE:"delete",DOCUMENT:"document",UNKNOWN_DOC:"unknownDoc",DOWNLOAD:"download",EMOJI:"emoji",ERROR:"error",EXCEL:"excel",IMAGE_PLACEHOLDER:"imagePlaceholder",INTERNET_DISCONNECTED:"internetDisconnected",MORE:"more",PDF:"pdf",PLAY:"play",PAUSE:"pause",PRESENTATION:"presentation",SEND:"send",SOUND_OFF:"soundOff",SOUND_ON:"soundOn",VIDEO:"video",VIDEO_ON:"videoOn",VIDEO_OFF:"videoOff",AUDIO_ON:"audioOn",AUDIO_OFF:"audioOff",END_CALL:"endCall",FULL_SCREEN:"fullScreen",EXIT_FULL_SCREEN:"exitFullScreen",ONENOTE:"onenote",LINE_LIST:"lineList",TEXT:"text"}},334:function(e,t,n){"use strict";var a=n(315),c=n(569);t.a=function(){return Object(a.useContext)(c.c)}},337:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(315),c=n(523);function r(){return Object(a.useContext)(c.b).otherConfigs}},340:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(315),c=n.n(a);const r=e=>{const t=c.a.lazy(e);return t.preload=e,t}},344:function(e,t,n){"use strict";n.d(t,"g",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"i",(function(){return b})),n.d(t,"d",(function(){return O})),n.d(t,"h",(function(){return j}));var a=n(470),c=n.n(a),r=n(430);function o(e){return{type:e?r.b:r.d}}function i(){return{type:r.j,payload:{}}}const s=c()(o,!0);c()(o,!1);function u(){return{type:r.g}}function l(e){return{type:r.l,payload:e}}function d(e,t,n){return{type:r.o,payload:{userPreferenceKey:e,newValue:t,oldValue:n}}}function b(e,t){return{type:r.p,payload:{userPreferenceKey:e,value:t}}}const O=e=>({type:r.k,payload:{localeData:e}}),j=({value:e})=>({type:r.n,payload:{value:e}})},347:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var a=n(315),c=n.n(a),r=n(317),o=n(316);const i=o.keyframes`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,s=28,u=28,l=Object(r.a)("div",{target:"e1hde0td0"})("border:2px solid #eeeeee;border-radius:50%;border-top:2px solid #929292;width:",u,"px;height:",s,"px;animation:",i," 1s linear infinite;"),d=c.a.memo(e=>Object(o.jsx)("div",{"data-testid":"spinning-loader",className:e.className},Object(o.jsx)(l,{css:e.spinnerStyles})));t.c=d},359:function(e,t,n){"use strict";var a=n(319);t.a=Object(a.defineMessages)({goBack:{id:"goBack",defaultMessage:"Go back"},liveChatBox:{id:"liveChatBox",defaultMessage:"Live chat box"},liveChatNotification:{id:"liveChatNotification",defaultMessage:"Live chat notification"},closeChat:{id:"closeChat",defaultMessage:"Close chat"},liveChat:{id:"liveChat",defaultMessage:"Live chat"},conversationClosed:{id:"conversationClosed",defaultMessage:"Conversation closed"},submit:{id:"submit",defaultMessage:"Submit"},textArea:{id:"textArea",defaultMessage:"Send your message here"},attachment:{id:"attachment",defaultMessage:"Attachment"},moreActions:{id:"moreActions",defaultMessage:"More actions"},sendingMessage:{id:"sendingMessage",defaultMessage:"Sending message"},sentMessage:{id:"sentMessage",defaultMessage:"Sent message"},receivedMessage:{id:"receivedMessage",defaultMessage:"Received message"},unreadMessages:{id:"unreadMessages",defaultMessage:"{count} Unread messages"},unreadMessage:{id:"unreadMessage",defaultMessage:"{count} Unread message"},newNotifications:{id:"newNotifications",defaultMessage:"New notifications"},newNotification:{id:"newNotification",defaultMessage:"New notification"},agentImage:{id:"agentImage",defaultMessage:"Agent Image"},brandImage:{id:"brandImage",defaultMessage:"Brand Image"},homeScreen:{id:"homeScreen",defaultMessage:"Live chat home screen"},newConversationCard:{id:"newConversationCard",defaultMessage:"New conversation"},existingConversationCard:{id:"existingConversationCard",defaultMessage:"Existing conversations"},conversationScreen:{id:"conversationScreen",defaultMessage:"Conversation Screen"},conversationListScreen:{id:"conversationListScreen",defaultMessage:"Conversation List Screen"},persistentMenu:{id:"persistentMenu",defaultMessage:"Menu"}})},372:function(e,t,n){"use strict";var a=n(315),c=n(1277);t.a=function(){return Object(a.useContext)(c.a)}},375:function(e,t,n){"use strict";n.d(t,"l",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return b})),n.d(t,"k",(function(){return O})),n.d(t,"m",(function(){return j})),n.d(t,"i",(function(){return p}));const a="unreadCountChanged",c="externalEventTriggered",r="loaded",o="loadCompleted",i="closed",s="availabilityChanged",u="promptActionTriggered",l="mediaShown",d="mediaClosed",b="eventTriggered",O="registerDeviceTriggered",j="unregisterDeviceTriggered",p="onPermissionSeeked"},376:function(e,t,n){"use strict";var a=n(4),c=n(3);const r=Object(a.a)("type"),o=Object(a.a)("url");class i{constructor(){this.setUrl=e=>(this.data.url=e,this),this.setType=e=>(this.data.type=e,this),this.build=()=>this.data,this.data={}}}i.getUrl=Object(c.a)(o),i.getType=Object(c.a)(r),t.a=i},380:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(315),c=n(523);function r(){return Object(a.useContext)(c.b)}},383:function(e,t,n){"use strict";t.a={GET:"get",POST:"post",PUT:"put",REMOVE:"remove"}},393:function(e,t,n){"use strict";var a=n(315),c=n(366),r=n.n(c),o=n(38),i=n.n(o),s=n(154),u=n.n(s),l=n(334),d=n(689);t.a=()=>{const{locale:e,language:t}=Object(l.a)();return Object(a.useCallback)((n,a)=>{const c=u()(n,"langVsTranslatedFieldValues");if(!i()(c))return u()(n,a);let o=u()(c,e)||u()(c,t);return o||(o=r()(c,(e,n)=>Object(d.b)(n)===t)),u()(o,a)||u()(n,a)},[e])}},406:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"w",(function(){return i})),n.d(t,"p",(function(){return s})),n.d(t,"t",(function(){return u})),n.d(t,"u",(function(){return l})),n.d(t,"z",(function(){return d})),n.d(t,"x",(function(){return b})),n.d(t,"y",(function(){return O})),n.d(t,"s",(function(){return j})),n.d(t,"v",(function(){return p})),n.d(t,"q",(function(){return f})),n.d(t,"r",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return m})),n.d(t,"o",(function(){return v})),n.d(t,"n",(function(){return y})),n.d(t,"d",(function(){return C})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return E})),n.d(t,"j",(function(){return T})),n.d(t,"f",(function(){return x})),n.d(t,"g",(function(){return S})),n.d(t,"e",(function(){return w})),n.d(t,"l",(function(){return _})),n.d(t,"m",(function(){return A})),n.d(t,"k",(function(){return R}));var a=n(336),c=n(418),r=n(451);const o=(e,t)=>Object(c.k)(Object(a.b)(e),t),i=e=>Object(c.i)(Object(a.b)(e))===r.d.INITIATE_FAILED,s=e=>Object(c.i)(Object(a.b)(e))===r.d.AGENT_ASSIGNMENT_FAILED,u=e=>Object(c.A)(Object(a.b)(e)),l=e=>Object(c.B)(Object(a.b)(e)),d=e=>Object(c.g)(Object(a.b)(e)),b=e=>Object(c.i)(Object(a.b)(e))===r.d.REJOINING_FAILED_DUE_TO_CALL_END,O=e=>Object(c.i)(Object(a.b)(e))===r.d.REJOINING_FAILED_DUE_TO_OTHER_REASONS,j=e=>Object(c.z)(Object(a.b)(e)),p=e=>Object(c.p)(Object(a.b)(e)),f=e=>Object(c.x)(Object(a.b)(e)),h=e=>Object(c.y)(Object(a.b)(e)),g=(e,t)=>Object(c.c)(Object(a.b)(e),t),m=e=>Object(c.e)(Object(a.b)(e)),v=e=>Object(c.w)(Object(a.b)(e)),y=e=>Object(c.v)(Object(a.b)(e)),C=e=>Object(c.r)(Object(a.b)(e)),I=e=>Object(c.s)(Object(a.b)(e)),E=e=>Object(c.t)(Object(a.b)(e)),T=e=>Object(c.u)(Object(a.b)(e)),x=e=>Object(c.h)(Object(a.b)(e))===r.b.ACCEPT_FAILED_DUE_TO_CALL_END,S=e=>Object(c.h)(Object(a.b)(e))===r.b.ACCEPT_FAILED_DUE_TO_OTHER_REASONS,w=e=>x(e)||S(e),_=e=>Object(c.h)(Object(a.b)(e))===r.b.REJOINING_FAILED_DUE_TO_CALL_END,A=e=>Object(c.h)(Object(a.b)(e))===r.b.REJOINING_FAILED_DUE_TO_OTHER_REASONS,R=e=>Object(c.o)(Object(a.b)(e))},416:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i}));const a=/^https?:\/\//i,c=e=>e.match(a)?e:"https://"+e,r=e=>"tel:"+e,o=e=>e.map(e=>`${e.key}=${e.value}`).join("&"),i=e=>!(e.startsWith("http")||e.startsWith("https")||e.startsWith("www"))},420:function(e,t,n){"use strict";var a=n(1021),c=n(315);t.a=function(){return Object(c.useContext)(a.a)}},422:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(4),c=n(1834),r=n(3);const o=Object(a.a)("id"),i=Object(a.a)("creativeId"),s=Object(a.a)("targets"),u=Object(c.a)(["creative","socialAsset","content"]),l=Object(a.a)("settings"),d=Object(a.a)("filter"),b=Object(a.a)("snoozeConfig"),O=Object(c.a)(["additional","surveyResponseId"]);class j{}j.getId=Object(r.a)(o),j.getCreativeId=Object(r.a)(i),j.getTargets=Object(r.a)(s),j.getCreative=Object(r.a)(u),j.getFilter=Object(r.a)(d),j.getSettings=Object(r.a)(l),j.getSnoozeConfig=Object(r.a)(b),j.getSurveyResponseId=Object(r.a)(O)},431:function(e,t,n){"use strict";var a=n(1024),c=n(315);t.a=function(){return Object(c.useContext)(a.a)}},436:function(e,t,n){"use strict";var a=n(522);const c=new(n(978).a);c.on(e=>{const{topic:t,payload:n={}}=e;t&&Object(a.a)({topic:t,payload:{response:{data:n.data,error:n.error},request:n.request}})}),t.a=function(e){c.emit(e)}},438:function(e,t,n){"use strict";var a=n(404);n.d(t,"a",(function(){return a.a}))},441:function(e,t,n){"use strict";var a=n(315);const c={childList:!0,subtree:!0,attributes:!0};t.a=(e,t)=>{const[n,r]=Object(a.useState)();Object(a.useEffect)(()=>{const a=[];if(n){if(e.MutationObserver){const r=new e.MutationObserver(t);r.observe(n,c),a.push(()=>r.disconnect())}else e.document.addEventListener("DOMSubtreeModified",t),a.push(()=>e.document.removeEventListener("DOMSubtreeModified",t));a.push(()=>e.removeEventListener("resize",t),()=>e.document.removeEventListener("transitionend",t))}return()=>{a.forEach(e=>e())}},[n,t]);return Object(a.useCallback)(e=>{e&&r(e)},[])}},446:function(e,t,n){"use strict";var a=n(315),c=n(449),r=n.n(c);const o="DATA_LOADING",i="DATA_LOADED",s="DATA_UPDATED",u="DATA_LOAD_FAILED",l="DATA_FETCHING_MORE",d={loading:!1,error:void 0,data:void 0},b=(e,t)=>{switch(t.type){case o:return{...e,loading:!0,data:void 0,error:void 0};case l:return{...e,loading:!0,error:void 0};case i:return{...e,loading:!1,data:t.payload};case u:return{...e,loading:!1,error:t.payload};case s:return{...e,data:t.payload};default:return e}};var O=()=>Object(a.useReducer)(b,d),j=n(376),p=n(387),f=n(383);const h=(e,t)=>t!==e.current;t.a=({query:e,skipQueryOnMount:t,payload:n,onCompleted:c,options:d})=>{const[b,g]=O(),{loading:m,data:v,error:y}=b,C=Object(a.useRef)(null),I=Object(a.useRef)(v);I.current=v;const E=j.a.getType(e),T=j.a.getUrl(e),x=Object(a.useRef)(c);x.current=c;const S=Object(a.useCallback)(()=>{C.current=null},[]),w=Object(a.useCallback)(async(e,t)=>{let n;if(S(),C.current=t,n=E===f.a.GET||E===f.a.REMOVE?await p.a[E](T,d):await p.a[E](T,e,d),!h(C,t))return x.current&&x.current(n.data),n},[E,T]),_=Object(a.useCallback)(async e=>{g({type:o,payload:{}});const t=r()("reqId");try{const n=await w(e,t);h(C,t)||g({type:i,payload:n.data})}catch(n){h(C,t)||g({type:u,payload:n})}},[w]);Object(a.useEffect)(()=>{t||_(n)},[]);const A=Object(a.useCallback)(async(e,t)=>{g({type:l,payload:{}});const n=r()("reqId");try{const a=await w(e,n);if(!h(C,n)){let e=a.data;t&&(e=t(I.current,a.data)),g({type:i,payload:e})}}catch(a){h(C,n)||g({type:u,payload:a})}},[w]),R=Object(a.useCallback)((e,t)=>{t?A(e,t):_(e)},[_]),N=Object(a.useCallback)(e=>{g({type:s,payload:e(I.current)})},[]);return{loading:m,data:v,error:y,refetch:R,fetchMore:A,updateQuery:N}}},455:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={PAGE_VISIT:"PAGE_VISIT",TAB_CHANGE:"TAB_CHANGE",TAB_CLOSE:"TAB_CLOSE",INTERCEPT_SNOOZE_TRIGGERED:"INTERCEPT_SNOOZE_TRIGGERED",INTERCEPT_TRIGGERED:"INTERCEPT_TRIGGERED",INTERCEPT_CLOSED:"INTERCEPT_CLOSED",INTERCEPT_ENGAGED:"INTERCEPT_ENGAGED",SNOOZE:"SNOOZE"}},464:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(323),c=n(316),r=n(315),o=n.n(r),i=n(341),s=n.n(i),u=n(384),l=n(327),d=n(317),b=n(321);const O=Object(d.a)("button",{target:"e1hw652w0"})("background-color:transparent;border-radius:4px;border:0;cursor:pointer;height:40px;position:relative;width:40px;:before{content:'';display:block;opacity:0;position:absolute;transition-duration:0.15s;transition-timing-function:cubic-bezier(0.4,0,0.2,1);bottom:0;left:0;right:0;top:0;background:none;border-radius:4px;box-sizing:border-box;transform:scale(0);transition-property:transform,opacity;}&:hover:before,&:focus:before{border:none;opacity:1;transform:scale(1);}",b.j,"{&:hover:before,&:focus:before{opacity:0;transform:scale(0);}&:active:before{border:none;opacity:1;transform:scale(1);}}"),j={name:"1qlyuxe",styles:"position:relative;height:12px;width:12px;flex:0 0 auto;"};var p=o.a.forwardRef((e,t)=>{const{iconName:n,iconCss:o,Icon:i,onLoad:d,onClick:b,...p}=e,{isKeyboardEventLast:f}=Object(u.a)(),h=Object(r.useCallback)(e=>{f||e.currentTarget.blur(),b&&b(e)},[f,b]);return Object(c.jsx)(O,Object(a.a)({},p,{ref:t,className:s()("center-x-y",e.className),onClick:h}),Object(c.jsx)(l.b,{alt:i,name:n,css:Object(c.css)([j,o],""),onLoad:d,"aria-hidden":!0,focusable:!1}),e.children)})},465:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(323),c=(n(315),n(747)),r=n(334),o=n(316);var i=e=>{const{direction:t}=Object(r.a)();return Object(o.jsx)(c.a,Object(a.a)({},e,{direction:t}),e.children)}},469:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));const a={LTR:"ltr",RTL:"rtl"},c={ar:{id:"ar",name:"Arabic",dir:a.RTL},he:{id:"he",name:"Hebrew",dir:a.RTL},pt:{id:"pt",name:"Portuguese"},es:{id:"es",name:"Spanish"},de:{id:"de",name:"German"},sv:{id:"sv",name:"Swedish"},da:{id:"da",name:"Danish"},fi:{id:"fi",name:"Finnish"},et:{id:"et",name:"Estonian"},lt:{id:"lt",name:"Lithuanian"},lv:{id:"lv",name:"Latvian"},nb:{id:"nb",name:"Bokm\xe5l, Norwegian"},ml:{id:"ml",name:"Malayalam"},en:{id:"en",name:"English"},ko:{id:"ko",name:"Korean"},zh:{id:"zh",name:"Chinese"},ja:{id:"ja",name:"Japanese"},tr:{id:"tr",name:"Turkish"},id:{id:"id",name:"Bahasa Indonesia"},vi:{id:"vi",name:"Vietnamese"},th:{id:"th",name:"Thai"},fr:{id:"fr",name:"French"},"zh-HK":{id:"zh-HK",value:"zh-HK",name:"Chinese (Honk kong)"},"zh-TW":{id:"zh-tw",value:"zh-TW",name:"Chinese (Traditional)"},cs:{id:"cs",value:"cs",name:"Czech"},sk:{id:"sk",value:"sk",name:"Slovak"},ro:{id:"ro",value:"ro",name:"Romanian"},hu:{id:"hu",value:"hu",name:"Hungarian"},it:{id:"it",value:"it",name:"Italian"},hr:{id:"hr",value:"hr",name:"Croatian"},sr:{id:"sr",value:"sr",name:"Serbian"},sl:{id:"sl",value:"sl",name:"Slovenian"},sq:{id:"sq",value:"sq",name:"Albanian"},mk:{id:"mk",value:"mk",name:"Macedonian"},bs:{id:"bs",value:"bs",name:"Bosnian"},nl:{id:"nl",value:"nl",name:"Dutch"},pl:{id:"pl",value:"pl",name:"Polish"},ms:{id:"ms",value:"ms",name:"Malay"}}},471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(315),c=n(1010);t.default=function(e,t){var n=c.useFirstMountState();a.useEffect((function(){if(!n)return e()}),t)}},473:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={LIVE_CHAT_ROUTE_TO_BOT:"LIVE_CHAT_ROUTE_TO_BOT",LIVE_CHAT_EXECUTE_RULE:"LIVE_CHAT_EXECUTE_RULE",LIVE_CHAT_WITH_AGENT:"LIVE_CHAT_WITH_AGENT",CLOSE:"CLOSE",SURVEY:"SURVEY",SURVEY_INLINE:"SURVEY_INLINE",CHAT_WITH_AGENT:"CHAT_WITH_AGENT",ROUTE_TO_BOT:"ROUTE_TO_BOT",EXECUTE_RULE:"EXECUTE_RULE",REMOVE:"REMOVE",SNOOZE:"SNOOZE",URL:"OPEN_URL"}},480:function(e,t,n){"use strict";var a=n(315),c=n(981);t.a=function(){return Object(a.useContext)(c.a)}},481:function(e,t,n){"use strict";var a=n(315),c=n(675);t.a=function(){return Object(a.useContext)(c.a)}},483:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={SNACK_BAR:1e3,MODAL_FRAME:999,ACTION_MENU:998,CONNECTION_STATUS_BAR:997,TIME_LINE:1}},485:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(323),c=n(315),r=n.n(c),o=n(499),i=n(316);const s=r.a.createContext(()=>o.c),u=e=>function(t){return Object(i.jsx)(s.Consumer,null,n=>Object(i.jsx)(e,Object(a.a)({},t,{getUserType:n})))};t.b=s},486:function(e,t,n){"use strict";var a=n(337),c=n(320),r=n(393),o=n(521);const i=e=>e;t.a=()=>{const e=Object(r.a)(),t=Object(a.a)(),n=Object(c.d)(i);return Object(o.f)(n,t,e)}},488:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={CLOSE:"CLOSE",ENGAGE:"ENGAGE",TRIGGERED:"TRIGGERED",SNOOZE:"SNOOZE"}},507:function(e,t,n){"use strict";var a=n(315),c=n.n(a),r=n(685),o=n.n(r),i=n(358),s=n.n(i),u=n(688),l=n(316);t.a=c.a.memo(({shouldPlay:e,unreadCount:t,children:n})=>{const{play:r}=Object(u.b)(),i=o()(t);return Object(a.useEffect)(()=>{s()(i)||r&&e&&t>i&&r(u.a.MESSAGE)},[t,r,i,e]),Object(l.jsx)(c.a.Fragment,null,n)})},521:function(e,t,n){"use strict";n.d(t,"g",(function(){return M})),n.d(t,"c",(function(){return L})),n.d(t,"f",(function(){return k})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return D})),n.d(t,"b",(function(){return U})),n.d(t,"a",(function(){return V}));n(36);var a,c=n(154),r=n.n(c),o=n(366),i=n.n(o),s=n(358),u=n.n(s),l=n(319),d=n(327),b=n(315),O=n.n(b);function j(){return(j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const p=({svgRef:e,title:t,...n})=>O.a.createElement("svg",j({viewBox:"0 0 14 11.063",ref:e},n),t?O.a.createElement("title",null,t):null,a||(a=O.a.createElement("g",null,O.a.createElement("path",{d:"M6.979 4.274c-1.128 0-2.081.951-2.083 2.08A2.101 2.101 0 0 0 7 8.48a2.1 2.1 0 0 0 2.102-2.099 2.1 2.1 0 0 0-2.123-2.107z"}),O.a.createElement("path",{d:"M13.5 2.063h-3.052c-.02-.016-.039-.031-.057-.058C9.99 1.386 9.581.772 9.184.151 9.108.032 9.024 0 8.891 0 7.616.004 6.34.004 5.065.001c-.09 0-.143.026-.192.101-.42.635-.844 1.267-1.262 1.903a.202.202 0 0 1-.059.058H.5a.5.5 0 0 0-.5.5v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.5zM7.351 9.858c-2.052.198-3.653-1.335-3.832-3.115a3.501 3.501 0 0 1 3.396-3.865 3.496 3.496 0 0 1 3.582 3.372 3.494 3.494 0 0 1-3.146 3.608z"})))),f=O.a.forwardRef((e,t)=>O.a.createElement(p,j({svgRef:t},e)));n.p;var h=n(794),g=n(330),m=n(413),v=n(336),y=n(333),C=n(467),I=n(379),E=n(98),T=n(349),x=n(1018);const S=/^CASE_(\w+)/,w=/^CONVERSATION_(\w+)/,_=Object(l.defineMessages)({image:{id:"image",defaultMessage:"Image"},video:{id:"video",defaultMessage:"Video"},attachment:{id:"attachment",defaultMessage:"Attachment"},card:{id:"card",defaultMessage:"Card"},carousel:{id:"carousel",defaultMessage:"Carousel"},progressBar:{id:"progressBar",defaultMessage:"Progress Bar"},audio:{id:"audio",defaultMessage:"Audio"},document:{id:"document",defaultMessage:"Document"},form:{id:"form",defaultMessage:"Form"},contactDetailsForm:{id:"contactDetailsForm",defaultMessage:"Contact Details Form"},feedbackSurvey:{id:"feedbackSurvey",defaultMessage:"Feedback Survey"},secureForm:{id:"secureForm",defaultMessage:"Secure Form"},survey:{id:"survey",defaultMessage:"Survey"},cobrowseInvite:{id:"cobrowseInvite",defaultMessage:"Co-browse invite"},quickSelectCard:{id:"quickSelectCard",defaultMessage:"Quick Select Card"},disclaimerCard:{id:"disclaimerCard",defaultMessage:"Disclaimer Card"},appointment:{id:"appointment",defaultMessage:"Appointment"},faq:{id:"faq",defaultMessage:"Frequently Asked Questions"},productCard:{id:"productCard",defaultMessage:"Product Card"},productShowcaseCard:{id:"productShowcaseCard",defaultMessage:"Product Showcase Card"},productBanner:{id:"productBanner",defaultMessage:"Product Banner"},productList:{id:"productList",defaultMessage:"Product List"}}),A={[T.b.IMAGE]:_.image,[T.b.VIDEO]:_.video,[T.b.CARD]:_.card,[T.b.CAROUSEL]:_.carousel,[T.b.RICH_TEXT_CAROUSEL]:_.carousel,[T.b.PROGRESS_BAR]:_.progressBar,[T.b.AUDIO]:_.audio,[T.b.DOCUMENT]:_.document,[T.b.CONTACT_DETAILS_FORM]:_.contactDetailsForm,[T.b.FORM]:_.form,[T.b.FEEDBACK_FORM]:_.feedbackSurvey,[T.b.SECURE_FORM]:_.secureForm,[T.b.SURVEY]:_.survey,[T.b.CO_BROWSE_INVITE]:_.cobrowseInvite,[T.b.QUICK_SELECT_CARD]:_.quickSelectCard,[T.b.DISCLAIMER_CARD]:_.disclaimerCard,[T.b.APPOINTMENT]:_.appointment,[T.b.FAQ]:_.faq,[T.b.PRODUCT_CARD]:_.productCard,[T.b.PRODUCT_SHOWCASE_CARD]:_.productShowcaseCard,[T.b.PRODUCT_BANNER]:_.productBanner,[T.b.PRODUCT_LIST]:_.productList,DEFAULT:_.attachment},R={[T.b.IMAGE]:{Component:f,label:_.image,name:d.a.CAMERA},[T.b.VIDEO]:{Component:h.a,label:_.video,name:d.a.ATTACHMENT},[T.b.CARD]:{Component:h.a,label:_.card,name:d.a.ATTACHMENT},[T.b.CAROUSEL]:{Component:h.a,label:_.carousel,name:d.a.ATTACHMENT},[T.b.RICH_TEXT_CAROUSEL]:{Component:h.a,label:_.carousel,name:d.a.ATTACHMENT},[T.b.PROGRESS_BAR]:{Component:h.a,label:_.progressBar,name:d.a.ATTACHMENT},[T.b.AUDIO]:{Component:h.a,label:_.audio,name:d.a.ATTACHMENT},[T.b.DOCUMENT]:{Component:h.a,label:_.document,name:d.a.ATTACHMENT},[T.b.CONTACT_DETAILS_FORM]:{Component:h.a,label:_.contactDetailsForm,name:d.a.ATTACHMENT},[T.b.FORM]:{Component:h.a,label:_.form,name:d.a.ATTACHMENT},[T.b.FEEDBACK_FORM]:{Component:h.a,label:_.feedbackSurvey,name:d.a.ATTACHMENT},[T.b.SECURE_FORM]:{Component:h.a,label:_.secureForm,name:d.a.ATTACHMENT},[T.b.SURVEY]:{Component:h.a,label:_.survey,name:d.a.ATTACHMENT},DEFAULT:{Component:h.a,label:_.attachment,name:d.a.ATTACHMENT}},N=e=>e&&!!e.match(w),M=e=>e&&!!e.match(S),L=e=>M(e)?e.match(S)[0].split("_")[1]:void 0;function k(e,t,n){const a=Object(v.e)(e),c=Object(y.p)(Object(v.c)(e)),o=Object(m.a)(a),i=Object(m.d)(a),s=g.a.getMaximumOpenConversations(t),l=r()(s,"limit"),d=Object(y.u)(c),b=!!l&&!u()(d)&&l<=d,O=!!r()(s,"replaceNewConversationButton");let j;return o?j=i:b&&(j=O?void 0:n(s,"label")),{isLocked:o||b,lockReason:j}}const P=(e,t)=>{const n=i()(I.a.getReadStatusList(e),e=>e.userId===t);return r()(n,"unreadCount",0)},D=e=>{const t=Object(v.c)(e),n=Object(y.p)(t),a=Object(C.a)().location.pathname,c=Object(x.a)(a,{path:"/conversation/:conversationId/:transientId?"});if(!c)return{isConversationPath:!1,conversationId:void 0};const o=r()(c,"params.conversationId"),i=r()(c,"params.transientId");if("survey"===i)return{isConversationPath:!0,conversationId:o};if("all"===o)return{isConversationPath:!1,conversationId:void 0};if("new"===o)return{isConversationPath:!0,conversationId:i||E.e};if("last"===o){return{isConversationPath:!0,conversationId:Object(y.b)(n)?Object(y.d)(Object(y.v)(t))||E.e:void 0}}return N(o)?{isConversationPath:!0,conversationId:o}:M(o)?{isConversationPath:!0,conversationId:Object(y.i)(n,L(o))}:{isConversationPath:!0,conversationId:o}},U=e=>R[e]||R.DEFAULT,V=e=>A[e]||A.DEFAULT},522:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return p}));var a=n(479),c=n.n(a),r=n(350),o=n.n(r),i=n(100),s=n.n(i),u=n(412),l=n.n(u),d=n(374);const b={};function O(e,t){const{topic:n,subscriber:a}=t;if(l()(n)&&s()(a)){const e=b[n];b[n]=e?[...e,a]:[a]}}function j(e,t){const{topic:n,subscriber:a}=t;if(l()(n)&&s()(a)){const e=b[n],t=c()(e,e=>e===a);-1!==t&&(e.splice(t,1),b[n]=e)}}function p({topic:e,payload:t}){const n=b[e];o()(n,(e,n)=>{try{e(t)}catch(a){Object(d.a)(a)}})}},523:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(323),c=n(315),r=n.n(c),o=n(316);const i=r.a.createContext(void 0),s=e=>function(t){return Object(o.jsx)(i.Consumer,null,n=>Object(o.jsx)(e,Object(a.a)({},t,{customization:n.otherConfigs})))};t.b=i},526:function(e,t,n){"use strict";var a=n(315),c=n(376),r=n(387);t.a=(e,{onSuccess:t,onFailure:n,ignoreResults:o})=>{const i=Object(a.useRef)(0),[s,u]=Object(a.useState)(),l=c.a.getType(e),d=c.a.getUrl(e),b=Object(a.useCallback)(()=>(i.current+=1,i.current),[]),O=Object(a.useCallback)(e=>i.current===e,[]);return[Object(a.useCallback)(async e=>{const a=b();try{const n=await r.a[l](d,e);return!o&&O(a)&&u(n.data),t&&t(n.data),n.data}catch(c){throw n&&n(c),!o&&O(a)&&u(void 0),c}},[l,d,b,O]),{data:s}]}},527:function(e,t,n){"use strict";n.d(t,"l",(function(){return b})),n.d(t,"h",(function(){return O})),n.d(t,"j",(function(){return j})),n.d(t,"i",(function(){return p})),n.d(t,"g",(function(){return h})),n.d(t,"m",(function(){return g})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"e",(function(){return I})),n.d(t,"f",(function(){return E})),n.d(t,"a",(function(){return T})),n.d(t,"k",(function(){return x}));var a=n(317),c=n(154),r=n.n(c),o=n(316),i=n(318),s=n(368),u=n(465),l=n(668);const d={PULSE:e=>{const t=Object(i.e)("trigger.borderColor")({theme:e}),n=o.keyframes`
  0% {
    box-shadow: 0 0 0 0 ${Object(s.i)(t,.6)};
  }
  100% {
    box-shadow: 0 0 0 10px ${Object(s.i)(t,0)};
  }
`;return Object(o.css)("animation:",n," 2s ease infinite;")}},b=e=>{const{triggerAnimationInfo:t,theme:n}=e,a=r()(t,"effect"),c=d[a];return c?c(n):""},O=e=>{const t=Object(i.e)("trigger.yPadding")({theme:e});return 0===t?20:t},j=e=>0===Object(i.e)("trigger.xPadding")({theme:e})?20:Object(i.e)("trigger.xPadding")({theme:e}),p=({leftOffset:e=0,rightOffset:t=0}={})=>({theme:n})=>{const a=Object(i.e)("trigger.align","right")({theme:n});return`${a}: ${j(n)+("left"===a?e:t)}px`},f=e=>.13*Object(i.e)("trigger.overlayIconButton.button.height")(e),h=e=>O(e.theme)+Object(i.e)("trigger.size")(e)-.5*Object(i.e)("trigger.overlayIconButton.button.height")(e)-(.146*Object(i.e)("trigger.size")(e)-f(e)),g=e=>-.5*Object(i.e)("trigger.overlayIconButton.button.height")(e)+(.146*Object(i.e)("trigger.size")(e)-f(e)),m=Object(a.a)("div",{target:"e1hh16yv0"})("width:",e=>Object(i.e)("trigger.overlayIconButton.button.width")(e),"px;height:",e=>Object(i.e)("trigger.overlayIconButton.button.height")(e),"px;border-radius:50%;background-color:",Object(i.e)("trigger.removeIcon.backgroundColor"),";bottom:",e=>h(e),"px;",e=>p({leftOffset:g(e),rightOffset:g(e)})(e),";position:fixed;z-index:",e=>Object(i.e)("frame.zIndex")(e),";transform:translatez(",e=>Object(i.e)("frame.translateZ")(e),"px);cursor:pointer;display:flex;align-items:center;justify-content:center;visibility:hidden;"),v=Object(a.a)("div",{target:"e1hh16yv1"})({name:"l1tuuh",styles:"width:100%;height:100%;display:flex;align-items:center;justify-content:center;"}),y=Object(a.a)(l.a,{target:"e1hh16yv2"})("width:",e=>Object(i.e)("trigger.overlayIconButton.icon.width")(e),"px;height:",e=>Object(i.e)("trigger.overlayIconButton.icon.height")(e),"px;fill:",Object(i.e)("trigger.removeIcon.fill"),";"),C=`\n  ${m} {\n    visibility: visible;\n  }\n  & ~ .notification-container {\n    visibility: hidden;\n  }\n`,I=Object(a.a)("div",{target:"e1hh16yv3"})(e=>e.enableTriggerHideIcon&&`\n    &:hover {\n      ${e.applyRemoveIconStyles&&C};\n    }\n  `,";"),E=Object(a.a)("div",{target:"e1hh16yv4"})("background:transparent;overflow:hidden;box-shadow:",Object(i.e)("trigger.boxShadow"),";border-radius:",e=>Object(i.e)("trigger.size")(e)/2,"px;bottom:",e=>O(e.theme),"px;height:",Object(i.e)("trigger.size"),"px;position:fixed;",p(),";transition:",({enableTriggerWidthTransition:e})=>e?"width 0.08s":"none",";visibility:",({showTrigger:e})=>e?"visible":"hidden",";width:",({showLabel:e,labelWidth:t,showTrigger:n,theme:a})=>e?n?t+26+8+48+"px":"100%":Object(i.e)("trigger.size")({theme:a})+"px",";z-index:",e=>Object(i.e)("frame.zIndex")(e),";transform:translatez(",e=>Object(i.e)("frame.translateZ")(e),"px);"),T=Object(a.a)(u.a,{target:"e1hh16yv5"})("border-radius:",e=>Object(i.e)("trigger.size")(e)/2,"px;border:0 none;height:100%;width:100%;"),x=(e,t)=>{const n=!(Object(i.e)("trigger.icon.url")({theme:e})&&t.isMinimized);return Object(o.css)("body{",n&&"background-color: "+Object(i.e)("trigger.backgroundColor")({theme:e}),";}")}},529:function(e,t,n){"use strict";var a=n(315),c=n(1031);t.a=function(){return Object(a.useContext)(c.a)}},530:function(e,t,n){"use strict";var a=n(315);const c=n.n(a).a.createContext(void 0);t.a=c},552:function(e,t,n){"use strict";var a=n(315),c=n(346),r=n.n(c),o=n(96),i=n.n(o),s=n(68),u=n.n(s),l=n(450),d=n.n(l),b=n(100),O=n.n(b),j=n(350),p=n.n(j),f=n(411),h=n(322);let g=[],m=!1;const v=()=>Object(f.a)().history,y=()=>{try{g.length>0&&setTimeout(()=>{try{p()(g,e=>e())}catch(e){Object(h.b)(e)}},0)}catch(e){g=[],Object(h.b)(e)}},C=()=>{const e=Object(f.a)();Object(f.b)(e)&&!m&&((()=>{if(m)return;m=!0;const e=Object(f.a)(),t=v().pushState,n=v().replaceState;e.history.pushState=function(...n){const a=t.call(e.history,...n);return y(),a},e.history.replaceState=function(...t){const a=n.call(e.history,...t);return y(),a}})(),e.addEventListener("popstate",y),e.addEventListener("hashchange",y))};var I=()=>Object(a.useCallback)(e=>((e=>{O()(e)&&(g.push(e),C())})(e),()=>{(e=>{O()(e)&&(g=d()(g,t=>t!==e))})(e)}),[]),E=n(390);t.a=()=>{const e=I(),t=Object(a.useRef)(Object(E.b)()),n=Object(a.useRef)({}),c=Object(a.useRef)(""),o=Object(a.useCallback)(()=>{c.current=t.current,t.current=Object(E.b)(),c.current!==t.current&&i()(n.current,e=>{e({currentUrl:t.current,previousUrl:c.current})})},[]);return{subscribe:Object(a.useCallback)((t,a)=>{n.current={...n.current,[t]:a};let c=null;return 1===u()(n.current).length&&(c=e(o)),()=>{n.current=r()(n.current,t),0===u()(n.current).length&&null!==c&&c()}},[]),getValue:Object(a.useCallback)(()=>t.current,[])}}},560:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(411),c=n(9);const r=()=>Object(c.J)()&&Object(a.c)(),o=()=>Object(c.K)()&&Object(a.c)()},564:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return O}));var a=n(366),c=n.n(a),r=n(154),o=n.n(r),i=n(613),s=n.n(i),u=n(469),l=n(682);const d=(e,t)=>window.requestIdleCallback?window.requestIdleCallback(e,t):window.requestAnimationFrame(e),b=e=>{const t=c()(u.a,t=>o()(t,"id")===e);return"rtl"===o()(t,"dir")},O=(e,t)=>{const n=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),c=Math.floor(e/36e5);let r="";return c&&(r=""+t(1===c?l.a.hr:l.a.hrs,{time:c})),a&&(r+=" "+t(1===a?l.a.min:l.a.mins,{time:a})),c||a||!n||(r+=" "+t(1===n?l.a.sec:l.a.secs,{time:n})),r.trim()};s()(()=>{const e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);const t=document.createElement("div");e.appendChild(t);const n=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),n})},566:function(e,t,n){"use strict";var a=n(315),c=n(1011);t.a=function(){return Object(a.useContext)(c.b)}},567:function(e,t,n){"use strict";t.a={IMAGE:"IMAGE",VIDEO:"VIDEO",DIALOGUE:"DIALOGUE"}},569:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(323),c=(n(315),n(154)),r=n.n(c),o=n(596);n.d(t,"b",(function(){return o.b}));var i=n(480),s=n(357),u=n(330),l=n(331),d=n(344),b=n(316);const O=e=>{const t=Object(i.a)(),n=Object(l.a)(d.d),c=s.a.getDefaultLocale(e.applicationConfig),O=s.a.getSupportedLocales(e.applicationConfig),j=u.a.getExternalLocaleData(s.a.getCustomizationConfig(e.applicationConfig)),p=r()(t,"timeZone");return Object(b.jsx)(o.a,Object(a.a)({onLoadLocaleData:n,defaultLocale:c,supportedLocales:O,externalLocaleData:j,timeZone:p},e))};t.c=o.c},570:function(e,t,n){var a=n(795),c=n(796),r=n(99),o=n(11),i=n(157);e.exports=function(e,t,n){var s=o(e)?a:c;return n&&i(e,t,n)&&(t=void 0),s(e,r(t,3))}},572:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));const a=["video/mp4","video/quicktime"],c=["audio/mp3","audio/x-mp3","audio/mpeg","audio/x-mpeg","audio/mpeg3","audio/x-mpeg-3"],r=[...c,"audio/wav","audio/x-wav","audio/wave","audio/x-wave","audio/vnd.wave"],o=["image/jpeg","image/png","image/gif"],i=["application/pdf","text/plain","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/onenote","application/json"]},573:function(e,t,n){"use strict";var a=n(315),c=n(36),r=n.n(c),o=n(446),i=n(574),s=n(376),u=n(390),l=n(383);const d=(new s.a).setUrl("/livechat/prompt/browse/event").setType(l.a.POST).build();t.a=({skipQueryOnMount:e,payload:t}={skipQueryOnMount:!1})=>{const{refetch:n,...c}=Object(o.a)({query:d,skipQueryOnMount:e,payload:{...t,sourceType:"PROACTIVE_PROMPT"}}),s=Object(a.useRef)([]),l=Object(i.a)(),b=Object(a.useRef)(l);b.current=l;const O=Object(a.useCallback)(e=>{const t={...e,sourceType:"PROACTIVE_PROMPT",page:Object(u.a)().pageUrl,userAgent:Object(u.a)().userAgent,timeZone:Object(u.a)().timeZone};b.current?n(t):s.current=[...s.current,t]},[n]);return Object(a.useEffect)(()=>{l&&!r()(s.current)&&(n(s.current),s.current=[])},[l]),{...c,refetch:O}}},574:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(315);const c=()=>{const[e,t]=Object(a.useState)("visible"===document.visibilityState);return Object(a.useEffect)(()=>{const e=()=>{const{visibilityState:e}=document;"hidden"===e&&t(!1),"visible"===e&&t(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[]),e}},575:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(4),c=n(3);const r=Object(a.a)("type"),o=Object(a.a)("value"),i=Object(a.a)("additional");class s{}s.getType=Object(c.a)(r),s.getValue=Object(c.a)(o),s.getAdditional=Object(c.a)(i)},593:function(e,t,n){"use strict";var a=n(315),c=n(345),r=n.n(c),o=n(1006),i=n(552),s=n(343);var u=()=>{const{subscribe:e,getValue:t}=Object(i.a)();return{subscribe:Object(a.useCallback)((t,n)=>{const a=s.a.getId(t);return e(a,n)},[e]),getValue:t}},l=n(346),d=n.n(l),b=n(360),O=n.n(b),j=n(154),p=n.n(j),f=n(388),h=n.n(f),g=n(350),m=n.n(g),v=n(471),y=n.n(v),C=(n(323),n(1009));n(316);var I=function(){return Object(a.useContext)(C.b)},E=n(338);const T=(e,t)=>(h()(p()(e,t))||E.a).startTime||0,x=({startTime:e,expectedElapsedTime:t,onTimeout:n})=>{const a=t-(e?Date.now()-e:0);let c;return a>0&&(c=window.setTimeout(()=>{n()},a)),c};var S=()=>{const{pagesMetaData:e,currentPageUrl:t}=I(),n=Object(a.useRef)(T(e,t));n.current=T(e,t);const c=Object(a.useRef)({}),r=Object(a.useCallback)((e,t)=>{const a=s.a.getId(e),r=O()(s.a.getValues(e));return c.current={...c.current,[a]:{timeoutId:x({startTime:n.current,expectedElapsedTime:r,onTimeout:t}),onChangeCallback:t,filterValue:r}},()=>{clearTimeout(p()(c.current,a+".timeoutId")),c.current=d()(c.current,a)}},[]);y()(()=>{m()(c.current,e=>{const{timeoutId:t,onChangeCallback:a,filterValue:c}=e;clearTimeout(t),a(),e.timeoutId=x({startTime:n.current,expectedElapsedTime:c,onTimeout:a})})},[t]);return{subscribe:r,getValue:Object(a.useCallback)(()=>n.current?Date.now()-n.current:0,[])}},w=n(320),_=n(685),A=n.n(_),R=n(96),N=n.n(R),M=n(358),L=n.n(M),k=n(333),P=n(332),D=n(331),U=n(351),V=n(402);const F=e=>Object(k.u)(Object(k.p)(Object(P.c)(e))),G={fetchOpenConversationCount:U.j,initPusherConnection:V.e};var B=()=>{const e=Object(a.useRef)(),t=Object(a.useRef)({}),{fetchOpenConversationCount:n,initPusherConnection:c}=Object(D.a)(G),r=Object(w.d)(F);e.current=r;const o=A()(r);Object(a.useEffect)(()=>{L()(e.current)&&n()},[]),y()(()=>{N()(t.current,e=>{e()})},[e.current]),y()(()=>{L()(o)&&r&&c()},[r,o,c]);return{subscribe:Object(a.useCallback)((e,n)=>{const a=s.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=d()(t.current,a)}},[]),getValue:Object(a.useCallback)(()=>e.current,[])}},z=n(452),H=n(391);var W=()=>{const e=Object(a.useRef)(0),t=Object(z.a)();e.current=H.a.getTimeToAvailability(t);const n=Object(a.useRef)({}),c=Object(a.useCallback)(()=>e.current,[]);return{subscribe:Object(a.useCallback)((t,a)=>{const c=s.a.getId(t),r=p()(t,"details.timeToBusinessHours");let o,i=-1;return!L()(r)&&r>0?i=r:!L()(e.current)&&e.current>0&&(i=e.current),i>=0&&(o=window.setTimeout(a,i)),n.current={...n.current,[c]:o},()=>{clearTimeout(p()(n.current,c+".timeoutId")),n.current=d()(n.current,c)}},[]),getValue:c}};var $=()=>{const e=Object(a.useRef)(0),t=Object(z.a)();e.current=H.a.getNoOfAgentsAvailable(t);const n=Object(a.useRef)({});y()(()=>{N()(n.current,e=>{e()})},[e.current]);return{subscribe:Object(a.useCallback)((e,t)=>{const a=s.a.getId(e);return n.current={...n.current,[a]:t},()=>{n.current=d()(n.current,a)}},[]),getValue:Object(a.useCallback)(()=>e.current,[])}};var q=()=>{const e=Object(a.useRef)(0),t=Object(z.a)();e.current=H.a.getNumberOfPendingCases(t);const n=Object(a.useRef)({});y()(()=>{N()(n.current,e=>{e()})},[e.current]);return{subscribe:Object(a.useCallback)((e,t)=>{const a=s.a.getId(e);return n.current={...n.current,[a]:t},()=>{n.current=d()(n.current,a)}},[]),getValue:Object(a.useCallback)(()=>e.current,[])}},Y=n(480);var K=()=>{const{device:e}=Object(Y.a)(),t=Object(a.useRef)({}),n=Object(a.useRef)(e);n.current=e,y()(()=>{N()(t.current,e=>{e()})},[n.current]);const c=Object(a.useCallback)((e,n)=>{const a=s.a.getId(e);return t.current={...t.current,[a]:n},()=>{t.current=d()(t.current,a)}},[]);return{getValue:Object(a.useCallback)(()=>n.current,[]),subscribe:c}},Z=n(419);const Q="city",J="countryLong",X="region";var ee=()=>{const e=Object(a.useRef)(0),t=Object(z.a)();e.current=H.a.getUserIPDetails(t);const n=Object(a.useRef)({});y()(()=>{N()(n.current,e=>{e()})},[e.current]);return{subscribe:Object(a.useCallback)((e,t)=>{const a=s.a.getId(e);return n.current={...n.current,[a]:t},()=>{n.current=d()(n.current,a)}},[]),getValue:Object(a.useCallback)(()=>t=>{const n=s.a.getField(t),a=e.current||E.a;switch(n){case Z.a.USER_IP_DETAILS_CITY:return a[Q];case Z.a.USER_IP_DETAILS_COUNTRY:return a[J];case Z.a.USER_IP_DETAILS_REGION:return a[X];default:return}},[])}},te=n(390);var ne=()=>{const{getValue:e,subscribe:t}=u(),{getValue:n,subscribe:c}=S(),{getValue:r,subscribe:o}=B(),{getValue:i,subscribe:l}=W(),{getValue:d,subscribe:b}=$(),{getValue:O,subscribe:j}=q(),{getValue:p,subscribe:f}=K(),{getValue:h,subscribe:g}=ee();return{getValue:Object(a.useCallback)(()=>({[Z.a.CURRENT_URL]:e(),[Z.a.TOTAL_TIME_SPENT]:n(),[Z.a.IS_CONVERSATION_OPEN]:r(),[Z.a.AVAILABLE_AGENTS]:d(),[Z.a.AGENT_OUT_OF_CAPACITY]:O(),[Z.a.BUSINESS_HOURS]:i(),[Z.a.DEVICE_TYPE]:p(),[Z.a.USER_IP_DETAILS_CITY]:h(),[Z.a.USER_IP_DETAILS_COUNTRY]:h(),[Z.a.USER_IP_DETAILS_REGION]:h(),[Z.a.USER_AGENT]:Object(te.e)()}),[e,n,r,i,d,O,p,h]),subscribe:Object(a.useCallback)((e,n)=>{switch(s.a.getField(e)){case Z.a.TOTAL_TIME_SPENT:return c(e,n);case Z.a.CURRENT_URL:return t(e,n);case Z.a.IS_CONVERSATION_OPEN:return o(e,n);case Z.a.AVAILABLE_AGENTS:return b(e,n);case Z.a.AGENT_OUT_OF_CAPACITY:return j(e,n);case Z.a.BUSINESS_HOURS:return l(e,n);case Z.a.DEVICE_TYPE:return f(e,n);case Z.a.USER_IP_DETAILS_CITY:case Z.a.USER_IP_DETAILS_COUNTRY:case Z.a.USER_IP_DETAILS_REGION:return g(e,n);default:return null}},[t,c,o,l,b,j,f,g])}};t.a=(e,t)=>{const{_getStaticValueMap:n=r.a}=t||E.a,{getValue:c,subscribe:i}=ne(),s=Object(a.useCallback)(()=>({...n(),...c()}),[c,n]);return Object(o.a)(e,{...t,getValue:s,subscribe:i})}},596:function(e,t,n){"use strict";n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return I}));var a=n(323),c=n(315),r=n.n(c),o=n(319),i=n(358),s=n.n(i),u=n(367),l=n.n(u);var d={en:()=>n.e(52).then(n.bind(null,1761)),es:()=>n.e(53).then(n.bind(null,1762)),ml:()=>n.e(72).then(n.bind(null,1763)),ar:()=>n.e(47).then(n.bind(null,1764)),he:()=>n.e(58).then(n.bind(null,1765)),zh:()=>n.e(111).then(n.bind(null,1766)),ko:()=>n.e(65).then(n.bind(null,1767)),ja:()=>n.e(64).then(n.bind(null,1768)),tr:()=>n.e(108).then(n.bind(null,1769)),pt:()=>n.e(80).then(n.bind(null,1770)),de:()=>n.e(51).then(n.bind(null,1771)),sv:()=>n.e(104).then(n.bind(null,1772)),da:()=>n.e(50).then(n.bind(null,1773)),fi:()=>n.e(55).then(n.bind(null,1774)),et:()=>n.e(54).then(n.bind(null,1775)),lt:()=>n.e(68).then(n.bind(null,1776)),lv:()=>n.e(69).then(n.bind(null,1777)),nb:()=>n.e(75).then(n.bind(null,1778)),id:()=>n.e(61).then(n.bind(null,1779)),vi:()=>n.e(110).then(n.bind(null,1780)),th:()=>n.e(107).then(n.bind(null,1781)),fr:()=>n.e(56).then(n.bind(null,1782)),cs:()=>n.e(49).then(n.bind(null,1783)),sk:()=>n.e(96).then(n.bind(null,1784)),ro:()=>n.e(94).then(n.bind(null,1785)),hu:()=>n.e(60).then(n.bind(null,1786)),it:()=>n.e(63).then(n.bind(null,1787)),hr:()=>n.e(59).then(n.bind(null,1788)),sr:()=>n.e(99).then(n.bind(null,1789)),sl:()=>n.e(97).then(n.bind(null,1790)),sq:()=>Promise.all([n.e(4),n.e(98)]).then(n.bind(null,1791)),mk:()=>Promise.all([n.e(4),n.e(71)]).then(n.bind(null,1792)),bs:()=>Promise.all([n.e(4),n.e(48)]).then(n.bind(null,1793)),"zh-HK":()=>n.e(113).then(n.bind(null,1794)),"zh-TW":()=>n.e(114).then(n.bind(null,1795)),"zh-CN":()=>n.e(112).then(n.bind(null,1796)),nl:()=>n.e(76).then(n.bind(null,1797)),pl:()=>n.e(79).then(n.bind(null,1798)),ms:()=>n.e(74).then(n.bind(null,1799)),ru:()=>n.e(95).then(n.bind(null,1800))},b=n(497);const O=({locale:e,language:t,defaultLocale:n,dataGetter:a})=>[e,t,n].find(e=>a[e]);function j({locale:e,language:t,defaultLocale:n}){const a=O({locale:e,language:t,defaultLocale:n,dataGetter:d});return a?d[a]():Promise.reject()}function p({locale:e,language:t,defaultLocale:n,localeFiles:a}){const c=a&&O({locale:e,language:t,defaultLocale:n,dataGetter:a});return c?Object(b.d)(a[c]):Promise.reject()}var f=n(689),h=n(564),g=n(469),m=n(338),v=n(316);const y=Object(f.a)(),C=r.a.createContext({locale:y,language:Object(f.b)(y),defaultLocale:y,direction:g.b.LTR}),I=e=>{const[t,n]=r.a.useState(!1),[a,i]=r.a.useState({messages:{}}),{onLoadLocaleData:u,supportedLocales:d,externalLocaleData:b,timeZone:O}=e,I=Object(c.useMemo)(()=>{const t=e.defaultLocale||y;let n=t;s()(d)?n=e.locale||t:l()(d,e.locale)?n=e.locale:l()(d,Object(f.b)(e.locale))&&(n=Object(f.b)(e.locale));const a=Object(f.b)(n);return{locale:n,language:a,defaultLocale:t,direction:Object(h.b)(a)?g.b.RTL:g.b.LTR}},[e.locale]);return Object(c.useEffect)(()=>{Promise.allSettled([j(I),p({...I,localeFiles:b})]).then(([e,t])=>{const a=e.value||m.a,c=t.value||m.a;"rejected"!==e.status&&Object(o.addLocaleData)(a.intlData),Intl.DateTimeFormat.__setDefaultTimeZone&&Intl.DateTimeFormat.__setDefaultTimeZone(O),i({locale:a.locale,messages:{...a.messages,...c}}),n(!0)})},[I,i,n]),Object(c.useEffect)(()=>{t&&u&&u(a.messages)},[t,a,u]),t?Object(v.jsx)(C.Provider,{value:I},Object(v.jsx)(o.IntlProvider,{locale:a.locale,messages:a.messages,defaultLocale:I.defaultLocale},e.children)):null},E=e=>function(t){return Object(v.jsx)(C.Consumer,null,n=>Object(v.jsx)(e,Object(a.a)({},t,{intlContext:n})))};C.Consumer;t.c=C},597:function(e,t,n){"use strict";n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return C}));var a=n(315),c=n.n(a),r=n(1023),o=n.n(r),i=n(1022),s=n(791),u=n(320),l=n(154),d=n.n(l),b=n(337),O=n(330);const j=()=>{const e=Object(b.a)();return!!d()(O.a.getUserPreferences(e),"enableSoundNotification")};var p=n(332),f=n(400);const h=e=>Object(f.e)(Object(p.b)(e));var g=n(316);const m={MESSAGE:"MESSAGE",AGENT_ASSIGNMENT:"AGENT_ASSIGNMENT",CALL:"CALL"},v=c.a.createContext({}),y={[m.MESSAGE]:"https://sprcdn-assets.sprinklr.com/738/notification-4de93778-e7e2-403b-9035-46fddfe6df16-1610394477.mp3",[m.AGENT_ASSIGNMENT]:"https://sprcdn-assets.sprinklr.com/787/6279cf0d-c15c-4f6b-8889-d1be2f9c0264-2132784780.wav",[m.CALL]:"https://sprcdn-assets.sprinklr.com/787/64639b8e-faae-45ad-b7c5-450884c15e2f-2786217496.mp3"},C=({children:e})=>{const[t,,n,c]=o()({src:"","data-testid":"messageAudio"}),[r,,l,d]=o()({src:"","data-testid":"callPickedByAgentNotifAudio"}),[b,,O,p]=o()({src:"",loop:!0,"data-testid":"callAudio"}),f=Object(s.a)(),C=(()=>{const e=Object(u.d)(h).enableSoundNotification.enabled,t=j();return e&&t})(),I=j(),E=Object(a.useCallback)(()=>{c.current&&(c.current.src=y.MESSAGE),d.current&&(d.current.src=y.AGENT_ASSIGNMENT),p.current&&(p.current.src=y.CALL)},[]),T=Object(a.useCallback)(e=>{switch(e){case m.MESSAGE:if(!C)return;return n.play();case m.AGENT_ASSIGNMENT:return l.play();case m.CALL:return O.play()}},[n,l,O,C]),x=Object(a.useCallback)(e=>{switch(e){case m.MESSAGE:return n.pause();case m.AGENT_ASSIGNMENT:return l.pause();case m.CALL:return O.pause()}},[n,l,O]),S=Object(a.useMemo)(()=>({play:T,pause:x}),[T,x]);return Object(g.jsx)(v.Provider,{value:S},Object(g.jsx)(i.b,{onClick:E},I&&t,f&&r,f&&b,e))};t.c=v},606:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var a=n(771);const c=({file:e,conversationId:t,sender:n,inReplyToChatMessageId:c})=>({type:a.b,payload:{file:e,conversationId:t,chatUserId:n,inReplyToChatMessageId:c}}),r=({initialMessages:e,createCase:t,conversationContext:n,silent:c,assignToUser:r,additional:o},i)=>({type:a.c,payload:{initialMessages:e,createCase:t,assignToUser:r,silent:c,conversationContext:n,additional:o},promise:i}),o=({conversationId:e},t)=>({type:a.a,payload:{conversationId:e},promise:t})},618:function(e,t,n){var a=n(99),c=n(777);e.exports=function(e,t){return e&&e.length?c(e,a(t,2)):[]}},668:function(e,t,n){"use strict";var a=n(323),c=n(315),r=n(410),o=n.n(r),i=n(370),s=n(154),u=n.n(s),l=n(328),d=n(1029),b=n(317),O=n(318);const j=Object(b.a)("div",{target:"e1hxxqun0"})("border-radius:20px;background-color:",e=>!e.svgLoaded&&Object(O.a)("azure")(e),";");var p=n(316);const f=({name:e,className:t,theme:n,window:r,css:i,onLoad:s,...l})=>{const b=Object(c.useMemo)(()=>`${e}_${o()()}`,[e]),[O,f]=Object(c.useState)(!1);return Object(c.useEffect)(()=>{O&&s&&s()},[O,s]),Object(c.useEffect)(()=>{const t=u()(n,["icons",e]);!async function(e,t,n,a){const c=e.document.getElementById(t),r=(await Object(d.a)(n)).documentElement.cloneNode(!0);r.setAttribute("class","spa full-height full-width"),r.setAttribute("style","top:0px; left:0px"),c&&c.appendChild(r),a()}(r,b,t,()=>{f(!0)})},[b,e]),Object(p.jsx)(j,Object(a.a)({key:b,className:"spr "+t,css:i,id:b,svgLoaded:O,"data-testid":"Custom header icon"},l))},h=e=>{const{name:t,className:n,theme:a,css:r,onClick:o,onKeyPress:i,alt:s,onLoad:l}=e,d=u()(a,"icons."+t);if(Object(c.useEffect)(()=>{!d&&l&&l()},[d,l]),d)return Object(p.jsx)(f,e);const b=s;return Object(p.jsx)(b,{className:n,css:r,onClick:o,onKeyPress:i,"aria-hidden":e["aria-hidden"],focusable:!!e.focusable})};t.a=Object(c.memo)(Object(l.c)(e=>Object(p.jsx)(i.FrameContextConsumer,null,({window:t})=>Object(p.jsx)(h,Object(a.a)({},e,{window:t})))))},673:function(e,t,n){var a=n(70),c=n(187),r=n(160),o=n(979),i=n(1350),s=n(161),u=n(69);e.exports=function(e,t,n){if((e=u(e))&&(n||void 0===t))return c(e);if(!e||!(t=a(t)))return e;var l=s(e),d=s(t),b=i(l,d),O=o(l,d)+1;return r(l,b,O).join("")}},682:function(e,t,n){"use strict";var a=n(319);t.a=Object(a.defineMessages)({hr:{id:"hr",defaultMessage:"{time} hr"},hrs:{id:"hrs",defaultMessage:"{time} hrs"},min:{id:"min",defaultMessage:"{time} min"},mins:{id:"mins",defaultMessage:"{time} mins"},sec:{id:"sec",defaultMessage:"{time} sec"},secs:{id:"secs",defaultMessage:"{time} secs"}})},685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(315);t.default=function(e){var t=a.useRef();return a.useEffect((function(){t.current=e})),t.current}},686:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={NEW:"NEW",EXISTING:"EXISTING",LAST:"LAST"}},687:function(e,t,n){"use strict";var a=function(){};e.exports=a},688:function(e,t,n){"use strict";var a=n(315),c=n(597);n.d(t,"a",(function(){return c.b})),t.b=function(){return Object(a.useContext)(c.c)}},689:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));const a=()=>"en",c=e=>e.toLowerCase().split(/[_-]+/)[0]},690:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(319);const c=Object(a.defineMessages)({agentViewingYourScreen:{id:"agentViewingYourScreen",defaultMessage:"{agentName} is viewing your screen"},agentControllingYourScreen:{id:"agentControllingYourScreen",defaultMessage:"{agentName} is controlling your screen"},screenSharing:{id:"screenSharing",defaultMessage:"Screen Sharing"},screenInControl:{id:"screenInControl",defaultMessage:"Screen in Control"},stopScreenControl:{id:"stopScreenControl",defaultMessage:"Stop Screen Control"},stopCobrowsing:{id:"stopCobrowsing",defaultMessage:"Stop Co-browsing"},allowScreenControl:{id:"allowScreenControl",defaultMessage:"Allow Screen Control"},cobrowseRemoteControlConfirmationMessage:{id:"cobrowseRemoteControlConfirmationMessage",defaultMessage:"{agentName} is requesting permission to control your screen. Clicking \u2018Accept\u2019 will allow {agentName} to interact with your screen."},accept:{id:"accept",defaultMessage:"Accept"},deny:{id:"deny",defaultMessage:"Deny"},settingUpCobrowsing:{id:"settingUpCobrowsing",defaultMessage:"Setting up Co-browsing with {agentName}"},cobrowsingFailed:{id:"cobrowsingFailed",defaultMessage:"Co-browsing Failed"},settingUpWentWrong:{id:"settingUpWentWrong",defaultMessage:"Sorry, something went wrong while setting up. Please try again in sometime."}})},742:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return j}));n(323);var a=n(315),c=n(529),r=n(1031),o=n(317),i=n(368),s=n(318),u=n(483);const l=Object(o.a)("div",{target:"e1r2xr2p0"})("top:0;left:0;margin:0;padding:0;overflow:hidden;z-index:",u.a.MODAL_FRAME,";position:absolute;width:100%;height:100%;background-color:",e=>Object(i.l)(.48,Object(s.a)("charcoal")(e)),";");var d=n(316);var b=({children:e})=>e?Object(d.jsx)(l,null,e):null;const O=e=>{const[t,n]=Object(a.useState)(void 0),c=Object(a.useMemo)(()=>({visibleModal:t,setVisibleModal:n}),[t,n]);return Object(d.jsx)(r.a.Provider,{value:c},e.children)},j=({id:e,children:t})=>{const{visibleModal:n}=Object(c.a)();return n!==e?null:Object(d.jsx)(b,null,t)}},743:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var a=n(323),c=n(315),r=n.n(c),o=n(36),i=n.n(o),s=n(320),u=n(324),l=n(331),d=n(685),b=n.n(d),O=n(420),j=n(688),p=n(431),f=n(597),h=n(336),g=n(418);const m=e=>Object(g.w)(Object(h.b)(e));var v=n(406);function y(){!function(){const e=Object(s.d)(m),{play:t,pause:n}=Object(j.b)(),a=Object(O.a)(),r=Object(p.a)();Object(c.useEffect)(()=>(e&&(a.info({message:"Playing incoming ringing tone"}),r.info({eventType:"CALL_RINGING"}),t(f.b.CALL)),()=>{a.info({message:"Pausing incoming ringing tone"}),n(f.b.CALL)}),[e,a])}(),function(){const e=Object(s.d)(v.u),{play:t,pause:n}=Object(j.b)(),a=Object(O.a)();Object(c.useEffect)(()=>(e&&(a.info({message:"Playing Outgoing ringing tone"}),t(f.b.CALL)),()=>{a.info({message:"Pausing Outgoing ringing tone"}),n(f.b.CALL)}),[e,a])}()}var C=n(1021),I=n(1024),E=n(400),T=n(332),x=n(340),S=n(344),w=n(316);const _=e=>Object(g.e)(Object(h.b)(e)),A=e=>Object(g.g)(Object(h.b)(e)),R=e=>Object(E.g)(Object(T.b)(e)),N=e=>Object(g.w)(Object(h.b)(e)),M=e=>Object(g.j)(Object(h.b)(e)),L=e=>Object(g.l)(Object(h.b)(e)),k=Object(x.a)(()=>n.e(15).then(n.bind(null,1828))),P=e=>{const t=Object(u.a)(),n=Object(s.d)(A),r=Object(s.d)(_),o=Object(s.d)(N),d=Object(s.d)(R),j=Object(l.a)(S.g),p=Object(s.d)(M),f=Object(s.d)(L),h=Object(O.a)();y();const g=b()(p);return Object(c.useEffect)(()=>{t&&d&&p&&p!==g&&j()},[t,d,p,g,j]),Object(c.useEffect)(()=>{const e=()=>{h.info({message:"Currently on live chat tab: "+!document.hidden})};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[h]),i()(n)&&(o||i()(r))||t&&d&&!f?null:Object(w.jsx)(c.Suspense,{fallback:null},Object(w.jsx)(k,Object(a.a)({},e,{outgoingCallDetails:n,incomingCallDetails:r})))},D=e=>Object(g.d)(Object(h.b)(e)),U=e=>Object(g.q)(Object(h.b)(e));t.b=r.a.memo(e=>{const t=Object(s.d)(D),n=Object(s.d)(U);return Object(w.jsx)(I.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId},Object(w.jsx)(C.b,{videoConversationId:t.videoConversationId,conversationId:t.conversationId,isAudioCall:n},Object(w.jsx)(P,e)))})},748:function(e,t,n){"use strict";var a=n(317),c=(n(315),n(318)),r=n(359),o=n(323),i=n(319),s=n(316);var u=e=>Object(s.jsx)("div",{className:"sr-only"},Object(s.jsx)(i.FormattedMessage,Object(o.a)({},e.message,{values:{count:""+e.unreadCount}})));const l=Object(a.a)("div",{target:"e1bo82op0"})("background:",Object(c.e)("notification.backgroundColor"),";color:",Object(c.e)("notification.color"),";font-size:",Object(c.d)("xs"),";font-weight:600;box-shadow:0px 2px 4px 0px rgba(0,0,0,0.2);border-radius:50%;");t.a=function(e){return Object(s.jsx)(l,{"aria-live":"polite",className:"center-x-y "+e.className},Object(s.jsx)(u,{message:1===e.count?r.a.newNotification:r.a.newNotifications}),(t=e.count)>=10?"9+":t);var t}},751:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n(315),c=n(481);function r(e){return e.width<=430||e.width<=930&&e.height<=430}t.a=function(){const e=Object(c.a)();return Object(a.useMemo)(()=>r(e),[e])}},752:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(315),c=n(1759),r=n(340),o=n(154),i=n.n(o),s=n(567);var u=e=>{if(!e.search.includes("preview=1"))return null;const t=i()(e.state,"sprPreview.type");switch(t){case s.a.DIALOGUE:return{type:t,message:i()(e.state,"sprPreview.message"),title:i()(e.state,"sprPreview.title"),cancelLabel:i()(e.state,"sprPreview.cancelLabel"),confirmationLabel:i()(e.state,"sprPreview.confirmationLabel"),onConfirm:i()(e.state,"sprPreview.onConfirm"),onCancel:i()(e.state,"sprPreview.onCancel")};case s.a.IMAGE:case s.a.VIDEO:return{type:t,url:i()(e.state,"sprPreview.url"),downloadParams:i()(e.state,"sprPreview.downloadParams")};default:return null}},l=n(316);const d=Object(r.a)(()=>Promise.all([n.e(1),n.e(25)]).then(n.bind(null,1818)));t.b=Object(c.a)(({location:e})=>{const t=Object(a.useMemo)(()=>u(e),[e.search,e.state]);return t?Object(l.jsx)(a.Suspense,{fallback:null},Object(l.jsx)(d,{previewItem:t})):null})},771:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));const a="@conversation/NEW_CONVERSATION_OPEN",c="@conversation/EXISTING_CONVERSATION_OPEN",r="@conversation/MEDIA_SEND"},789:function(e,t,n){"use strict";var a=n(315),c=n(320),r=n(376),o=n(526),i=n(336),s=n(365),u=n(383),l=n(790);const d=(new r.a).setUrl("/video-chat/conversation/log/event").setType(u.a.POST).build(),b="AUDIO_CALL",O="VIDEO_CALL";t.a=({videoConversationId:e,conversationId:t,isAudioCall:n})=>{const[r]=Object(o.a)(d,{ignoreResults:!0}),u=Object(a.useCallback)(e=>{const t=Date.now();return e.forEach(e=>{e.offsetTime=t-e.logTime}),r(e)},[r]),j=Object(c.d)(i.h),p=Object(s.d)(j),f=n?b:O,h=Object(a.useCallback)(n=>{const{message:a}=n;return{videoConversationId:e,logMessage:"USER: "+a,loggerSnUserId:p,category:f,loggerSnType:"SPRINKLR_LIVE_CHAT",logTime:Date.now(),additionalDetails:{conversationId:t}}},[t,e,p,f]),g=Object(a.useMemo)(()=>new l.a(u,{batch:!0,adapter:h,skip:!e}),[u,h,e]);return Object(a.useEffect)(()=>()=>{g.cleanup()},[]),g}},790:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(374),c=n(322);const r="debug",o="info",i="warning",s="error";class u{constructor(e,{batch:t,skip:n,adapter:u}){this.batch=void 0,this.logFn=void 0,this.logQueue=void 0,this.batchTimeoutId=void 0,this.skip=void 0,this.adapter=void 0,this.batchLogs=()=>{this.batchTimeoutId&&clearTimeout(this.batchTimeoutId),this.batchTimeoutId=setTimeout(()=>{this.logQueue.length&&(this.logFn(this.logQueue),this.logQueue=[]),this.batchLogs()},5e3)},this.log=e=>{if(this.skip)return;(e=>{const{level:t,message:n,category:u}=e,l=`timeStamp: ${Date.now()} category: ${u} message: ${n}`;switch(t){case r:Object(a.a)(l);break;case s:Object(c.b)(l);break;case o:console.info(l);break;case i:console.warn(l)}})(e);const t=this.adapter(e);return this.batch?(this.batchTimeoutId||this.batchLogs(),this.logQueue.push(t)):this.logFn(t)},this.debug=e=>{this.log({...e,level:r})},this.info=e=>{this.log({...e,level:o})},this.warning=e=>{this.log({...e,level:i})},this.error=e=>{this.log({...e,level:s})},this.cleanup=()=>{this.batchTimeoutId&&(clearTimeout(this.batchTimeoutId),this.logQueue.length&&this.logFn(this.logQueue))},this.logFn=e,this.logQueue=[],this.batch=!!t,this.skip=n,this.adapter=u,this.batchTimeoutId=null}}},791:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(380),c=n(357);const r=()=>{const e=Object(a.a)();return!!e&&!!c.a.getCallAccountId(e)}},792:function(e,t,n){"use strict";var a=n(315),c=n(1022);t.a=function(){const e=Object(a.useContext)(c.a),t=Object(a.useRef)(null);return Object(a.useEffect)(()=>()=>{t.current&&e.removePublisher(t.current)},[]),Object(a.useCallback)(n=>{t.current=n.current,t.current&&e.addPublisher(t.current)},[e])}},793:function(e,t,n){"use strict";var a=n(315),c=n(441);t.a=(e,t)=>{const[n,r]=Object(a.useState)(),o=Object(c.a)(e,t);Object(a.useEffect)(()=>{const a=[];if(n)if(e.ResizeObserver){const c=new e.ResizeObserver(t);c.observe(n),a.push(()=>c.disconnect())}else o(n);return()=>{a.forEach(e=>e())}},[n]);return Object(a.useCallback)(e=>{e&&r(e)},[])}},794:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a,c=n(315),r=n.n(c);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const i=({svgRef:e,title:t,...n})=>r.a.createElement("svg",o({id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 12 14",enableBackground:"new 0 0 12 14",xmlSpace:"preserve",ref:e},n),t?r.a.createElement("title",null,t):null,a||(a=r.a.createElement("g",{id:"engagement-score"},r.a.createElement("g",{id:"Smart-asset-recommendation_01-Copy-34",transform:"translate(-411.000000, -423.000000)"},r.a.createElement("g",{id:"sid-attachment",transform:"translate(411.000000, 423.000000)"},r.a.createElement("path",{id:"Path",d:"M4.198631,14c-0.795512,0-1.522396-0.264849-1.975732-0.533564 c-0.935669-0.604609-1.488565-1.349375-1.661586-2.226082c-0.269682-1.364355,0.514231-2.51606,0.548062-2.56439 L6.67506,0.873082c1.065194-1.312643,2.615621-0.865591,3.290308-0.449953 c1.521429,1.023147,1.054561,2.670234,0.598326,3.400017L6.271988,10.15873 c-0.629257,1.008649-1.688651,0.968534-2.244446,0.690638c-0.036731-0.018849-0.072495-0.04108-0.105359-0.067179 c-0.939536-0.751049-0.665021-1.85394-0.25035-2.41167l3.49426-5.083352C7.351682,3.016519,7.721889,2.94789,7.99157,3.133961 c0.270648,0.186071,0.339277,0.555795,0.152723,0.82596L4.637467,9.060672 C4.509876,9.241426,4.356186,9.554121,4.612336,9.807854C4.772792,9.864884,5.048273,9.876,5.27639,9.511591l4.291706-6.33655 c0.103426-0.170605,0.640856-1.156538-0.245517-1.753897c-0.086994-0.050747-1.072927-0.605092-1.70315,0.171571 l-5.53862,7.766636l0,0c0,0-0.52873,0.794545-0.352809,1.660136c0.111159,0.545162,0.488133,1.028462,1.12029,1.437335 c0.171088,0.09956,1.90517,1.040545,3.079589-0.574644l4.485993-6.424994c0.18752-0.269198,0.557729-0.335411,0.827411-0.14644 c0.268715,0.187521,0.334443,0.557728,0.146922,0.826927l-4.492759,6.433692C6.1096,13.653474,5.108202,14,4.198631,14z"})))))),s=r.a.forwardRef((e,t)=>r.a.createElement(i,o({svgRef:t},e)));n.p},795:function(e,t){e.exports=function(e,t){for(var n=-1,a=null==e?0:e.length;++n<a;)if(!t(e[n],n,e))return!1;return!0}},796:function(e,t,n){var a=n(104);e.exports=function(e,t){var n=!0;return a(e,(function(e,a,c){return n=!!t(e,a,c)})),n}},797:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));const a={NEW_CONVERSATION:"NEW_CONVERSATION",CLOSE:"CLOSE",URL:"OPEN_URL"},c={ENGAGED:"ENGAGED",CLOSED:"CLOSED",TRIGGERED:"TRIGGERED"}},799:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(315);const c=n.n(a).a.createContext(void 0)},812:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(4),c=n(3);const r=Object(a.a)("type");class o{}o.getType=Object(c.a)(r)},813:function(e,t,n){"use strict";var a=n(315);const c=n.n(a).a.createContext({height:0,width:0});t.a=c},932:function(e,t,n){"use strict";n.d(t,"a",(function(){return H})),n.d(t,"c",(function(){return p.h})),n.d(t,"d",(function(){return p.i})),n.d(t,"b",(function(){return p.g})),n.d(t,"e",(function(){return p.m}));var a=n(323),c=n(315),r=n.n(c),o=n(316),i=n(320),s=n(328),u=n(319),l=n(36),d=n.n(l),b=n(685),O=n.n(b),j=n(370),p=n(527),f=n(945),h=n(946),g=n(337),m=n(792),v=n(331),y=n(393),C=n(372),I=n(324),E=n(154),T=n.n(E),x=n(380),S=n(593),w=n(357),_=n(330);var A=n(344),R=n(374),N=n(332),M=n(400);const L=e=>Object(M.g)(Object(N.b)(e));var k=n(318),P=n(359),D=n(432),U=n(327),V=n(438);const F=e=>Object(M.g)(Object(N.b)(e)),G=e=>Object(M.f)(Object(N.b)(e)),B=e=>Object(N.d)(e),z=e=>e?Math.ceil(e.clientWidth):0;var H=r.a.memo(Object(u.injectIntl)(e=>{const t=Object(c.useRef)(null),n=Object(g.a)(),r=Object(s.b)(),u=Object(I.a)(),l=Object(c.useRef)(),b=Object(c.useRef)(),E=Object(y.a)()(_.a.getTriggerConfig(n),"label");(()=>{const e=Object(v.a)(A.h),t=Object(x.a)(),n=w.a.getNoDisplayConfigFilter(t),{hasPassed:a}=Object(S.a)(n,{defaultValue:!1,logOnSuccess:!0}),r=Object(i.d)(L);Object(c.useEffect)(()=>{!d()(n)&&r&&(a&&Object(R.a)("Sprinklr Chat hidden by display criteria"),e({value:a}))},[n,r,a])})();const[M,H]=Object(c.useState)(!0),[W,$]=Object(c.useState)(E),[q,Y]=Object(c.useState)(!1),[K,Z]=Object(c.useState)(!1),[Q,J]=Object(c.useState)(!1),[X,ee]=Object(c.useState)(0),te=Object(i.d)(N.b),ne=Object(i.d)(F),ae=Object(i.d)(G),ce=Object(i.d)(B),re=Object(v.a)(A.g),oe=Object(v.a)(A.c),ie=Object(C.a)(),se=_.a.getAnimationInfoOfTrigger(n),{showChatTriggerAnimation:ue}=(()=>{const[e,t]=Object(c.useState)(!1),n=Object(x.a)(),a=w.a.getTriggerAnimationConfigFilter(n),{hasPassed:r}=Object(S.a)(a,{defaultValue:!1,logOnSuccess:!0}),o=_.a.getAnimationInfoOfTrigger(w.a.getCustomizationConfig(n)),i=T()(o,"effect");return Object(c.useEffect)(()=>{!d()(a)&&i&&t(r)},[a,i,r]),{showChatTriggerAnimation:e}})(),le=O()(ae),de=O()(Q),be=O()(W);Object(c.useEffect)(()=>{(le||!de)&&!(ae||!Q)&&ie({action:V.a.TRIGGER_VISIBLE})},[Q,de,ae,le,ie]),Object(c.useEffect)(()=>(Q&&!u&&(l.current=window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{Z(!0)})})),()=>{l.current&&window.cancelAnimationFrame(l.current)}),[Q,u]),Object(c.useEffect)(()=>{const e=u?"":E;be!==e&&$(e)},[u,E,be]);const Oe=e.intl.formatMessage,je=_.a.canTriggerBeManuallyRemoved(n)&&ne&&d()(ce),pe=Object(c.useMemo)(()=>Object(k.e)("trigger.icon.type")({theme:r}),[r]),fe=Object(c.useMemo)(()=>Object(k.e)("trigger.closeIcon.type")({theme:r}),[r]),he=Object(m.a)(),ge=Object(c.useCallback)(()=>{re(!ne)},[ne,re]),me=Object(c.useCallback)(()=>{q&&(J(!0),ee(z(b.current))),he(t)},[q,he]),ve=Object(c.useCallback)(()=>{ee(z(b.current))},[]),ye=Object(c.useCallback)(e=>{Y(e),J(e),ee(z(b.current))},[]),Ce=Object(c.useCallback)(e=>{H(e)},[]);return ae?null:Object(o.jsx)(p.e,{enableTriggerHideIcon:je,applyRemoveIconStyles:M},Object(o.jsx)(p.f,{showTrigger:Q,showLabel:ne&&!!W,css:ue?Object(p.l)({triggerAnimationInfo:se,theme:r}):"",labelWidth:X,enableTriggerWidthTransition:K,theme:r,className:"spr-chat__trigger-box spr-live-chat-frame"},Object(o.jsx)(f.a,null,({ChatTriggerPage:e})=>Object(o.jsx)(p.a,{"aria-label":Oe(P.a.liveChat),name:"spr-chat__trigger-frame",contentDidMount:me},Object(o.jsx)(o.Global,{styles:Object(p.k)(r,{isMinimized:ne})}),Object(o.jsx)("div",{className:"full-height full-width",ref:t},Object(o.jsx)(j.FrameContextConsumer,null,({window:t})=>Object(o.jsx)(h.a,{window:t,onResize:ve,resizeRefs:b},t=>Object(o.jsx)(e,Object(a.a)({},te,{triggerIconName:pe,closeIconName:fe,label:W,innerLabelRef:t,onClick:ge,onLoad:ye,toggleRemoveIconVisibility:Ce})))))))),je&&Object(o.jsx)(p.c,{onClick:oe},Object(o.jsx)(p.d,null,Object(o.jsx)(p.b,{alt:D.a,name:U.a.CLOSE}))))}))},945:function(e,t,n){"use strict";var a=n(315),c=n(317);const r=Object(c.a)("div",{target:"e1ippspd0"})({name:"1enwibq",styles:"position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;"});var o=n(347),i=n(1016),s=n(9),u=n(316);t.a=e=>{const t=Object(i.a)(),[c,l]=Object(a.useState)();Object(a.useEffect)(()=>{n(1017)(`./${t.toLowerCase()}/pages`).then(e=>{l(e)})},[]);let d=null;return Object(s.J)()&&!c&&(d=Object(u.jsx)(o.c,{className:"flex-row-container center-x-y full-height"})),c&&(d=e.children(c)),Object(u.jsx)(r,{className:e.className},d)}},946:function(e,t,n){"use strict";var a=n(315),c=n.n(a),r=n(439),o=n.n(r),i=n(793),s=n(377),u=n(316);var l=e=>{const t=Object(i.a)(e.window,e.onResize),n=Object(a.useMemo)(()=>[...o()(e.resizeRefs||[]),t],[t,e.resizeRefs]),r=Object(s.a)(n);return Object(u.jsx)(c.a.Fragment,null,e.children(r))};t.a=l},947:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return m}));var a=n(350),c=n.n(a),r=n(1437),o=n.n(r),i=n(38),s=n.n(i),u=n(36),l=n.n(u),d=n(449),b=n.n(d);function O(e){const t=function({url:e,data:t,method:n="GET",contentType:a}){const r=b()(),i=document.createElement("form"),{body:u}=document;if(i.setAttribute("id","spr-chat-download-form-"+r),i.setAttribute("target","_top"),i.setAttribute("action",e),i.setAttribute("method",n),i.style.display="none",a&&(i.enctype=a),!l()(t)){let e="";c()(t,(t,n)=>{e+=`<input type="hidden" id="${n}" name="${n}" value=${s()(t)?`'${o()(JSON.stringify(t))}'`:`"${o()(t)}"`} />`}),i.innerHTML=e}return u.appendChild(i),i}(e);t.submit(),setTimeout(()=>{var e;(e=t)&&e.parentNode&&e.parentNode.removeChild(e)},3e4)}var j=n(10),p=n(448),f=n(0),h=n(390);async function g(e){const t=await Object(p.a)(f.a.getAppId(Object(j.a)()));O({url:"https://prod4-live-chat.sprinklr.com/api/livechat/conversation/downloadChatTranscript",data:{timeZone:Object(h.f)(),"x-chat-token":t,conversationId:e}})}async function m(e){const t=await Object(p.a)(f.a.getAppId(Object(j.a)()));O({url:"https://prod4-live-chat.sprinklr.com/api/livechat/conversation/downloadAttachment",data:{timeZone:Object(h.f)(),"x-chat-token":t,...e}})}},978:function(e,t,n){"use strict";var a=n(449),c=n.n(a),r=n(350),o=n.n(r);t.a=class{constructor(){this.emit=e=>{o()(this.subscribers,t=>t(e))},this.on=e=>{const t=c()("SUB");return this.subscribers[t]=e,()=>{delete this.subscribers[t]}},this.reset=()=>{this.subscribers={}},this.subscribers={}}}},979:function(e,t,n){var a=n(607);e.exports=function(e,t){for(var n=e.length;n--&&a(t,e[n],0)>-1;);return n}},981:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(323);var a=n(315),c=n.n(a),r=n(324),o=n(390),i=n(34),s=n(552),u=n(316);const l=c.a.createContext({});t.b=e=>{const[t,n]=Object(a.useState)(()=>Object(o.a)()),c=Object(r.a)(),{subscribe:d}=Object(s.a)();Object(a.useEffect)(()=>{const e=d("page-context-change-subscriber",()=>{n(Object(o.a)())});return()=>{e()}},[]);const b=Object(a.useMemo)(()=>({...t,device:c?i.b:i.a}),[t,c]);return Object(u.jsx)(l.Provider,{value:b},e.children)}}}]);
//# sourceMappingURL=live-chat-app.ecaff6f2.js.map